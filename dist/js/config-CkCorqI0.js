const n="1.0.0";let t=null,i=null,o=null;let s={documents:0,institutions:0,jurisdictions:0,squircleIcons:0};function c(n){const t=Date.now();return s[n]&&t-s[n]<3e5}function r(n){s[n]=Date.now()}async function e(t,i=!0){const o=i?`?v=${n}&t=${Date.now()}`:`?t=${Date.now()}`;return fetch(t+o,{cache:"no-store",headers:{Accept:"application/json"}})}async function u(){if(t&&c("documents"))return t;try{const n=await e("config/documents-config.json");if(!n.ok)throw new Error(`Failed to load config: ${n.status} ${n.statusText}`);const i=await n.json();return t=i,r("documents"),i}catch(n){throw console.error("Error loading documents config:",n),n}}async function a(){if(i&&c("institutions"))return i;try{const n=await e("config/institution-config.json");if(!n.ok)throw new Error(`Failed to load institution config: ${n.status} ${n.statusText}`);const t=await n.json();return i=t,r("institutions"),t}catch(n){return console.error("Error loading institution config:",n),{institutions:{}}}}async function f(){if(o&&c("jurisdictions"))return o;try{const n=await e("config/jurisdiction-config.json");if(!n.ok)throw new Error(`Failed to load jurisdiction config: ${n.status} ${n.statusText}`);const t=await n.json();return o=t,r("jurisdictions"),t}catch(n){return console.error("Error loading jurisdiction config:",n),{jurisdictions:{}}}}function d(){return n}function l(n){w()}function w(){t=null,i=null,o=null,s={documents:0,institutions:0,jurisdictions:0,squircleIcons:0}}async function g(n){const t=await a();return t.institutions?.[n]?.feed_config||null}async function j(n){const t=await f();return t.jurisdictions?.[n]?.feed_config||null}async function h(n){const t=await a(),i=[];for(const[o,s]of Object.entries(t.institutions||{})){const t=s.feed_config?.carousel;if(t&&t.post_to_jurisdictions?.includes(n)){const n=await Promise.all(t.images.map(async n=>{const t=n.document_id?await m(n.document_id):null;return{...n,document:t}}));i.push({institution:o,...t,images:n})}}return i}async function m(n){return(await u()).documents.find(t=>t.id===n)||null}"undefined"!=typeof window&&(window.clearConfigCache=w,window.getCacheVersion=d,window.setCacheVersion=l);export{w as clearConfigCache,d as getCacheVersion,m as getDocumentById,g as getInstitutionFeedConfig,h as getJurisdictionCarousels,j as getJurisdictionFeedConfig,u as loadDocumentsConfig,a as loadInstitutionConfig,f as loadJurisdictionConfig,l as setCacheVersion};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlnLUNrQ29ycUkwLmpzIiwic291cmNlcyI6WyIuLi8uLi9qcy9jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvbmZpZ3VyYXRpb24gTW9kdWxlXHJcbiAqIExvYWRzIGFuZCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzLWNvbmZpZy5qc29uLCBpbnN0aXR1dGlvbi1jb25maWcuanNvbiwgYW5kIGp1cmlzZGljdGlvbi1jb25maWcuanNvblxyXG4gKiBPcHRpbWl6ZWQgd2l0aCBhZ2dyZXNzaXZlIGNhY2hpbmcgdG8gcmVkdWNlIG5ldHdvcmsgcmVxdWVzdHNcclxuICogSW5jbHVkZXMgY2FjaGUtYnVzdGluZyBmb3IgZGV2ZWxvcG1lbnRcclxuICovXHJcblxyXG4vLyBDYWNoZSB2ZXJzaW9uIC0gaW5jcmVtZW50IHRoaXMgd2hlbiBjb25maWcgZmlsZXMgY2hhbmdlIHRvIGJ1c3QgY2FjaGVcclxuY29uc3QgQ0FDSEVfVkVSU0lPTiA9ICcxLjAuMCc7XHJcblxyXG5sZXQgY29uZmlnQ2FjaGUgPSBudWxsO1xyXG5sZXQgaW5zdGl0dXRpb25Db25maWdDYWNoZSA9IG51bGw7XHJcbmxldCBqdXJpc2RpY3Rpb25Db25maWdDYWNoZSA9IG51bGw7XHJcbmxldCBzcXVpcmNsZUljb25zQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG5cclxuLy8gQ2FjaGUgdGltZXN0YW1wcyBmb3IgVFRMLWJhc2VkIGludmFsaWRhdGlvblxyXG5jb25zdCBDQUNIRV9UVEwgPSA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbnV0ZXNcclxubGV0IGNhY2hlVGltZXN0YW1wcyA9IHtcclxuICBkb2N1bWVudHM6IDAsXHJcbiAgaW5zdGl0dXRpb25zOiAwLFxyXG4gIGp1cmlzZGljdGlvbnM6IDAsXHJcbiAgc3F1aXJjbGVJY29uczogMFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGNhY2hlIGlzIHN0aWxsIHZhbGlkIGJhc2VkIG9uIFRUTFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVUeXBlIC0gVHlwZSBvZiBjYWNoZSB0byBjaGVja1xyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBjYWNoZSBpcyB2YWxpZFxyXG4gKi9cclxuZnVuY3Rpb24gaXNDYWNoZVZhbGlkKGNhY2hlVHlwZSkge1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgcmV0dXJuIGNhY2hlVGltZXN0YW1wc1tjYWNoZVR5cGVdICYmIChub3cgLSBjYWNoZVRpbWVzdGFtcHNbY2FjaGVUeXBlXSA8IENBQ0hFX1RUTCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgY2FjaGUgdGltZXN0YW1wXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZVR5cGUgLSBUeXBlIG9mIGNhY2hlIHRvIHVwZGF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ2FjaGVUaW1lc3RhbXAoY2FjaGVUeXBlKSB7XHJcbiAgY2FjaGVUaW1lc3RhbXBzW2NhY2hlVHlwZV0gPSBEYXRlLm5vdygpO1xyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggd2l0aCBjYWNoaW5nIGFuZCBjYWNoZS1idXN0aW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gZmV0Y2hcclxuICogQHBhcmFtIHtib29sZWFufSB1c2VDYWNoZUJ1c3RpbmcgLSBXaGV0aGVyIHRvIGFkZCBjYWNoZS1idXN0aW5nIHF1ZXJ5IHBhcmFtXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0gRmV0Y2ggcmVzcG9uc2VcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aENhY2hlKHVybCwgdXNlQ2FjaGVCdXN0aW5nID0gdHJ1ZSkge1xyXG4gIC8vIEFkZCBjYWNoZS1idXN0aW5nIHF1ZXJ5IHBhcmFtIGJhc2VkIG9uIHZlcnNpb24gYW5kIHRpbWVzdGFtcFxyXG4gIGNvbnN0IGNhY2hlQnVzdGVyID0gdXNlQ2FjaGVCdXN0aW5nIFxyXG4gICAgPyBgP3Y9JHtDQUNIRV9WRVJTSU9OfSZ0PSR7RGF0ZS5ub3coKX1gIFxyXG4gICAgOiBgP3Q9JHtEYXRlLm5vdygpfWA7XHJcbiAgXHJcbiAgcmV0dXJuIGZldGNoKHVybCArIGNhY2hlQnVzdGVyLCB7XHJcbiAgICBjYWNoZTogJ25vLXN0b3JlJywgLy8gVXNlIG5vLXN0b3JlIHRvIGxldCBjYWNoZS1idXN0aW5nIHF1ZXJ5IHBhcmFtIGNvbnRyb2wgY2FjaGluZ1xyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2FkIHRoZSBkb2N1bWVudHMgY29uZmlndXJhdGlvbiBmcm9tIEpTT04gZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRG9jdW1lbnRzQ29uZmlnKCkge1xyXG4gIGlmIChjb25maWdDYWNoZSAmJiBpc0NhY2hlVmFsaWQoJ2RvY3VtZW50cycpKSB7XHJcbiAgICByZXR1cm4gY29uZmlnQ2FjaGU7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhDYWNoZSgnY29uZmlnL2RvY3VtZW50cy1jb25maWcuanNvbicpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGNvbmZpZzogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBjb25maWdDYWNoZSA9IGNvbmZpZztcclxuICAgIHVwZGF0ZUNhY2hlVGltZXN0YW1wKCdkb2N1bWVudHMnKTtcclxuICAgIHJldHVybiBjb25maWc7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZG9jdW1lbnRzIGNvbmZpZzonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2FkIHRoZSBpbnN0aXR1dGlvbiBjb25maWd1cmF0aW9uIGZyb20gSlNPTiBmaWxlXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IFRoZSBpbnN0aXR1dGlvbiBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRJbnN0aXR1dGlvbkNvbmZpZygpIHtcclxuICBpZiAoaW5zdGl0dXRpb25Db25maWdDYWNoZSAmJiBpc0NhY2hlVmFsaWQoJ2luc3RpdHV0aW9ucycpKSB7XHJcbiAgICByZXR1cm4gaW5zdGl0dXRpb25Db25maWdDYWNoZTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aENhY2hlKCdjb25maWcvaW5zdGl0dXRpb24tY29uZmlnLmpzb24nKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBpbnN0aXR1dGlvbiBjb25maWc6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgaW5zdGl0dXRpb25Db25maWdDYWNoZSA9IGNvbmZpZztcclxuICAgIHVwZGF0ZUNhY2hlVGltZXN0YW1wKCdpbnN0aXR1dGlvbnMnKTtcclxuICAgIHJldHVybiBjb25maWc7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgaW5zdGl0dXRpb24gY29uZmlnOicsIGVycm9yKTtcclxuICAgIC8vIFJldHVybiBlbXB0eSBjb25maWcgb24gZXJyb3IgdG8gcHJldmVudCBicmVha2luZyB0aGUgVUlcclxuICAgIHJldHVybiB7IGluc3RpdHV0aW9uczoge30gfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2FkIHRoZSBqdXJpc2RpY3Rpb24gY29uZmlndXJhdGlvbiBmcm9tIEpTT04gZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUganVyaXNkaWN0aW9uIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEp1cmlzZGljdGlvbkNvbmZpZygpIHtcclxuICBpZiAoanVyaXNkaWN0aW9uQ29uZmlnQ2FjaGUgJiYgaXNDYWNoZVZhbGlkKCdqdXJpc2RpY3Rpb25zJykpIHtcclxuICAgIHJldHVybiBqdXJpc2RpY3Rpb25Db25maWdDYWNoZTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aENhY2hlKCdjb25maWcvanVyaXNkaWN0aW9uLWNvbmZpZy5qc29uJyk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQganVyaXNkaWN0aW9uIGNvbmZpZzogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBcclxuICAgIGp1cmlzZGljdGlvbkNvbmZpZ0NhY2hlID0gY29uZmlnO1xyXG4gICAgdXBkYXRlQ2FjaGVUaW1lc3RhbXAoJ2p1cmlzZGljdGlvbnMnKTtcclxuICAgIHJldHVybiBjb25maWc7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcganVyaXNkaWN0aW9uIGNvbmZpZzonLCBlcnJvcik7XHJcbiAgICAvLyBSZXR1cm4gZW1wdHkgY29uZmlnIG9uIGVycm9yIHRvIHByZXZlbnQgYnJlYWtpbmcgdGhlIFVJXHJcbiAgICByZXR1cm4geyBqdXJpc2RpY3Rpb25zOiB7fSB9O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBpbnN0aXR1dGlvbiBtZXRhZGF0YSBieSBmdWxsIGluc3RpdHV0aW9uIG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IGluc3RpdHV0aW9uTmFtZSAtIFRoZSBmdWxsIGluc3RpdHV0aW9uIG5hbWUgKGUuZy4sIFwiVW1tYWggQ2FiaW5ldCBbTm9uLVByb2ZpdCDigKIgUHJpdmF0ZV1cIilcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBUaGUgaW5zdGl0dXRpb24gbWV0YWRhdGEgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnN0aXR1dGlvbk1ldGFkYXRhKGluc3RpdHV0aW9uTmFtZSkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWRJbnN0aXR1dGlvbkNvbmZpZygpO1xyXG4gIHJldHVybiBjb25maWcuaW5zdGl0dXRpb25zPy5baW5zdGl0dXRpb25OYW1lXSB8fCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGp1cmlzZGljdGlvbiBtZXRhZGF0YSBieSBmdWxsIGp1cmlzZGljdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBqdXJpc2RpY3Rpb25OYW1lIC0gVGhlIGZ1bGwganVyaXNkaWN0aW9uIG5hbWUgKGUuZy4sIFwiQm9ybmVvIFtSZWdpb25dXCIpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGp1cmlzZGljdGlvbiBtZXRhZGF0YSBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEp1cmlzZGljdGlvbk1ldGFkYXRhKGp1cmlzZGljdGlvbk5hbWUpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkSnVyaXNkaWN0aW9uQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5qdXJpc2RpY3Rpb25zPy5banVyaXNkaWN0aW9uTmFtZV0gfHwgbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgdmlzaWJsZSBkb2N1bWVudHNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXk+fSBBcnJheSBvZiBkb2N1bWVudCBvYmplY3RzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRzKCkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWREb2N1bWVudHNDb25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmRvY3VtZW50cy5maWx0ZXIoZG9jID0+IGRvYy52aXNpYmxlICE9PSBmYWxzZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdW5pcXVlIGl0ZW1zIGZyb20gYWxsIGRvY3VtZW50c1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IFNvcnRlZCBhcnJheSBvZiB1bmlxdWUgaXRlbXNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJdGVtcygpIHtcclxuICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHMoKTtcclxuICBjb25zdCBpdGVtcyA9IG5ldyBTZXQoZG9jdW1lbnRzLm1hcChkb2MgPT4gZG9jLml0ZW0pKTtcclxuICByZXR1cm4gWy4uLml0ZW1zXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVuaXF1ZSBpbnN0aXR1dGlvbnMgZnJvbSBhbGwgZG9jdW1lbnRzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gU29ydGVkIGFycmF5IG9mIHVuaXF1ZSBpbnN0aXR1dGlvbnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnN0aXR1dGlvbnMoKSB7XHJcbiAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcbiAgY29uc3QgaW5zdGl0dXRpb25zID0gbmV3IFNldChkb2N1bWVudHMubWFwKGRvYyA9PiBkb2MuaW5zdGl0dXRpb24pKTtcclxuICByZXR1cm4gWy4uLmluc3RpdHV0aW9uc10uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1bmlxdWUganVyaXNkaWN0aW9ucyBmcm9tIGFsbCBkb2N1bWVudHNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXk+fSBTb3J0ZWQgYXJyYXkgb2YgdW5pcXVlIGp1cmlzZGljdGlvbnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRKdXJpc2RpY3Rpb25zKCkge1xyXG4gIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGdldERvY3VtZW50cygpO1xyXG4gIGNvbnN0IGp1cmlzZGljdGlvbnMgPSBuZXcgU2V0KGRvY3VtZW50cy5tYXAoZG9jID0+IGRvYy5qdXJpc2RpY3Rpb24pKTtcclxuICByZXR1cm4gWy4uLmp1cmlzZGljdGlvbnNdLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2FkIHRoZSBzcXVpcmNsZSBpY29ucyBjb25maWd1cmF0aW9uIGZyb20gSlNPTiBmaWxlXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IFRoZSBzcXVpcmNsZSBpY29ucyBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRTcXVpcmNsZUljb25zQ29uZmlnKCkge1xyXG4gIGlmIChzcXVpcmNsZUljb25zQ29uZmlnQ2FjaGUgJiYgaXNDYWNoZVZhbGlkKCdzcXVpcmNsZUljb25zJykpIHtcclxuICAgIHJldHVybiBzcXVpcmNsZUljb25zQ29uZmlnQ2FjaGU7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhDYWNoZSgnY29uZmlnL3NxdWlyY2xlLWljb25zLWNvbmZpZy5qc29uJyk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgc3F1aXJjbGUgaWNvbnMgY29uZmlnOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIHNxdWlyY2xlSWNvbnNDb25maWdDYWNoZSA9IGNvbmZpZztcclxuICAgIHVwZGF0ZUNhY2hlVGltZXN0YW1wKCdzcXVpcmNsZUljb25zJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHNxdWlyY2xlIGljb25zIGNvbmZpZzonLCBlcnJvcik7XHJcbiAgICAvLyBSZXR1cm4gZW1wdHkgY29uZmlnIG9uIGVycm9yIHRvIHByZXZlbnQgYnJlYWtpbmcgdGhlIFVJXHJcbiAgICByZXR1cm4geyBpY29uczoge30gfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgc3F1aXJjbGUgaWNvbiBtZXRhZGF0YSBieSBpdGVtIG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1OYW1lIC0gVGhlIGl0ZW0gbmFtZSAoZS5nLiwgXCJCb29rXCIsIFwiUG9saWN5XCIsIFwiRGVjaXNpb25cIilcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBUaGUgaWNvbiBtZXRhZGF0YSBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNxdWlyY2xlSWNvbk1ldGFkYXRhKGl0ZW1OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZFNxdWlyY2xlSWNvbnNDb25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmljb25zPy5baXRlbU5hbWVdIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmVsb2FkIGFsbCBjb25maWd1cmF0aW9ucyBhdCBvbmNlXHJcbiAqIFVzZWZ1bCBmb3IgaW5pdGlhbCBwYWdlIGxvYWQgdG8gYmF0Y2ggcmVxdWVzdHNcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gT2JqZWN0IGNvbnRhaW5pbmcgYWxsIGNvbmZpZ3NcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVsb2FkQWxsQ29uZmlncygpIHtcclxuICBjb25zdCBbZG9jdW1lbnRzLCBpbnN0aXR1dGlvbnMsIGp1cmlzZGljdGlvbnMsIHNxdWlyY2xlSWNvbnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgbG9hZERvY3VtZW50c0NvbmZpZygpLFxyXG4gICAgbG9hZEluc3RpdHV0aW9uQ29uZmlnKCksXHJcbiAgICBsb2FkSnVyaXNkaWN0aW9uQ29uZmlnKCksXHJcbiAgICBsb2FkU3F1aXJjbGVJY29uc0NvbmZpZygpXHJcbiAgXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBkb2N1bWVudHMsXHJcbiAgICBpbnN0aXR1dGlvbnMsXHJcbiAgICBqdXJpc2RpY3Rpb25zLFxyXG4gICAgc3F1aXJjbGVJY29uc1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGN1cnJlbnQgY2FjaGUgdmVyc2lvblxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDdXJyZW50IGNhY2hlIHZlcnNpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZVZlcnNpb24oKSB7XHJcbiAgcmV0dXJuIENBQ0hFX1ZFUlNJT047XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgYSBuZXcgY2FjaGUgdmVyc2lvbiB0byBidXN0IGFsbCBjYWNoZXNcclxuICogQHBhcmFtIHtzdHJpbmd9IHZlcnNpb24gLSBOZXcgdmVyc2lvbiBzdHJpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDYWNoZVZlcnNpb24odmVyc2lvbikge1xyXG4gIC8vIENsZWFyIGFsbCBjYWNoZXMgd2hlbiB2ZXJzaW9uIGNoYW5nZXNcclxuICBjbGVhckNvbmZpZ0NhY2hlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciB0aGUgY29uZmlnIGNhY2hlICh1c2VmdWwgZm9yIHRlc3Rpbmcgb3IgaG90LXJlbG9hZClcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhckNvbmZpZ0NhY2hlKCkge1xyXG4gIGNvbmZpZ0NhY2hlID0gbnVsbDtcclxuICBpbnN0aXR1dGlvbkNvbmZpZ0NhY2hlID0gbnVsbDtcclxuICBqdXJpc2RpY3Rpb25Db25maWdDYWNoZSA9IG51bGw7XHJcbiAgc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlID0gbnVsbDtcclxuICBjYWNoZVRpbWVzdGFtcHMgPSB7XHJcbiAgICBkb2N1bWVudHM6IDAsXHJcbiAgICBpbnN0aXR1dGlvbnM6IDAsXHJcbiAgICBqdXJpc2RpY3Rpb25zOiAwLFxyXG4gICAgc3F1aXJjbGVJY29uczogMFxyXG4gIH07XHJcbn1cclxuXHJcbi8vIEV4cG9zZSBjYWNoZSB1dGlsaXRpZXMgZ2xvYmFsbHkgZm9yIGRldmVsb3BtZW50IChjYW4gYmUgY2FsbGVkIGZyb20gYnJvd3NlciBjb25zb2xlKVxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICB3aW5kb3cuY2xlYXJDb25maWdDYWNoZSA9IGNsZWFyQ29uZmlnQ2FjaGU7XHJcbiAgd2luZG93LmdldENhY2hlVmVyc2lvbiA9IGdldENhY2hlVmVyc2lvbjtcclxuICB3aW5kb3cuc2V0Q2FjaGVWZXJzaW9uID0gc2V0Q2FjaGVWZXJzaW9uO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGluc3RpdHV0aW9uIGZlZWQgY29uZmlndXJhdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5zdGl0dXRpb25OYW1lIC0gVGhlIGZ1bGwgaW5zdGl0dXRpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBmZWVkIGNvbmZpZyBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEluc3RpdHV0aW9uRmVlZENvbmZpZyhpbnN0aXR1dGlvbk5hbWUpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkSW5zdGl0dXRpb25Db25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmluc3RpdHV0aW9ucz8uW2luc3RpdHV0aW9uTmFtZV0/LmZlZWRfY29uZmlnIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQganVyaXNkaWN0aW9uIGZlZWQgY29uZmlndXJhdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganVyaXNkaWN0aW9uTmFtZSAtIFRoZSBmdWxsIGp1cmlzZGljdGlvbiBuYW1lXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGZlZWQgY29uZmlnIG9yIG51bGwgaWYgbm90IGZvdW5kXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SnVyaXNkaWN0aW9uRmVlZENvbmZpZyhqdXJpc2RpY3Rpb25OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZEp1cmlzZGljdGlvbkNvbmZpZygpO1xyXG4gIHJldHVybiBjb25maWcuanVyaXNkaWN0aW9ucz8uW2p1cmlzZGljdGlvbk5hbWVdPy5mZWVkX2NvbmZpZyB8fCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGFsbCBjYXJvdXNlbHMgZm9yIGEganVyaXNkaWN0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBqdXJpc2RpY3Rpb25OYW1lIC0gVGhlIGZ1bGwganVyaXNkaWN0aW9uIG5hbWVcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXk+fSBBcnJheSBvZiBjYXJvdXNlbCBvYmplY3RzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SnVyaXNkaWN0aW9uQ2Fyb3VzZWxzKGp1cmlzZGljdGlvbk5hbWUpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkSW5zdGl0dXRpb25Db25maWcoKTtcclxuICBjb25zdCBjYXJvdXNlbHMgPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCBbaW5zdE5hbWUsIGluc3REYXRhXSBvZiBPYmplY3QuZW50cmllcyhjb25maWcuaW5zdGl0dXRpb25zIHx8IHt9KSkge1xyXG4gICAgY29uc3QgY2Fyb3VzZWwgPSBpbnN0RGF0YS5mZWVkX2NvbmZpZz8uY2Fyb3VzZWw7XHJcbiAgICBpZiAoY2Fyb3VzZWwgJiYgY2Fyb3VzZWwucG9zdF90b19qdXJpc2RpY3Rpb25zPy5pbmNsdWRlcyhqdXJpc2RpY3Rpb25OYW1lKSkge1xyXG4gICAgICAvLyBGZXRjaCBkb2N1bWVudCBkYXRhIGZvciBlYWNoIGltYWdlXHJcbiAgICAgIGNvbnN0IGltYWdlc1dpdGhEb2NzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgY2Fyb3VzZWwuaW1hZ2VzLm1hcChhc3luYyAoaW1nKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkb2MgPSBpbWcuZG9jdW1lbnRfaWQgPyBhd2FpdCBnZXREb2N1bWVudEJ5SWQoaW1nLmRvY3VtZW50X2lkKSA6IG51bGw7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5pbWcsXHJcbiAgICAgICAgICAgIGRvY3VtZW50OiBkb2NcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNhcm91c2Vscy5wdXNoKHtcclxuICAgICAgICBpbnN0aXR1dGlvbjogaW5zdE5hbWUsXHJcbiAgICAgICAgLi4uY2Fyb3VzZWwsXHJcbiAgICAgICAgaW1hZ2VzOiBpbWFnZXNXaXRoRG9jc1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBjYXJvdXNlbHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZG9jdW1lbnQgYnkgSURcclxuICogQHBhcmFtIHtzdHJpbmd9IGRvY3VtZW50SWQgLSBUaGUgZG9jdW1lbnQgSURcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBUaGUgZG9jdW1lbnQgb2JqZWN0IG9yIG51bGwgaWYgbm90IGZvdW5kXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRCeUlkKGRvY3VtZW50SWQpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkRG9jdW1lbnRzQ29uZmlnKCk7XHJcbiAgY29uc3QgZG9jID0gY29uZmlnLmRvY3VtZW50cy5maW5kKGRvYyA9PiBkb2MuaWQgPT09IGRvY3VtZW50SWQpIHx8IG51bGw7XHJcbiAgcmV0dXJuIGRvYztcclxufVxyXG4iXSwibmFtZXMiOlsiQ0FDSEVfVkVSU0lPTiIsImNvbmZpZ0NhY2hlIiwiaW5zdGl0dXRpb25Db25maWdDYWNoZSIsImp1cmlzZGljdGlvbkNvbmZpZ0NhY2hlIiwiY2FjaGVUaW1lc3RhbXBzIiwiZG9jdW1lbnRzIiwiaW5zdGl0dXRpb25zIiwianVyaXNkaWN0aW9ucyIsInNxdWlyY2xlSWNvbnMiLCJpc0NhY2hlVmFsaWQiLCJjYWNoZVR5cGUiLCJub3ciLCJEYXRlIiwidXBkYXRlQ2FjaGVUaW1lc3RhbXAiLCJhc3luYyIsImZldGNoV2l0aENhY2hlIiwidXJsIiwidXNlQ2FjaGVCdXN0aW5nIiwiY2FjaGVCdXN0ZXIiLCJmZXRjaCIsImNhY2hlIiwiaGVhZGVycyIsIkFjY2VwdCIsImxvYWREb2N1bWVudHNDb25maWciLCJyZXNwb25zZSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiY29uZmlnIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImxvYWRJbnN0aXR1dGlvbkNvbmZpZyIsImxvYWRKdXJpc2RpY3Rpb25Db25maWciLCJnZXRDYWNoZVZlcnNpb24iLCJzZXRDYWNoZVZlcnNpb24iLCJ2ZXJzaW9uIiwiY2xlYXJDb25maWdDYWNoZSIsImdldEluc3RpdHV0aW9uRmVlZENvbmZpZyIsImluc3RpdHV0aW9uTmFtZSIsImZlZWRfY29uZmlnIiwiZ2V0SnVyaXNkaWN0aW9uRmVlZENvbmZpZyIsImp1cmlzZGljdGlvbk5hbWUiLCJnZXRKdXJpc2RpY3Rpb25DYXJvdXNlbHMiLCJjYXJvdXNlbHMiLCJpbnN0TmFtZSIsImluc3REYXRhIiwiT2JqZWN0IiwiZW50cmllcyIsImNhcm91c2VsIiwicG9zdF90b19qdXJpc2RpY3Rpb25zIiwiaW5jbHVkZXMiLCJpbWFnZXNXaXRoRG9jcyIsIlByb21pc2UiLCJhbGwiLCJpbWFnZXMiLCJtYXAiLCJpbWciLCJkb2MiLCJkb2N1bWVudF9pZCIsImdldERvY3VtZW50QnlJZCIsImRvY3VtZW50IiwicHVzaCIsImluc3RpdHV0aW9uIiwiZG9jdW1lbnRJZCIsImZpbmQiLCJpZCIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkFBUUEsTUFBTUEsRUFBZ0IsUUFFdEIsSUFBSUMsRUFBYyxLQUNkQyxFQUF5QixLQUN6QkMsRUFBMEIsS0FLOUIsSUFBSUMsRUFBa0IsQ0FDcEJDLFVBQVcsRUFDWEMsYUFBYyxFQUNkQyxjQUFlLEVBQ2ZDLGNBQWUsR0FRakIsU0FBU0MsRUFBYUMsR0FDcEIsTUFBTUMsRUFBTUMsS0FBS0QsTUFDakIsT0FBT1AsRUFBZ0JNLElBQWVDLEVBQU1QLEVBQWdCTSxHQWY1QyxHQWdCbEIsQ0FNQSxTQUFTRyxFQUFxQkgsR0FDNUJOLEVBQWdCTSxHQUFhRSxLQUFLRCxLQUNwQyxDQVFBRyxlQUFlQyxFQUFlQyxFQUFLQyxHQUFrQixHQUVuRCxNQUFNQyxFQUFjRCxFQUNoQixNQUFNakIsT0FBbUJZLEtBQUtELFFBQzlCLE1BQU1DLEtBQUtELFFBRWYsT0FBT1EsTUFBTUgsRUFBTUUsRUFBYSxDQUM5QkUsTUFBTyxXQUNQQyxR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
