const n="1.0.0";let t=null,i=null;let o={documents:0,institutions:0,jurisdictions:0,squircleIcons:0};function s(n){const t=Date.now();return o[n]&&t-o[n]<3e5}function c(n){o[n]=Date.now()}async function u(t,i=!0){const o=i?`?v=${n}&t=${Date.now()}`:`?t=${Date.now()}`;return fetch(t+o,{cache:"no-store",headers:{Accept:"application/json"}})}async function e(){if(t&&s("institutions"))return t;try{const n=await u("config/institution-config.json");if(!n.ok)throw new Error(`Failed to load institution config: ${n.status} ${n.statusText}`);const i=await n.json();return t=i,c("institutions"),i}catch(n){return{institutions:{}}}}async function r(){if(i&&s("jurisdictions"))return i;try{const n=await u("config/jurisdiction-config.json");if(!n.ok)throw new Error(`Failed to load jurisdiction config: ${n.status} ${n.statusText}`);const t=await n.json();return i=t,c("jurisdictions"),t}catch(n){return{jurisdictions:{}}}}function a(){return n}function f(n){d()}function d(){t=null,i=null,o={documents:0,institutions:0,jurisdictions:0,squircleIcons:0}}async function l(n){const t=await e();return t.institutions?.[n]?.feed_config||null}async function w(n){const t=await r();return t.jurisdictions?.[n]?.feed_config||null}async function j(n){const t=await e(),i=[];for(const[o,s]of Object.entries(t.institutions||{})){const t=s.feed_config?.carousel;t&&t.post_to_jurisdictions?.includes(n)&&i.push({institution:o,...t})}return i}"undefined"!=typeof window&&(window.clearConfigCache=d,window.getCacheVersion=a,window.setCacheVersion=f);export{d as clearConfigCache,a as getCacheVersion,l as getInstitutionFeedConfig,j as getJurisdictionCarousels,w as getJurisdictionFeedConfig,e as loadInstitutionConfig,r as loadJurisdictionConfig,f as setCacheVersion};
