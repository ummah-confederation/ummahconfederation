const n="1.0.0";let t=null,i=null,o=null;let s={documents:0,institutions:0,jurisdictions:0,squircleIcons:0};function c(n){const t=Date.now();return s[n]&&t-s[n]<3e5}function u(n){s[n]=Date.now()}async function e(t,i=!0){const o=i?`?v=${n}&t=${Date.now()}`:`?t=${Date.now()}`;return fetch(t+o,{cache:"no-store",headers:{Accept:"application/json"}})}async function r(){if(t&&c("documents"))return t;try{const n=await e("config/documents-config.json");if(!n.ok)throw new Error(`Failed to load config: ${n.status} ${n.statusText}`);const i=await n.json();return t=i,u("documents"),i}catch(n){throw n}}async function a(){if(i&&c("institutions"))return i;try{const n=await e("config/institution-config.json");if(!n.ok)throw new Error(`Failed to load institution config: ${n.status} ${n.statusText}`);const t=await n.json();return i=t,u("institutions"),t}catch(n){return{institutions:{}}}}async function l(){if(o&&c("jurisdictions"))return o;try{const n=await e("config/jurisdiction-config.json");if(!n.ok)throw new Error(`Failed to load jurisdiction config: ${n.status} ${n.statusText}`);const t=await n.json();return o=t,u("jurisdictions"),t}catch(n){return{jurisdictions:{}}}}async function d(n){const t=await a();return t.institutions?.[n]||null}async function f(n){const t=await l();return t.jurisdictions?.[n]||null}async function w(){return(await r()).documents.filter(n=>!1!==n.visible)}function j(){return n}function y(n){g()}function g(){t=null,i=null,o=null,s={documents:0,institutions:0,jurisdictions:0,squircleIcons:0}}async function h(n){const t=await a();return t.institutions?.[n]?.feed_config||null}async function m(n){const t=await l();return t.jurisdictions?.[n]?.feed_config||null}async function $(n){return(await r()).documents.find(t=>t.id===n)||null}async function k(n,t){const i=(await w()).filter(i=>"Feed"===i.item&&("institution"===n?i.institution===t:"jurisdiction"===n&&i.jurisdiction===t));return await Promise.all(i.map(async n=>{const t=n.carousel?.linked_document_id?await $(n.carousel.linked_document_id):null;return{...n,linkedDocument:t}}))}"undefined"!=typeof window&&(window.clearConfigCache=g,window.getCacheVersion=j,window.setCacheVersion=y);export{g as clearConfigCache,j as getCacheVersion,$ as getDocumentById,w as getDocuments,k as getFeedDocuments,h as getInstitutionFeedConfig,d as getInstitutionMetadata,m as getJurisdictionFeedConfig,f as getJurisdictionMetadata,r as loadDocumentsConfig,a as loadInstitutionConfig,l as loadJurisdictionConfig,y as setCacheVersion};
