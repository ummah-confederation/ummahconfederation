class IndexedDBCache{constructor(e="ummah-cache",t="responses",a=1){this.dbName=e,this.storeName=t,this.version=a,this.db=null}async init(){return this.db?this.db:new Promise((e,t)=>{const a=indexedDB.open(this.dbName,this.version);a.onerror=()=>t(new Error(`Failed to open database: ${a.error}`)),a.onsuccess=()=>{this.db=a.result,e(this.db)},a.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){const e=t.createObjectStore(this.storeName,{keyPath:"key"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("ttl","ttl",{unique:!1})}}})}async get(e){try{const t=await this.init();return new Promise((a,i)=>{const n=t.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);n.onsuccess=()=>{const t=n.result;if(!t)return void a(null);Date.now()-t.timestamp<t.ttl?a(t.value):(this.delete(e).catch(console.warn),a(null))},n.onerror=()=>i(new Error(`Failed to get from cache: ${n.error}`))})}catch(e){return console.warn("IndexedDB get error:",e),null}}async set(e,t,a=3e5){try{const i=await this.init();return new Promise((n,r)=>{const s=i.transaction([this.storeName],"readwrite"),o=s.objectStore(this.storeName),c={key:e,value:t,timestamp:Date.now(),ttl:a},l=o.put(c);l.onsuccess=()=>n(),l.onerror=()=>r(new Error(`Failed to set cache: ${l.error}`)),s.oncomplete=()=>n(),s.onerror=()=>r(new Error(`Transaction failed: ${s.error}`))})}catch(e){console.warn("IndexedDB set error:",e)}}async getOrFetch(e,t,a){const i=await this.get(e);if(null!==i)return i;const n=await t();return await this.set(e,n,a),n}async getOrFetchStale(e,t,a,i=.8*a){try{const n=await this.init();return new Promise((r,s)=>{const o=n.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);o.onsuccess=()=>{const n=o.result;if(!n)return void t().then(t=>{this.set(e,t,a).catch(console.warn),r(t)}).catch(s);const c=Date.now()-n.timestamp;c<n.ttl?(c>i&&this.refreshInBackground(e,t,a),r(n.value)):(this.delete(e).catch(console.warn),t().then(t=>{this.set(e,t,a).catch(console.warn),r(t)}).catch(s))},o.onerror=()=>{t().then(t=>{this.set(e,t,a).catch(console.warn),r(t)}).catch(s)}})}catch(e){return console.warn("IndexedDB getOrFetchStale error:",e),t()}}async refreshInBackground(e,t,a){try{const i=await t();await this.set(e,i,a)}catch(e){console.warn("Background refresh failed:",e)}}async delete(e){try{const t=await this.init();return new Promise((a,i)=>{const n=t.transaction([this.storeName],"readwrite"),r=n.objectStore(this.storeName).delete(e);r.onsuccess=()=>a(),r.onerror=()=>i(new Error(`Failed to delete from cache: ${r.error}`)),n.oncomplete=()=>a(),n.onerror=()=>i(new Error(`Transaction failed: ${n.error}`))})}catch(e){console.warn("IndexedDB delete error:",e)}}async clear(){try{const e=await this.init();return new Promise((t,a)=>{const i=e.transaction([this.storeName],"readwrite"),n=i.objectStore(this.storeName).clear();n.onsuccess=()=>t(),n.onerror=()=>a(new Error(`Failed to clear cache: ${n.error}`)),i.oncomplete=()=>t(),i.onerror=()=>a(new Error(`Transaction failed: ${i.error}`))})}catch(e){console.warn("IndexedDB clear error:",e)}}async clearExpired(){try{const e=await this.init();return new Promise((t,a)=>{const i=e.transaction([this.storeName],"readwrite").objectStore(this.storeName).index("timestamp").openCursor();let n=0;const r=Date.now();i.onsuccess=e=>{const a=e.target.result;if(a){const e=a.value;r-e.timestamp>=e.ttl&&(a.delete(),n++),a.continue()}else t(n)},i.onerror=()=>a(new Error(`Failed to clear expired: ${i.error}`))})}catch(e){return console.warn("IndexedDB clearExpired error:",e),0}}async keys(){try{const e=await this.init();return new Promise((t,a)=>{const i=e.transaction([this.storeName],"readonly").objectStore(this.storeName).getAllKeys();i.onsuccess=()=>t(i.result),i.onerror=()=>a(new Error(`Failed to get keys: ${i.error}`))})}catch(e){return console.warn("IndexedDB keys error:",e),[]}}async getStats(){try{const e=await this.init();return new Promise((t,a)=>{const i=e.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();i.onsuccess=()=>{const e=i.result,a=Date.now();let n=0,r=0,s=0;e.forEach(e=>{const t=JSON.stringify(e).length;s+=t,a-e.timestamp<e.ttl?n++:r++}),t({totalEntries:e.length,validEntries:n,expiredEntries:r,totalBytes:s,totalKB:(s/1024).toFixed(2),avgEntrySize:e.length>0?(s/e.length).toFixed(2):0})},i.onerror=()=>a(new Error(`Failed to get stats: ${i.error}`))})}catch(e){return console.warn("IndexedDB getStats error:",e),{totalEntries:0,validEntries:0,expiredEntries:0,totalBytes:0,totalKB:0,avgEntrySize:0}}}async close(){this.db&&(this.db.close(),this.db=null)}async deleteDatabase(){return await this.close(),new Promise((e,t)=>{const a=indexedDB.deleteDatabase(this.dbName);a.onsuccess=()=>e(),a.onerror=()=>t(new Error(`Failed to delete database: ${a.error}`))})}}const e="prayer",t="geocoding",a="location",i={PRAYER_TIMES:864e5};const n=new class{constructor(){this.memoryCache=new Map,this.idbCache=new IndexedDBCache("ummah-unified-cache","cache"),this.initialized=!1,this.initPromise=null}async init(){if(!this.initialized)return this.initPromise||(this.initPromise=this._doInit()),this.initPromise}async _doInit(){try{await this.idbCache.init(),this.initialized=!0}catch(e){console.warn("UnifiedCacheManager: IndexedDB init failed, using memory-only mode:",e),this.initialized=!0}}generateKey(e,...t){return`${e}:${t.join(":")}`}generateLocationKey(e,t,a,...i){const n=t.toFixed(4),r=a.toFixed(4);return this.generateKey(e,n,r,...i)}async get(e){if(this.memoryCache.has(e)){const t=this.memoryCache.get(e);if(Date.now()-t.timestamp<t.ttl)return t.value;this.memoryCache.delete(e)}try{const t=await this.idbCache.get(e);if(null!==t)return this.memoryCache.set(e,{value:t,timestamp:Date.now(),ttl:i.PRAYER_TIMES}),t}catch(e){console.warn("UnifiedCacheManager: IndexedDB get failed:",e)}return null}async set(e,t,a=i.PRAYER_TIMES){const n={value:t,timestamp:Date.now(),ttl:a};this.memoryCache.set(e,n);try{await this.idbCache.set(e,t,a)}catch(e){console.warn("UnifiedCacheManager: IndexedDB set failed:",e)}}async delete(e){this.memoryCache.delete(e);try{await this.idbCache.delete(e)}catch(e){console.warn("UnifiedCacheManager: IndexedDB delete failed:",e)}}async invalidateNamespace(e){const t=e+":";for(const e of this.memoryCache.keys())e.startsWith(t)&&this.memoryCache.delete(e);try{const e=await this.idbCache.keys();for(const a of e)a.startsWith(t)&&await this.idbCache.delete(a)}catch(e){console.warn("UnifiedCacheManager: Namespace invalidation failed:",e)}}async clear(){this.memoryCache.clear();try{await this.idbCache.clear()}catch(e){console.warn("UnifiedCacheManager: Clear failed:",e)}}async clearExpired(){let e=0;const t=Date.now();for(const[a,i]of this.memoryCache.entries())t-i.timestamp>=i.ttl&&(this.memoryCache.delete(a),e++);try{e+=await this.idbCache.clearExpired()}catch(e){console.warn("UnifiedCacheManager: Expired clear failed:",e)}return e}async getStats(){const e=this.memoryCache.size;let t={totalEntries:0,validEntries:0,expiredEntries:0};try{t=await this.idbCache.getStats()}catch(e){console.warn("UnifiedCacheManager: Stats failed:",e)}return{memoryEntries:e,...t,totalEntries:e+t.totalEntries}}async getOrFetch(e,t,a){const i=await this.get(e);if(null!==i)return i;const n=await t();return await this.set(e,n,a),n}async getOrFetchStale(e,t,a,i=.8*a){if(this.memoryCache.has(e)){const n=this.memoryCache.get(e),r=Date.now()-n.timestamp;if(r<n.ttl){const s=r>i;return s&&this._refreshInBackground(e,t,a),{value:n.value,isStale:s}}}try{const t=await this.idbCache.get(e);if(null!==t)return this.memoryCache.set(e,{value:t,timestamp:Date.now(),ttl:a}),{value:t,isStale:!0}}catch(e){console.warn("UnifiedCacheManager: IDB get failed:",e)}const n=await t();return await this.set(e,n,a),{value:n,isStale:!1}}async _refreshInBackground(e,t,a){try{const i=await t();await this.set(e,i,a)}catch(e){console.warn("UnifiedCacheManager: Background refresh failed:",e)}}};"undefined"!=typeof window&&n.init().catch(console.warn);const r="gps_fresh",s="gps_cached",o="fallback",c={enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5},l=["https://corsproxy.io/?","https://api.allorigins.win/raw?url="],h={latitude:-6.2088,longitude:106.8456,city:"Jakarta",country:"Indonesia"},d={LOCATION:18e5,GEOCODING:6048e5},y=["Fajr","Dhuhr","Asr","Maghrib","Isha"];const u=new class{constructor(){this.location=null,this.prayerTimes=null,this.nextPrayer=null,this.timeToNextPrayer=null,this.isLoading=!1,this.error=null,this.lastDate=null,this.listeners=new Set,this.initialized=!1,this.initPromise=null,this.updateInterval=null,this.handleOnline=this.handleOnline.bind(this),this.handleOffline=this.handleOffline.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}async init(e={}){if(!this.initialized)return this.initPromise||(this.initPromise=this._doInit(e)),this.initPromise}async _doInit(e){try{this.isLoading=!0,this.notifyListeners("loading"),await n.init(),this.location=await this.getLocation({forceRefresh:e.forceRefresh}),this.prayerTimes=await this.fetchPrayerTimes(),this.calculateNextPrayer(),this.setupEventHandlers(),this.setupUpdateInterval(),this.setupDateChangeDetection(),this.initialized=!0,this.isLoading=!1,this.error=null,this.notifyListeners("initialized")}catch(e){throw console.error("PrayerTimesService initialization failed:",e),this.error=e,this.isLoading=!1,this.notifyListeners("error",e),e}}async getLocation(e={}){const{forceRefresh:i=!1,maxAge:o=d.LOCATION}=e,c=n.generateKey(a,"current");if(!i){const e=await n.get(c);if(e&&this.isLocationFresh(e,o)){if((!e.city||"Unknown"===e.city)&&e.latitude&&e.longitude)try{const a=n.generateLocationKey(t,e.latitude,e.longitude),i=await n.get(a);i&&(e.city=i.city,e.country=i.country)}catch(e){}return console.log("[PrayerTimesService] Using cached location:",e),{...e,quality:s}}}try{const e=await this.requestGPSPosition(),t={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:Date.now(),quality:r};try{await this.fetchCityName(t)}catch(e){console.warn("[PrayerTimesService] Geocoding failed:",e)}return await n.set(c,t,d.LOCATION),console.log("[PrayerTimesService] Got fresh GPS location:",t),t}catch(e){return console.warn("[PrayerTimesService] GPS failed, using fallback:",e.message),this.getLocationFallback(e,c)}}requestGPSPosition(){return new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,c):t(new Error("Geolocation not supported"))})}async getLocationFallback(e,a){const i=await this.getExpiredLocationCache(a);if(i&&i.quality!==o){if(!i.city||"Unknown"===i.city)try{const e=n.generateLocationKey(t,i.latitude,i.longitude),a=await n.get(e);a&&(i.city=a.city,i.country=a.country)}catch(e){}return console.log("[PrayerTimesService] Using expired cache as fallback:",i),{...i,quality:s,isExpired:!0}}return{...h,quality:o,fallbackReason:this.getGPSErrorMessage(e),timestamp:Date.now()}}async getExpiredLocationCache(e){try{if(!n.idbCache||!n.idbCache.db)return null;const t=n.idbCache.db;return new Promise(a=>{const i=t.transaction(["cache"],"readonly").objectStore("cache").get(e);i.onsuccess=()=>{const e=i.result;e&&e.value?a(e.value):a(null)},i.onerror=()=>a(null)})}catch(e){return null}}isLocationFresh(e,t){return!(!e||!e.timestamp)&&Date.now()-e.timestamp<t}getGPSErrorMessage(e){switch(e.code){case e.PERMISSION_DENIED:return"Permission denied";case e.POSITION_UNAVAILABLE:return"Position unavailable";case e.TIMEOUT:return"Request timed out";default:return e.message||"Unknown error"}}async fetchCityName(e){if(!e||e.quality===o)return;const a=n.generateLocationKey(t,e.latitude,e.longitude);try{const t=await n.get(a);if(t)return e.city=t.city,void(e.country=t.country)}catch(e){console.warn("[PrayerTimesService] Geocoding cache read error:",e)}try{const t=new AbortController,i=setTimeout(()=>t.abort(),5e3),r=await fetch(`/api/geocode?lat=${e.latitude}&lon=${e.longitude}`,{signal:t.signal});if(clearTimeout(i),r.ok){const t=await r.json();return e.city=t.city||"Unknown",e.country=t.country||"Unknown",await n.set(a,{city:e.city,country:e.country},d.GEOCODING),void await this.updateLocationCache(e)}}catch(e){console.warn("[PrayerTimesService] Serverless geocoding failed, trying CORS proxies:",e)}const i=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.latitude}&lon=${e.longitude}`;for(const t of l)try{const r=new AbortController,s=setTimeout(()=>r.abort(),5e3),o=await fetch(`${t}${encodeURIComponent(i)}`,{signal:r.signal});if(clearTimeout(s),!o.ok)continue;const c=await o.json();return e.city=c.address.city||c.address.town||c.address.village||c.address.county||"Unknown",e.country=c.address.country||"Unknown",await n.set(a,{city:e.city,country:e.country},d.GEOCODING),void await this.updateLocationCache(e)}catch(e){console.warn(`[PrayerTimesService] Geocoding proxy ${t} failed:`,e)}e.city="Unknown",e.country="Unknown"}async updateLocationCache(e){if(!e)return;const t=n.generateKey(a,"current");try{await n.set(t,e,d.LOCATION)}catch(e){console.warn("[PrayerTimesService] Failed to update location cache:",e)}}generatePrayerCacheKey(t){if(!t)return null;const a=(new Date).toLocaleDateString("en-CA",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone});return n.generateLocationKey(e,t.latitude,t.longitude,a,t.quality)}calculatePrayerTTL(){const e=new Date,t=Intl.DateTimeFormat().resolvedOptions().timeZone,a=e.toLocaleDateString("en-CA",{timeZone:t})+"T23:59:59",i=new Date(a).getTime()-e.getTime()+3e5;return Math.max(i,6e4)}async fetchPrayerTimes(e=this.location){if(!e)throw new Error("Location not available");const t=this.generatePrayerCacheKey(e);try{const a=await n.get(t);if(a){const t=new Date(a.date),i=new Date;if(t.toDateString()===i.toDateString()){console.log("[PrayerTimesService] Using cached prayer times");const t=Date.now()-new Date(a.date).getTime();return t>72e6&&this.refreshPrayerTimesInBackground(e),a.prayerTimes}}}catch(e){console.warn("[PrayerTimesService] Prayer times cache read error:",e)}return this.fetchPrayerTimesFromAPI(e)}async fetchPrayerTimesFromAPI(e){const t=new Date,a=`https://api.aladhan.com/v1/timings/${t.getDate()}-${t.getMonth()+1}-${t.getFullYear()}?latitude=${e.latitude}&longitude=${e.longitude}&method=20`;try{const t=await fetch(a),i=await t.json();if(200===i.code&&i.data){const t={};return y.forEach(e=>{t[e]=i.data.timings[e]}),await this.cachePrayerTimes(e,t),console.log("[PrayerTimesService] Fetched prayer times from API"),t}throw new Error("Invalid API response")}catch(e){throw console.error("[PrayerTimesService] Prayer times fetch error:",e),e}}async cachePrayerTimes(e,t){const a=this.generatePrayerCacheKey(e);if(!a)return;const i={date:(new Date).toISOString(),prayerTimes:t,location:{latitude:e.latitude,longitude:e.longitude,quality:e.quality}},r=this.calculatePrayerTTL();await n.set(a,i,r)}async refreshPrayerTimesInBackground(e=this.location){try{const t=await this.fetchPrayerTimesFromAPI(e);this.prayerTimes=t,this.notifyListeners("prayer-times-updated")}catch(e){console.warn("[PrayerTimesService] Background refresh failed:",e)}}calculateNextPrayer(){if(!this.prayerTimes)return null;const e=new Date,t=60*e.getHours()+e.getMinutes(),a=y.map(e=>{const[t,a]=this.prayerTimes[e].split(":").map(Number);return{name:e,time:this.prayerTimes[e],minutes:60*t+a}});let i=null;for(const e of a)if(e.minutes>t){i=e;break}if(i)this.timeToNextPrayer=i.minutes-t;else{i=a[0];const e=1440-t;this.timeToNextPrayer=e+i.minutes}return this.nextPrayer=i,i}formatTimeToNextPrayer(){if(null===this.timeToNextPrayer)return"";const e=Math.floor(this.timeToNextPrayer/60),t=this.timeToNextPrayer%60;return e>0?`${e}h ${t}m`:`${t}m`}formatDate(){return(new Date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}formatCurrentTime(e=!1){const t={hour:"2-digit",minute:"2-digit",hour12:!0};return e&&(t.second="2-digit"),(new Date).toLocaleTimeString("en-US",t)}formatLocation(){if(!this.location)return"Unknown";return`${this.location.city||"Unknown"}, ${this.location.country||"Unknown"}${this.location.quality===o?" (Fallback)":""}`}getState(){return{location:this.location,prayerTimes:this.prayerTimes,nextPrayer:this.nextPrayer,timeToNextPrayer:this.timeToNextPrayer,formattedTimeToNext:this.formatTimeToNextPrayer(),isLoading:this.isLoading,error:this.error,formattedDate:this.formatDate(),formattedTime:this.formatCurrentTime(),formattedLocation:this.formatLocation()}}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,t){const a=this.getState();this.listeners.forEach(i=>{try{i(a,e,t)}catch(e){console.error("[PrayerTimesService] Listener error:",e)}})}setupEventHandlers(){window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),document.addEventListener("visibilitychange",this.handleVisibilityChange)}handleOnline(){console.log("[PrayerTimesService] Network restored, refreshing..."),this.refreshPrayerTimesInBackground()}handleOffline(){console.log("[PrayerTimesService] Network lost, using cached data")}handleVisibilityChange(){"visible"===document.visibilityState&&(this.calculateNextPrayer(),this.notifyListeners("visibility-change"))}setupUpdateInterval(){this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=setInterval(()=>{this.calculateNextPrayer(),this.notifyListeners("tick")},1e3)}setupDateChangeDetection(){this.lastDate=(new Date).toDateString(),setInterval(()=>{const e=(new Date).toDateString();this.lastDate!==e&&(console.log("[PrayerTimesService] Date changed, invalidating cache"),this.lastDate=e,this.invalidatePrayerTimesCache())},6e4)}async invalidateLocationCache(){await n.invalidateNamespace(a),this.location=null,this.notifyListeners("location-invalidated")}async invalidatePrayerTimesCache(){await n.invalidateNamespace(e),this.prayerTimes=null;try{this.prayerTimes=await this.fetchPrayerTimes(),this.calculateNextPrayer(),this.notifyListeners("prayer-times-updated")}catch(e){console.error("[PrayerTimesService] Failed to refresh prayer times:",e)}}async invalidateAllCaches(){await this.invalidateLocationCache(),await this.invalidatePrayerTimesCache()}async forceRefresh(){this.isLoading=!0,this.notifyListeners("loading");try{this.location=await this.getLocation({forceRefresh:!0}),this.prayerTimes=await this.fetchPrayerTimesFromAPI(this.location),this.calculateNextPrayer(),this.error=null,this.isLoading=!1,this.notifyListeners("refreshed")}catch(e){this.error=e,this.isLoading=!1,this.notifyListeners("error",e)}}destroy(){this.updateInterval&&clearInterval(this.updateInterval),window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.listeners.clear(),this.initialized=!1}};class Marquee{constructor(){this.marqueeElement=null,this.feedConfig=null,this.feedDocuments=[],this.feedType=null,this.entityName=null,this.entityMetadata=null,this.cachedContent=null,this.cachedContentHash=null,this.unsubscribe=null}async init(){if(this.marqueeElement=document.getElementById("prayer-times-marquee"),this.marqueeElement){this.marqueeElement.style.cursor="pointer",this.marqueeElement.addEventListener("click",()=>{this.navigateToFeed()});try{this.getFeedContext(),await this.fetchFeedConfig(),await this.fetchEntityMetadata();!1!==this.feedConfig?.widget?.enabled?(this.showLoadingState(),this.unsubscribe=u.subscribe((e,t)=>{this.handleServiceUpdate(e,t)}),await u.init()):this.updateDisplay()}catch(e){console.error("Error initializing marquee:",e),this.showError()}}else console.error("Marquee element not found")}handleServiceUpdate(e,t){switch(t){case"loading":e.prayerTimes||this.showLoadingState();break;case"initialized":case"refreshed":case"tick":case"location-updated":case"prayer-times-updated":case"visibility-change":default:this.updateDisplay();break;case"error":e.prayerTimes||this.showWarningState(e.error?.message||"Unable to load prayer times")}}showLoadingState(){this.marqueeElement&&(this.marqueeElement.innerHTML='\n      <span class="prayer-loading">\n        <span class="loading-spinner"></span>\n        Fetching your location...\n      </span>\n    ')}showWarningState(e,t=!0){if(!this.marqueeElement)return;const a=t?'<button class="retry-location-btn" title="Retry location fetch">üîÑ</button>':"";if(this.marqueeElement.innerHTML=`\n      <span class="prayer-warning">\n        ‚ö†Ô∏è ${e} ${a}\n      </span>\n    `,t){const e=this.marqueeElement.querySelector(".retry-location-btn");e&&e.addEventListener("click",e=>{e.stopPropagation(),this.retryLocationFetch()})}}async retryLocationFetch(){this.showLoadingState();try{await u.forceRefresh()}catch(e){console.error("Retry failed:",e),this.showWarningState("Location fetch failed. Using fallback location.")}}getFeedContext(){const e=new URLSearchParams(window.location.search),t=e.get("institution"),a=e.get("jurisdiction");t?(this.feedType="institution",this.entityName=t):a?(this.feedType="jurisdiction",this.entityName=a):(this.feedType="global",this.entityName=null)}async fetchFeedConfig(){if("global"!==this.feedType)try{const{getInstitutionFeedConfig:e,getJurisdictionFeedConfig:t,getFeedDocuments:a}=await import("./config-7c8DjUDg.js");if("institution"===this.feedType){this.feedConfig=await e(this.entityName);const t=await a("institution",this.entityName);this.feedDocuments=t}else if("jurisdiction"===this.feedType){this.feedConfig=await t(this.entityName);const e=await a("jurisdiction",this.entityName);this.feedDocuments=e}}catch(e){console.warn("Error fetching feed config:",e),this.feedConfig=null,this.feedDocuments=[]}else this.feedConfig=null}async fetchEntityMetadata(){if(this.entityName)try{const{getInstitutionMetadata:e,getJurisdictionMetadata:t}=await import("./config-7c8DjUDg.js");"institution"===this.feedType?this.entityMetadata=await e(this.entityName):"jurisdiction"===this.feedType&&(this.entityMetadata=await t(this.entityName))}catch(e){console.warn("Error fetching entity metadata:",e),this.entityMetadata=null}else this.entityMetadata=null}updateDisplay(){if(!this.marqueeElement)return;const e=!1!==this.feedConfig?.widget?.enabled;let t="";if(e){const e=u.getState();if(e.error&&!e.prayerTimes)return void this.showWarningState(e.error.message||"Unable to load prayer times");if(e.isLoading&&!e.prayerTimes)return void this.showLoadingState();const a=e.formattedLocation,i=e.formattedTimeToNext,n=e.nextPrayer?.name||"Unknown";t=`<span class="prayer-item"><span class="prayer-label">Prayer Time Widget:</span> <span class="prayer-value">${`<span class="prayer-item"><span class="prayer-label">üìç</span> <span class="prayer-value">${a}</span></span> <span class="prayer-separator">‚Ä¢</span> <span class="prayer-item"><span class="prayer-label">üìÖ</span> <span class="prayer-value">${e.formattedDate}</span></span> <span class="prayer-separator">‚Ä¢</span> <span class="prayer-item"><span class="prayer-label">üïê</span> <span class="prayer-value">${e.formattedTime}</span></span> <span class="prayer-separator">‚Ä¢</span> <span class="prayer-item"><span class="prayer-label">‚è∞</span> <span class="prayer-value">${n} (${i})</span></span>`}</span></span>`}let a="";if(this.feedDocuments&&this.feedDocuments.length>0){a=` <span class="prayer-separator">|</span> ${this.feedDocuments.map(e=>{const t=e.title||"Untitled";let a="";if("institution"===this.feedType){a=`Posted in ${(e.jurisdiction||"").replace(/\s*\[.*?\]\s*/g,"").trim()}`}else if("jurisdiction"===this.feedType){a=`Posted by ${(e.institution||"").replace(/\s*\[.*?\]\s*/g,"").trim()}`}return`<span class="prayer-item"><span class="prayer-label">${a}:</span> <span class="prayer-value">${t}</span></span>`}).join(' <span class="prayer-separator">‚Ä¢</span> ')}`}let i=`${t}${a} <span class="prayer-separator">${a?"|":"‚Ä¢"}</span> `;if(!t&&!a&&this.entityMetadata?.bio){i=`<span class="prayer-item"><span class="prayer-value">${this.entityMetadata.bio}</span></span> <span class="prayer-separator">‚Ä¢</span> `}const n=this.generateContentHash(t,a,this.entityMetadata?.bio);if(this.cachedContentHash!==n){const e=window.innerWidth,t=document.createElement("div");t.style.visibility="hidden",t.style.position="absolute",t.style.whiteSpace="nowrap",t.innerHTML=i,document.body.appendChild(t);const a=t.offsetWidth;if(document.body.removeChild(t),a<2*e){const t=Math.ceil(2*e/a)+1;i=Array(t).fill(i.trim()).join(" ")}this.cachedContent=i,this.cachedContentHash=n}else{if(e&&this.cachedContent){const e=u.getState(),t=/<span class="prayer-value">(\d{1,2}:\d{2}\s[AP]M)<\/span>/,a=this.cachedContent.match(t);a&&(this.cachedContent=this.cachedContent.replace(a[0],`<span class="prayer-value">${e.formattedTime}</span>`))}i=this.cachedContent}this.marqueeElement.innerHTML=i+i,this.setScrollSpeed()}generateContentHash(e,t,a){return`${e?e.replace(/\d{1,2}:\d{2}\s[AP]M/g,"TIME"):""}|${t}|${a||""}`}setScrollSpeed(){const e=this.marqueeElement.scrollWidth/2/30;this.marqueeElement.style.animation=`scroll ${e}s linear infinite`}showError(){this.marqueeElement&&(this.marqueeElement.innerHTML='\n      <span class="prayer-error">Unable to load marquee content. Please check your connection.</span>\n    ')}navigateToFeed(){const e=new URLSearchParams(window.location.search),t=e.get("institution"),a=e.get("jurisdiction");let i="feed.html";t?i=`feed.html?institution=${encodeURIComponent(t)}`:a&&(i=`feed.html?jurisdiction=${encodeURIComponent(a)}`),window.location.href=i}destroy(){this.unsubscribe&&this.unsubscribe()}}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{(new Marquee).init()});else{(new Marquee).init()}export{Marquee};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFycXVlZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vanMvaW5kZXhlZGRiLWNhY2hlLmpzIiwiLi4vLi4vanMvdW5pZmllZC1jYWNoZS5qcyIsIi4uLy4uL2pzL3ByYXllci10aW1lcy1zZXJ2aWNlLmpzIiwiLi4vLi4vanMvbWFycXVlZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogSW5kZXhlZERCIENhY2hlIFV0aWxpdHlcclxuICogUHJvdmlkZXMgYSBwZXJzaXN0ZW50IGNhY2hpbmcgbWVjaGFuaXNtIHVzaW5nIEluZGV4ZWREQlxyXG4gKiBTdWl0YWJsZSBmb3IgbGFyZ2VyIGRhdGFzZXRzIHRoYXQgZG9uJ3QgZml0IGluIGxvY2FsU3RvcmFnZVxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBJbmRleGVkREJDYWNoZSB7XHJcbiAgY29uc3RydWN0b3IoZGJOYW1lID0gJ3VtbWFoLWNhY2hlJywgc3RvcmVOYW1lID0gJ3Jlc3BvbnNlcycsIHZlcnNpb24gPSAxKSB7XHJcbiAgICB0aGlzLmRiTmFtZSA9IGRiTmFtZTtcclxuICAgIHRoaXMuc3RvcmVOYW1lID0gc3RvcmVOYW1lO1xyXG4gICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcclxuICAgIHRoaXMuZGIgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSBJbmRleGVkREIgZGF0YWJhc2VcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxJREJEYXRhYmFzZT59IERhdGFiYXNlIGluc3RhbmNlXHJcbiAgICovXHJcbiAgYXN5bmMgaW5pdCgpIHtcclxuICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy52ZXJzaW9uKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBvcGVuIGRhdGFiYXNlOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgcmVzb2x2ZSh0aGlzLmRiKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgb2JqZWN0IHN0b3JlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGhpcy5zdG9yZU5hbWUpKSB7XHJcbiAgICAgICAgICBjb25zdCBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lLCB7IGtleVBhdGg6ICdrZXknIH0pO1xyXG4gICAgICAgICAgc3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVzdGFtcCcsICd0aW1lc3RhbXAnLCB7IHVuaXF1ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICBzdG9yZS5jcmVhdGVJbmRleCgndHRsJywgJ3R0bCcsIHsgdW5pcXVlOiBmYWxzZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjYWNoZWQgdmFsdWVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XHJcbiAgICogQHJldHVybnMge1Byb21pc2U8Kj59IENhY2hlZCB2YWx1ZSBvciBudWxsIGlmIG5vdCBmb3VuZC9leHBpcmVkXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0KGtleSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFt0aGlzLnN0b3JlTmFtZV0sICdyZWFkb25seScpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5nZXQoa2V5KTtcclxuXHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3QgYWdlID0gRGF0ZS5ub3coKSAtIHJlc3VsdC50aW1lc3RhbXA7XHJcblxyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgY2FjaGUgaXMgc3RpbGwgdmFsaWRcclxuICAgICAgICAgIGlmIChhZ2UgPCByZXN1bHQudHRsKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LnZhbHVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENhY2hlIGV4cGlyZWQsIGRlbGV0ZSBpdFxyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShrZXkpLmNhdGNoKGNvbnNvbGUud2Fybik7XHJcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBmcm9tIGNhY2hlOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW5kZXhlZERCIGdldCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGNhY2hlZCB2YWx1ZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBDYWNoZSBrZXlcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlIC0gVmFsdWUgdG8gY2FjaGVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHRsIC0gVGltZSB0byBsaXZlIGluIG1pbGxpc2Vjb25kc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxyXG4gICAqL1xyXG4gIGFzeW5jIHNldChrZXksIHZhbHVlLCB0dGwgPSA1ICogNjAgKiAxMDAwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oW3RoaXMuc3RvcmVOYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAga2V5LFxyXG4gICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICB0dGxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUucHV0KGRhdGEpO1xyXG5cclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gc2V0IGNhY2hlOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG5cclxuICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHRyYW5zYWN0aW9uLm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBUcmFuc2FjdGlvbiBmYWlsZWQ6ICR7dHJhbnNhY3Rpb24uZXJyb3J9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW5kZXhlZERCIHNldCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY2FjaGVkIHZhbHVlIG9yIGZldGNoIGlmIG5vdCBhdmFpbGFibGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmV0Y2hGbiAtIEFzeW5jIGZ1bmN0aW9uIHRvIGZldGNoIGZyZXNoIGRhdGFcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHRsIC0gVGltZSB0byBsaXZlIGluIG1pbGxpc2Vjb25kc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPCo+fSBDYWNoZWQgb3IgZmV0Y2hlZCB2YWx1ZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldE9yRmV0Y2goa2V5LCBmZXRjaEZuLCB0dGwpIHtcclxuICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IHRoaXMuZ2V0KGtleSk7XHJcbiAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBmZXRjaEZuKCk7XHJcbiAgICBhd2FpdCB0aGlzLnNldChrZXksIHZhbHVlLCB0dGwpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGNhY2hlZCB2YWx1ZSB3aXRoIHN0YWxlLXdoaWxlLXJldmFsaWRhdGUgcGF0dGVyblxyXG4gICAqIFJldHVybnMgY2FjaGVkIGRhdGEgaW1tZWRpYXRlbHkgYW5kIHJlZnJlc2hlcyBpbiBiYWNrZ3JvdW5kXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIENhY2hlIGtleVxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZldGNoRm4gLSBBc3luYyBmdW5jdGlvbiB0byBmZXRjaCBmcmVzaCBkYXRhXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHR0bCAtIFRpbWUgdG8gbGl2ZSBpbiBtaWxsaXNlY29uZHNcclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhbGVUVEwgLSBUaW1lIGJlZm9yZSBjb25zaWRlcmluZyBjYWNoZSBzdGFsZSAoZGVmYXVsdDogODAlIG9mIFRUTClcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTwqPn0gQ2FjaGVkIHZhbHVlXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0T3JGZXRjaFN0YWxlKGtleSwgZmV0Y2hGbiwgdHRsLCBzdGFsZVRUTCA9IHR0bCAqIDAuOCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFt0aGlzLnN0b3JlTmFtZV0sICdyZWFkb25seScpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5nZXQoa2V5KTtcclxuXHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyBObyBjYWNoZSwgZmV0Y2ggZnJlc2ggZGF0YVxyXG4gICAgICAgICAgICBmZXRjaEZuKCkudGhlbih2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB2YWx1ZSwgdHRsKS5jYXRjaChjb25zb2xlLndhcm4pO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3QgYWdlID0gRGF0ZS5ub3coKSAtIHJlc3VsdC50aW1lc3RhbXA7XHJcblxyXG4gICAgICAgICAgLy8gUmV0dXJuIGNhY2hlZCBkYXRhIGltbWVkaWF0ZWx5XHJcbiAgICAgICAgICBpZiAoYWdlIDwgcmVzdWx0LnR0bCkge1xyXG4gICAgICAgICAgICAvLyBSZWZyZXNoIGluIGJhY2tncm91bmQgaWYgY2FjaGUgaXMgc3RhbGVcclxuICAgICAgICAgICAgaWYgKGFnZSA+IHN0YWxlVFRMKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoSW5CYWNrZ3JvdW5kKGtleSwgZmV0Y2hGbiwgdHRsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdC52YWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDYWNoZSBleHBpcmVkLCBkZWxldGUgYW5kIGZldGNoIGZyZXNoIGRhdGFcclxuICAgICAgICAgICAgdGhpcy5kZWxldGUoa2V5KS5jYXRjaChjb25zb2xlLndhcm4pO1xyXG4gICAgICAgICAgICBmZXRjaEZuKCkudGhlbih2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB2YWx1ZSwgdHRsKS5jYXRjaChjb25zb2xlLndhcm4pO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgIC8vIE9uIGVycm9yLCBmZXRjaCBmcmVzaCBkYXRhXHJcbiAgICAgICAgICBmZXRjaEZuKCkudGhlbih2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWUsIHR0bCkuY2F0Y2goY29uc29sZS53YXJuKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdJbmRleGVkREIgZ2V0T3JGZXRjaFN0YWxlIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgLy8gRmFsbGJhY2sgdG8gZmV0Y2hcclxuICAgICAgcmV0dXJuIGZldGNoRm4oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZnJlc2ggY2FjaGUgaW4gYmFja2dyb3VuZCB3aXRob3V0IGJsb2NraW5nXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIENhY2hlIGtleVxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZldGNoRm4gLSBBc3luYyBmdW5jdGlvbiB0byBmZXRjaCBmcmVzaCBkYXRhXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHR0bCAtIFRpbWUgdG8gbGl2ZSBpbiBtaWxsaXNlY29uZHNcclxuICAgKi9cclxuICBhc3luYyByZWZyZXNoSW5CYWNrZ3JvdW5kKGtleSwgZmV0Y2hGbiwgdHRsKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGZldGNoRm4oKTtcclxuICAgICAgYXdhaXQgdGhpcy5zZXQoa2V5LCB2YWx1ZSwgdHRsKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignQmFja2dyb3VuZCByZWZyZXNoIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGUgY2FjaGVkIHZhbHVlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIENhY2hlIGtleVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxyXG4gICAqL1xyXG4gIGFzeW5jIGRlbGV0ZShrZXkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5pbml0KCk7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihbdGhpcy5zdG9yZU5hbWVdLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLnN0b3JlTmFtZSk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLmRlbGV0ZShrZXkpO1xyXG5cclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIGZyb20gY2FjaGU6ICR7cmVxdWVzdC5lcnJvcn1gKSk7XHJcblxyXG4gICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiByZXNvbHZlKCk7XHJcbiAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYFRyYW5zYWN0aW9uIGZhaWxlZDogJHt0cmFuc2FjdGlvbi5lcnJvcn1gKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdJbmRleGVkREIgZGVsZXRlIGVycm9yOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFyIGFsbCBjYWNoZWQgdmFsdWVzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICovXHJcbiAgYXN5bmMgY2xlYXIoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oW3RoaXMuc3RvcmVOYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5jbGVhcigpO1xyXG5cclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gY2xlYXIgY2FjaGU6ICR7cmVxdWVzdC5lcnJvcn1gKSk7XHJcblxyXG4gICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiByZXNvbHZlKCk7XHJcbiAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYFRyYW5zYWN0aW9uIGZhaWxlZDogJHt0cmFuc2FjdGlvbi5lcnJvcn1gKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdJbmRleGVkREIgY2xlYXIgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgZXhwaXJlZCBjYWNoZSBlbnRyaWVzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gTnVtYmVyIG9mIGVudHJpZXMgY2xlYXJlZFxyXG4gICAqL1xyXG4gIGFzeW5jIGNsZWFyRXhwaXJlZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5pbml0KCk7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihbdGhpcy5zdG9yZU5hbWVdLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLnN0b3JlTmFtZSk7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBzdG9yZS5pbmRleCgndGltZXN0YW1wJyk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4Lm9wZW5DdXJzb3IoKTtcclxuXHJcbiAgICAgICAgbGV0IGNsZWFyZWRDb3VudCA9IDA7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcblxyXG4gICAgICAgICAgaWYgKGN1cnNvcikge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gY3Vyc29yLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBkYXRhLnRpbWVzdGFtcDtcclxuXHJcbiAgICAgICAgICAgIGlmIChhZ2UgPj0gZGF0YS50dGwpIHtcclxuICAgICAgICAgICAgICBjdXJzb3IuZGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgY2xlYXJlZENvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShjbGVhcmVkQ291bnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBjbGVhciBleHBpcmVkOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW5kZXhlZERCIGNsZWFyRXhwaXJlZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBjYWNoZSBrZXlzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXk8c3RyaW5nPj59IEFycmF5IG9mIGNhY2hlIGtleXNcclxuICAgKi9cclxuICBhc3luYyBrZXlzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFt0aGlzLnN0b3JlTmFtZV0sICdyZWFkb25seScpO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5nZXRBbGxLZXlzKCk7XHJcblxyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBrZXlzOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW5kZXhlZERCIGtleXMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY2FjaGUgc3RhdGlzdGljc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IENhY2hlIHN0YXRpc3RpY3NcclxuICAgKi9cclxuICBhc3luYyBnZXRTdGF0cygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5pbml0KCk7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihbdGhpcy5zdG9yZU5hbWVdLCAncmVhZG9ubHknKTtcclxuICAgICAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUuZ2V0QWxsKCk7XHJcblxyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZW50cmllcyA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgIGxldCB2YWxpZEVudHJpZXMgPSAwO1xyXG4gICAgICAgICAgbGV0IGV4cGlyZWRFbnRyaWVzID0gMDtcclxuICAgICAgICAgIGxldCB0b3RhbFNpemUgPSAwO1xyXG5cclxuICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBKU09OLnN0cmluZ2lmeShlbnRyeSkubGVuZ3RoO1xyXG4gICAgICAgICAgICB0b3RhbFNpemUgKz0gc2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChub3cgLSBlbnRyeS50aW1lc3RhbXAgPCBlbnRyeS50dGwpIHtcclxuICAgICAgICAgICAgICB2YWxpZEVudHJpZXMrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBleHBpcmVkRW50cmllcysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgdG90YWxFbnRyaWVzOiBlbnRyaWVzLmxlbmd0aCxcclxuICAgICAgICAgICAgdmFsaWRFbnRyaWVzLFxyXG4gICAgICAgICAgICBleHBpcmVkRW50cmllcyxcclxuICAgICAgICAgICAgdG90YWxCeXRlczogdG90YWxTaXplLFxyXG4gICAgICAgICAgICB0b3RhbEtCOiAodG90YWxTaXplIC8gMTAyNCkudG9GaXhlZCgyKSxcclxuICAgICAgICAgICAgYXZnRW50cnlTaXplOiBlbnRyaWVzLmxlbmd0aCA+IDAgPyAodG90YWxTaXplIC8gZW50cmllcy5sZW5ndGgpLnRvRml4ZWQoMikgOiAwXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHN0YXRzOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignSW5kZXhlZERCIGdldFN0YXRzIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0b3RhbEVudHJpZXM6IDAsXHJcbiAgICAgICAgdmFsaWRFbnRyaWVzOiAwLFxyXG4gICAgICAgIGV4cGlyZWRFbnRyaWVzOiAwLFxyXG4gICAgICAgIHRvdGFsQnl0ZXM6IDAsXHJcbiAgICAgICAgdG90YWxLQjogMCxcclxuICAgICAgICBhdmdFbnRyeVNpemU6IDBcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlIGRhdGFiYXNlIGNvbm5lY3Rpb25cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgKi9cclxuICBhc3luYyBjbG9zZSgpIHtcclxuICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgIHRoaXMuZGIuY2xvc2UoKTtcclxuICAgICAgdGhpcy5kYiA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGUgZW50aXJlIGRhdGFiYXNlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlRGF0YWJhc2UoKSB7XHJcbiAgICBhd2FpdCB0aGlzLmNsb3NlKCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHRoaXMuZGJOYW1lKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIGRhdGFiYXNlOiAke3JlcXVlc3QuZXJyb3J9YCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgZGVmYXVsdCBJbmRleGVkREIgY2FjaGUgaW5zdGFuY2VcclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRJREJDYWNoZSA9IG5ldyBJbmRleGVkREJDYWNoZSgpO1xyXG5cclxuLy8gRXhwb3J0IGNhY2hlIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgSURCX0NBQ0hFX1RUTCA9IHtcclxuICBTSE9SVDogNSAqIDYwICogMTAwMCwgICAgICAgICAgIC8vIDUgbWludXRlc1xyXG4gIE1FRElVTTogMTUgKiA2MCAqIDEwMDAsICAgICAgICAgLy8gMTUgbWludXRlc1xyXG4gIExPTkc6IDYwICogNjAgKiAxMDAwLCAgICAgICAgICAgLy8gMSBob3VyXHJcbiAgVkVSWV9MT05HOiAyNCAqIDYwICogNjAgKiAxMDAwICAvLyAyNCBob3Vyc1xyXG59O1xyXG4iLCIvKipcclxuICogVW5pZmllZCBDYWNoZSBNYW5hZ2VyXHJcbiAqIFNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGFsbCBjYWNoaW5nIG9wZXJhdGlvbnNcclxuICogQ29vcmRpbmF0ZXMgYmV0d2VlbiBtZW1vcnksIGxvY2FsU3RvcmFnZSwgYW5kIEluZGV4ZWREQlxyXG4gKiBcclxuICogRW5oYW5jZWQgd2l0aCB0aW1lem9uZS1hd2FyZSBjYWNoZSBrZXkgZ2VuZXJhdGlvbiBhbmQgVFRMIGNhbGN1bGF0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgSW5kZXhlZERCQ2FjaGUgfSBmcm9tICcuL2luZGV4ZWRkYi1jYWNoZS5qcyc7XHJcblxyXG4vLyBDYWNoZSBuYW1lc3BhY2VzIGZvciBvcmdhbml6YXRpb25cclxuZXhwb3J0IGNvbnN0IENBQ0hFX05BTUVTUEFDRVMgPSB7XHJcbiAgUFJBWUVSX1RJTUVTOiAncHJheWVyJyxcclxuICBHRU9DT0RJTkc6ICdnZW9jb2RpbmcnLFxyXG4gIExPQ0FUSU9OOiAnbG9jYXRpb24nLFxyXG4gIENPTkZJRzogJ2NvbmZpZycsXHJcbiAgRkVFRDogJ2ZlZWQnXHJcbn07XHJcblxyXG4vLyBEZWZhdWx0IFRUTCB2YWx1ZXNcclxuZXhwb3J0IGNvbnN0IENBQ0hFX0RFRkFVTFRfVFRMID0ge1xyXG4gIFBSQVlFUl9USU1FUzogMjQgKiA2MCAqIDYwICogMTAwMCwgIC8vIDI0IGhvdXJzICh1bnRpbCBlbmQgb2YgZGF5KVxyXG4gIEdFT0NPRElORzogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsIC8vIDcgZGF5c1xyXG4gIExPQ0FUSU9OOiAzMCAqIDYwICogMTAwMCwgICAgICAgICAgIC8vIDMwIG1pbnV0ZXMgKHJlYXNvbmFibGUgZm9yIHByYXllciB0aW1lcylcclxuICBDT05GSUc6IDUgKiA2MCAqIDEwMDAsICAgICAgICAgICAgICAgLy8gNSBtaW51dGVzXHJcbiAgRkVFRDogMTUgKiA2MCAqIDEwMDAgICAgICAgICAgICAgICAgIC8vIDE1IG1pbnV0ZXNcclxufTtcclxuXHJcbi8vIExvY2F0aW9uIHByZWNpc2lvbiBmb3IgY2FjaGUga2V5cyAoNCBkZWNpbWFscyA9IH4xMW0gYWNjdXJhY3kpXHJcbmV4cG9ydCBjb25zdCBMT0NBVElPTl9QUkVDSVNJT04gPSA0O1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdXNlcidzIHRpbWV6b25lXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IElBTkEgdGltZXpvbmUgc3RyaW5nIChlLmcuLCBcIkFzaWEvSmFrYXJ0YVwiKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJUaW1lem9uZSgpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiAnVVRDJzsgLy8gRmFsbGJhY2sgdG8gVVRDXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBjdXJyZW50IGRhdGUgaW4gdGhlIHVzZXIncyB0aW1lem9uZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGltZXpvbmUgLSBPcHRpb25hbCB0aW1lem9uZSBvdmVycmlkZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBEYXRlIHN0cmluZyBpbiBZWVlZLU1NLUREIGZvcm1hdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2FsRGF0ZSh0aW1lem9uZSA9IG51bGwpIHtcclxuICBjb25zdCB0eiA9IHRpbWV6b25lIHx8IGdldFVzZXJUaW1lem9uZSgpO1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUNBJywgeyB0aW1lWm9uZTogdHogfSk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICAvLyBGYWxsYmFjayBpZiB0aW1lem9uZSBpcyBpbnZhbGlkXHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUNBJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIFRUTCB1bnRpbCBlbmQgb2YgZGF5IGluIHRoZSBzcGVjaWZpZWQgdGltZXpvbmVcclxuICogQHBhcmFtIHtzdHJpbmd9IHRpbWV6b25lIC0gT3B0aW9uYWwgdGltZXpvbmUgb3ZlcnJpZGVcclxuICogQHJldHVybnMge251bWJlcn0gVFRMIGluIG1pbGxpc2Vjb25kc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUVuZE9mRGF5VFRMKHRpbWV6b25lID0gbnVsbCkge1xyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgdHogPSB0aW1lem9uZSB8fCBnZXRVc2VyVGltZXpvbmUoKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gR2V0IGVuZCBvZiBkYXkgaW4gdGhlIHNwZWNpZmllZCB0aW1lem9uZVxyXG4gICAgY29uc3QgbG9jYWxEYXRlID0gbm93LnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tQ0EnLCB7IHRpbWVab25lOiB0eiB9KTtcclxuICAgIGNvbnN0IGVuZE9mRGF5ID0gbmV3IERhdGUoYCR7bG9jYWxEYXRlfVQyMzo1OTo1OS45OTlgKTtcclxuICAgIFxyXG4gICAgLy8gQWRkIDUgbWludXRlIGJ1ZmZlciBmb3IgdGltZXpvbmUgZWRnZSBjYXNlc1xyXG4gICAgY29uc3QgdHRsID0gZW5kT2ZEYXkuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKSArICg1ICogNjAgKiAxMDAwKTtcclxuICAgIFxyXG4gICAgLy8gTWluaW11bSAxIG1pbnV0ZSBUVExcclxuICAgIHJldHVybiBNYXRoLm1heCh0dGwsIDYwICogMTAwMCk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICAvLyBGYWxsYmFjazogMjQgaG91cnNcclxuICAgIHJldHVybiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgVW5pZmllZENhY2hlTWFuYWdlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm1lbW9yeUNhY2hlID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy5pZGJDYWNoZSA9IG5ldyBJbmRleGVkREJDYWNoZSgndW1tYWgtdW5pZmllZC1jYWNoZScsICdjYWNoZScpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pbml0UHJvbWlzZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIHRoZSBjYWNoZSBtYW5hZ2VyXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICovXHJcbiAgYXN5bmMgaW5pdCgpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm47XHJcbiAgICBcclxuICAgIGlmICh0aGlzLmluaXRQcm9taXNlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluaXRQcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdFByb21pc2UgPSB0aGlzLl9kb0luaXQoKTtcclxuICAgIHJldHVybiB0aGlzLmluaXRQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgX2RvSW5pdCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuaWRiQ2FjaGUuaW5pdCgpO1xyXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignVW5pZmllZENhY2hlTWFuYWdlcjogSW5kZXhlZERCIGluaXQgZmFpbGVkLCB1c2luZyBtZW1vcnktb25seSBtb2RlOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7IC8vIENvbnRpbnVlIHdpdGggbWVtb3J5LW9ubHkgbW9kZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgc3RhbmRhcmRpemVkIGNhY2hlIGtleVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lc3BhY2UgLSBDYWNoZSBuYW1lc3BhY2VcclxuICAgKiBAcGFyYW0gey4uLnN0cmluZ30gcGFydHMgLSBLZXkgcGFydHNcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgY2FjaGUga2V5XHJcbiAgICovXHJcbiAgZ2VuZXJhdGVLZXkobmFtZXNwYWNlLCAuLi5wYXJ0cykge1xyXG4gICAgcmV0dXJuIGAke25hbWVzcGFjZX06JHtwYXJ0cy5qb2luKCc6Jyl9YDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGxvY2F0aW9uLWJhc2VkIGNhY2hlIGtleSB3aXRoIGNvbnNpc3RlbnQgcHJlY2lzaW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIENhY2hlIG5hbWVzcGFjZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsYXRpdHVkZSAtIExvY2F0aW9uIGxhdGl0dWRlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxvbmdpdHVkZSAtIExvY2F0aW9uIGxvbmdpdHVkZVxyXG4gICAqIEBwYXJhbSB7Li4uc3RyaW5nfSBleHRyYVBhcnRzIC0gQWRkaXRpb25hbCBrZXkgcGFydHNcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgY2FjaGUga2V5XHJcbiAgICovXHJcbiAgZ2VuZXJhdGVMb2NhdGlvbktleShuYW1lc3BhY2UsIGxhdGl0dWRlLCBsb25naXR1ZGUsIC4uLmV4dHJhUGFydHMpIHtcclxuICAgIGNvbnN0IGxhdFN0ciA9IGxhdGl0dWRlLnRvRml4ZWQoTE9DQVRJT05fUFJFQ0lTSU9OKTtcclxuICAgIGNvbnN0IGxvblN0ciA9IGxvbmdpdHVkZS50b0ZpeGVkKExPQ0FUSU9OX1BSRUNJU0lPTik7XHJcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUtleShuYW1lc3BhY2UsIGxhdFN0ciwgbG9uU3RyLCAuLi5leHRyYVBhcnRzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBmcm9tIGNhY2hlIC0gY2hlY2tzIG1lbW9yeSBmaXJzdCwgdGhlbiBJbmRleGVkREJcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XHJcbiAgICogQHJldHVybnMge1Byb21pc2U8Kj59IENhY2hlZCB2YWx1ZSBvciBudWxsXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0KGtleSkge1xyXG4gICAgLy8gTWVtb3J5IGNhY2hlIChmYXN0ZXN0KVxyXG4gICAgaWYgKHRoaXMubWVtb3J5Q2FjaGUuaGFzKGtleSkpIHtcclxuICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5tZW1vcnlDYWNoZS5nZXQoa2V5KTtcclxuICAgICAgY29uc3QgYWdlID0gRGF0ZS5ub3coKSAtIGNhY2hlZC50aW1lc3RhbXA7XHJcblxyXG4gICAgICBpZiAoYWdlIDwgY2FjaGVkLnR0bCkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZWQudmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEV4cGlyZWQsIHJlbW92ZSBmcm9tIG1lbW9yeVxyXG4gICAgICB0aGlzLm1lbW9yeUNhY2hlLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluZGV4ZWREQiAocGVyc2lzdGVudClcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy5pZGJDYWNoZS5nZXQoa2V5KTtcclxuICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgLy8gUmVzdG9yZSB0byBtZW1vcnkgY2FjaGUgZm9yIGZhc3RlciBzdWJzZXF1ZW50IGFjY2Vzc1xyXG4gICAgICAgIHRoaXMubWVtb3J5Q2FjaGUuc2V0KGtleSwge1xyXG4gICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICB0dGw6IENBQ0hFX0RFRkFVTFRfVFRMLlBSQVlFUl9USU1FUyAvLyBEZWZhdWx0IFRUTCBmb3IgcmVzdG9yZWQgaXRlbXNcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignVW5pZmllZENhY2hlTWFuYWdlcjogSW5kZXhlZERCIGdldCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGNhY2hlIC0gd3JpdGVzIHRvIGJvdGggbWVtb3J5IGFuZCBJbmRleGVkREJcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSAtIFZhbHVlIHRvIGNhY2hlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHR0bCAtIFRpbWUgdG8gbGl2ZSBpbiBtaWxsaXNlY29uZHNcclxuICAgKi9cclxuICBhc3luYyBzZXQoa2V5LCB2YWx1ZSwgdHRsID0gQ0FDSEVfREVGQVVMVF9UVEwuUFJBWUVSX1RJTUVTKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICB2YWx1ZSxcclxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICB0dGxcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0IGluIG1lbW9yeSBjYWNoZSBpbW1lZGlhdGVseVxyXG4gICAgdGhpcy5tZW1vcnlDYWNoZS5zZXQoa2V5LCBkYXRhKTtcclxuXHJcbiAgICAvLyBTZXQgaW4gSW5kZXhlZERCIGZvciBwZXJzaXN0ZW5jZVxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5pZGJDYWNoZS5zZXQoa2V5LCB2YWx1ZSwgdHRsKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignVW5pZmllZENhY2hlTWFuYWdlcjogSW5kZXhlZERCIHNldCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICAvLyBDb250aW51ZSAtIG1lbW9yeSBjYWNoZSBpcyBzdGlsbCB2YWxpZFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVsZXRlIGEgc3BlY2lmaWMgY2FjaGUgZW50cnlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlKGtleSkge1xyXG4gICAgdGhpcy5tZW1vcnlDYWNoZS5kZWxldGUoa2V5KTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuaWRiQ2FjaGUuZGVsZXRlKGtleSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1VuaWZpZWRDYWNoZU1hbmFnZXI6IEluZGV4ZWREQiBkZWxldGUgZmFpbGVkOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEludmFsaWRhdGUgYWxsIGNhY2hlcyBmb3IgYSBuYW1lc3BhY2VcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZXNwYWNlIC0gQ2FjaGUgbmFtZXNwYWNlXHJcbiAgICovXHJcbiAgYXN5bmMgaW52YWxpZGF0ZU5hbWVzcGFjZShuYW1lc3BhY2UpIHtcclxuICAgIGNvbnN0IHByZWZpeCA9IG5hbWVzcGFjZSArICc6JztcclxuXHJcbiAgICAvLyBDbGVhciBtZW1vcnkgY2FjaGVcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMubWVtb3J5Q2FjaGUua2V5cygpKSB7XHJcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSB7XHJcbiAgICAgICAgdGhpcy5tZW1vcnlDYWNoZS5kZWxldGUoa2V5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENsZWFyIEluZGV4ZWREQiBlbnRyaWVzXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBrZXlzID0gYXdhaXQgdGhpcy5pZGJDYWNoZS5rZXlzKCk7XHJcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgocHJlZml4KSkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5pZGJDYWNoZS5kZWxldGUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignVW5pZmllZENhY2hlTWFuYWdlcjogTmFtZXNwYWNlIGludmFsaWRhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgYWxsIGNhY2hlc1xyXG4gICAqL1xyXG4gIGFzeW5jIGNsZWFyKCkge1xyXG4gICAgdGhpcy5tZW1vcnlDYWNoZS5jbGVhcigpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5pZGJDYWNoZS5jbGVhcigpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdVbmlmaWVkQ2FjaGVNYW5hZ2VyOiBDbGVhciBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgZXhwaXJlZCBlbnRyaWVzIGZyb20gYWxsIGNhY2hlc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG51bWJlcj59IE51bWJlciBvZiBlbnRyaWVzIGNsZWFyZWRcclxuICAgKi9cclxuICBhc3luYyBjbGVhckV4cGlyZWQoKSB7XHJcbiAgICBsZXQgY2xlYXJlZCA9IDA7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIC8vIENsZWFyIGV4cGlyZWQgbWVtb3J5IGNhY2hlIGVudHJpZXNcclxuICAgIGZvciAoY29uc3QgW2tleSwgZGF0YV0gb2YgdGhpcy5tZW1vcnlDYWNoZS5lbnRyaWVzKCkpIHtcclxuICAgICAgaWYgKG5vdyAtIGRhdGEudGltZXN0YW1wID49IGRhdGEudHRsKSB7XHJcbiAgICAgICAgdGhpcy5tZW1vcnlDYWNoZS5kZWxldGUoa2V5KTtcclxuICAgICAgICBjbGVhcmVkKys7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhciBleHBpcmVkIEluZGV4ZWREQiBlbnRyaWVzXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBpZGJDbGVhcmVkID0gYXdhaXQgdGhpcy5pZGJDYWNoZS5jbGVhckV4cGlyZWQoKTtcclxuICAgICAgY2xlYXJlZCArPSBpZGJDbGVhcmVkO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdVbmlmaWVkQ2FjaGVNYW5hZ2VyOiBFeHBpcmVkIGNsZWFyIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNsZWFyZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY2FjaGUgc3RhdGlzdGljc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IENhY2hlIHN0YXRpc3RpY3NcclxuICAgKi9cclxuICBhc3luYyBnZXRTdGF0cygpIHtcclxuICAgIGNvbnN0IG1lbW9yeVNpemUgPSB0aGlzLm1lbW9yeUNhY2hlLnNpemU7XHJcbiAgICBsZXQgaWRiU3RhdHMgPSB7IHRvdGFsRW50cmllczogMCwgdmFsaWRFbnRyaWVzOiAwLCBleHBpcmVkRW50cmllczogMCB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlkYlN0YXRzID0gYXdhaXQgdGhpcy5pZGJDYWNoZS5nZXRTdGF0cygpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdVbmlmaWVkQ2FjaGVNYW5hZ2VyOiBTdGF0cyBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lbW9yeUVudHJpZXM6IG1lbW9yeVNpemUsXHJcbiAgICAgIC4uLmlkYlN0YXRzLFxyXG4gICAgICB0b3RhbEVudHJpZXM6IG1lbW9yeVNpemUgKyBpZGJTdGF0cy50b3RhbEVudHJpZXNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY2FjaGVkIHZhbHVlIG9yIGZldGNoIGlmIG5vdCBhdmFpbGFibGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gQ2FjaGUga2V5XHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmV0Y2hGbiAtIEFzeW5jIGZ1bmN0aW9uIHRvIGZldGNoIGZyZXNoIGRhdGFcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHRsIC0gVGltZSB0byBsaXZlIGluIG1pbGxpc2Vjb25kc1xyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPCo+fSBDYWNoZWQgb3IgZmV0Y2hlZCB2YWx1ZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldE9yRmV0Y2goa2V5LCBmZXRjaEZuLCB0dGwpIHtcclxuICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IHRoaXMuZ2V0KGtleSk7XHJcbiAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBmZXRjaEZuKCk7XHJcbiAgICBhd2FpdCB0aGlzLnNldChrZXksIHZhbHVlLCB0dGwpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGNhY2hlZCB2YWx1ZSB3aXRoIHN0YWxlLXdoaWxlLXJldmFsaWRhdGUgcGF0dGVyblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBDYWNoZSBrZXlcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmZXRjaEZuIC0gQXN5bmMgZnVuY3Rpb24gdG8gZmV0Y2ggZnJlc2ggZGF0YVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0dGwgLSBUaW1lIHRvIGxpdmUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YWxlVFRMIC0gVGltZSBiZWZvcmUgY29uc2lkZXJpbmcgY2FjaGUgc3RhbGUgKGRlZmF1bHQ6IDgwJSBvZiBUVEwpXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8e3ZhbHVlOiAqLCBpc1N0YWxlOiBib29sZWFufT59IENhY2hlZCB2YWx1ZSBhbmQgc3RhbGVuZXNzIGZsYWdcclxuICAgKi9cclxuICBhc3luYyBnZXRPckZldGNoU3RhbGUoa2V5LCBmZXRjaEZuLCB0dGwsIHN0YWxlVFRMID0gdHRsICogMC44KSB7XHJcbiAgICAvLyBDaGVjayBtZW1vcnkgY2FjaGUgZmlyc3RcclxuICAgIGlmICh0aGlzLm1lbW9yeUNhY2hlLmhhcyhrZXkpKSB7XHJcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMubWVtb3J5Q2FjaGUuZ2V0KGtleSk7XHJcbiAgICAgIGNvbnN0IGFnZSA9IERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wO1xyXG5cclxuICAgICAgaWYgKGFnZSA8IGNhY2hlZC50dGwpIHtcclxuICAgICAgICBjb25zdCBpc1N0YWxlID0gYWdlID4gc3RhbGVUVEw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVmcmVzaCBpbiBiYWNrZ3JvdW5kIGlmIHN0YWxlXHJcbiAgICAgICAgaWYgKGlzU3RhbGUpIHtcclxuICAgICAgICAgIHRoaXMuX3JlZnJlc2hJbkJhY2tncm91bmQoa2V5LCBmZXRjaEZuLCB0dGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyB2YWx1ZTogY2FjaGVkLnZhbHVlLCBpc1N0YWxlIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBJbmRleGVkREJcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy5pZGJDYWNoZS5nZXQoa2V5KTtcclxuICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgLy8gUmVzdG9yZSB0byBtZW1vcnkgY2FjaGVcclxuICAgICAgICB0aGlzLm1lbW9yeUNhY2hlLnNldChrZXksIHsgdmFsdWUsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwgdHRsIH0pO1xyXG4gICAgICAgIHJldHVybiB7IHZhbHVlLCBpc1N0YWxlOiB0cnVlIH07IC8vIEFzc3VtZSBzdGFsZSBpZiBmcm9tIElEQlxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1VuaWZpZWRDYWNoZU1hbmFnZXI6IElEQiBnZXQgZmFpbGVkOicsIGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBObyBjYWNoZSwgZmV0Y2ggZnJlc2hcclxuICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgZmV0Y2hGbigpO1xyXG4gICAgYXdhaXQgdGhpcy5zZXQoa2V5LCB2YWx1ZSwgdHRsKTtcclxuICAgIHJldHVybiB7IHZhbHVlLCBpc1N0YWxlOiBmYWxzZSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVmcmVzaCBjYWNoZSBpbiBiYWNrZ3JvdW5kXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBhc3luYyBfcmVmcmVzaEluQmFja2dyb3VuZChrZXksIGZldGNoRm4sIHR0bCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBmZXRjaEZuKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0KGtleSwgdmFsdWUsIHR0bCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1VuaWZpZWRDYWNoZU1hbmFnZXI6IEJhY2tncm91bmQgcmVmcmVzaCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gU2luZ2xldG9uIGluc3RhbmNlXHJcbmV4cG9ydCBjb25zdCB1bmlmaWVkQ2FjaGUgPSBuZXcgVW5pZmllZENhY2hlTWFuYWdlcigpO1xyXG5cclxuLy8gQXV0by1pbml0aWFsaXplIG9uIGZpcnN0IGltcG9ydFxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICB1bmlmaWVkQ2FjaGUuaW5pdCgpLmNhdGNoKGNvbnNvbGUud2Fybik7XHJcbn1cclxuIiwiLyoqXHJcbiAqIFByYXllclRpbWVzU2VydmljZSAtIFNpbmdsZSBTb3VyY2Ugb2YgVHJ1dGggZm9yIFByYXllciBUaW1lc1xyXG4gKiBcclxuICogVGhpcyBzZXJ2aWNlIGNvbnNvbGlkYXRlcyBhbGwgcHJheWVyIHRpbWUgbG9naWMgdGhhdCB3YXMgcHJldmlvdXNseVxyXG4gKiBkdXBsaWNhdGVkIGJldHdlZW4gbWFycXVlZS5qcyBhbmQgZmVlZC5qcy4gSXQgcHJvdmlkZXM6XHJcbiAqIFxyXG4gKiAtIFVuaWZpZWQgbG9jYXRpb24gbWFuYWdlbWVudCB3aXRoIHF1YWxpdHkgdHJhY2tpbmdcclxuICogLSBUaW1lem9uZS1hd2FyZSBjYWNoZSBrZXlzIGFuZCBUVEwgY2FsY3VsYXRpb25cclxuICogLSBQcm9wZXIgZmFsbGJhY2sgY2hhaW4gKEdQUyDihpIgQ2FjaGVkIOKGkiBKYWthcnRhKVxyXG4gKiAtIEV2ZW50LWJhc2VkIGNhY2hlIGludmFsaWRhdGlvblxyXG4gKiAtIFN1YnNjcmliZXIgcGF0dGVybiBmb3IgVUkgdXBkYXRlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHVuaWZpZWRDYWNoZSwgQ0FDSEVfTkFNRVNQQUNFUywgQ0FDSEVfREVGQVVMVF9UVEwgfSBmcm9tICcuL3VuaWZpZWQtY2FjaGUuanMnO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBDb25zdGFudHNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIExvY2F0aW9uIHF1YWxpdHkgbGV2ZWxzIC0gdXNlZCBpbiBjYWNoZSBrZXlzIHRvIGRpc3Rpbmd1aXNoIGRhdGEgc291cmNlc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IExPQ0FUSU9OX1FVQUxJVFkgPSB7XHJcbiAgR1BTX0ZSRVNIOiAnZ3BzX2ZyZXNoJywgICAgICAvLyBGcmVzaCBHUFMgY29vcmRpbmF0ZXMgZnJvbSBjdXJyZW50IHNlc3Npb25cclxuICBHUFNfQ0FDSEVEOiAnZ3BzX2NhY2hlZCcsICAgIC8vIENhY2hlZCBHUFMgY29vcmRpbmF0ZXMgZnJvbSBwcmV2aW91cyBzZXNzaW9uXHJcbiAgRkFMTEJBQ0s6ICdmYWxsYmFjaycgICAgICAgICAvLyBKYWthcnRhIGZhbGxiYWNrIChubyBHUFMgYXZhaWxhYmxlKVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdlb2xvY2F0aW9uIG9wdGlvbnMgZm9yIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb25cclxuICovXHJcbmNvbnN0IEdFT0xPQ0FUSU9OX09QVElPTlMgPSB7XHJcbiAgZW5hYmxlSGlnaEFjY3VyYWN5OiBmYWxzZSwgICAvLyBGYXN0ZXIsIGxlc3MgYWNjdXJhdGUgaXMgT0sgZm9yIHByYXllciB0aW1lc1xyXG4gIHRpbWVvdXQ6IDEwMDAwLCAgICAgICAgICAgICAgLy8gMTAgc2Vjb25kcyBtYXhcclxuICBtYXhpbXVtQWdlOiAzMDAwMDAgICAgICAgICAgIC8vIEFsbG93IGJyb3dzZXIgY2FjaGUgdXAgdG8gNSBtaW51dGVzXHJcbn07XHJcblxyXG4vKipcclxuICogQ09SUyBwcm94eSBmYWxsYmFja3MgZm9yIGdlb2NvZGluZyAoTm9taW5hdGltIGRvZXNuJ3QgYWxsb3cgQ09SUylcclxuICovXHJcbmNvbnN0IENPUlNfUFJPWElFUyA9IFtcclxuICAnaHR0cHM6Ly9jb3JzcHJveHkuaW8vPycsXHJcbiAgJ2h0dHBzOi8vYXBpLmFsbG9yaWdpbnMud2luL3Jhdz91cmw9J1xyXG5dO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgZmFsbGJhY2sgbG9jYXRpb24gKEpha2FydGEsIEluZG9uZXNpYSlcclxuICovXHJcbmNvbnN0IERFRkFVTFRfTE9DQVRJT04gPSB7XHJcbiAgbGF0aXR1ZGU6IC02LjIwODgsXHJcbiAgbG9uZ2l0dWRlOiAxMDYuODQ1NixcclxuICBjaXR5OiBcIkpha2FydGFcIixcclxuICBjb3VudHJ5OiBcIkluZG9uZXNpYVwiXHJcbn07XHJcblxyXG4vKipcclxuICogQ2FjaGUgVFRMIGNvbnN0YW50cyAoaW4gbWlsbGlzZWNvbmRzKVxyXG4gKi9cclxuY29uc3QgQ0FDSEVfVFRMID0ge1xyXG4gIExPQ0FUSU9OOiAzMCAqIDYwICogMTAwMCwgICAgICAgICAgIC8vIDMwIG1pbnV0ZXNcclxuICBQUkFZRVJfVElNRVM6IDI0ICogNjAgKiA2MCAqIDEwMDAsICAvLyAyNCBob3VycyAodW50aWwgZW5kIG9mIGRheSlcclxuICBHRU9DT0RJTkc6IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwICAvLyA3IGRheXNcclxufTtcclxuXHJcbi8qKlxyXG4gKiBQcmF5ZXIgbmFtZXMgaW4gb3JkZXJcclxuICovXHJcbmNvbnN0IFBSQVlFUl9OQU1FUyA9IFsnRmFqcicsICdEaHVocicsICdBc3InLCAnTWFnaHJpYicsICdJc2hhJ107XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFByYXllclRpbWVzU2VydmljZSBDbGFzc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jbGFzcyBQcmF5ZXJUaW1lc1NlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgLy8gU3RhdGVcclxuICAgIHRoaXMubG9jYXRpb24gPSBudWxsO1xyXG4gICAgdGhpcy5wcmF5ZXJUaW1lcyA9IG51bGw7XHJcbiAgICB0aGlzLm5leHRQcmF5ZXIgPSBudWxsO1xyXG4gICAgdGhpcy50aW1lVG9OZXh0UHJheWVyID0gbnVsbDtcclxuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmVycm9yID0gbnVsbDtcclxuICAgIHRoaXMubGFzdERhdGUgPSBudWxsO1xyXG4gICAgXHJcbiAgICAvLyBTdWJzY3JpYmVycyBmb3Igc3RhdGUgY2hhbmdlc1xyXG4gICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgU2V0KCk7XHJcbiAgICBcclxuICAgIC8vIEluaXRpYWxpemF0aW9uIHN0YXRlXHJcbiAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmluaXRQcm9taXNlID0gbnVsbDtcclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIGludGVydmFsXHJcbiAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcclxuICAgIFxyXG4gICAgLy8gQmluZCBtZXRob2RzXHJcbiAgICB0aGlzLmhhbmRsZU9ubGluZSA9IHRoaXMuaGFuZGxlT25saW5lLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZU9mZmxpbmUgPSB0aGlzLmhhbmRsZU9mZmxpbmUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBJbml0aWFsaXphdGlvblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgdGhlIHNlcnZpY2VcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEluaXRpYWxpemF0aW9uIG9wdGlvbnNcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCBsb2NhdGlvbiBhbmQgcHJheWVyIHRpbWVzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICovXHJcbiAgYXN5bmMgaW5pdChvcHRpb25zID0ge30pIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm47XHJcbiAgICBcclxuICAgIGlmICh0aGlzLmluaXRQcm9taXNlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluaXRQcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdFByb21pc2UgPSB0aGlzLl9kb0luaXQob3B0aW9ucyk7XHJcbiAgICByZXR1cm4gdGhpcy5pbml0UHJvbWlzZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIF9kb0luaXQob3B0aW9ucykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnbG9hZGluZycpO1xyXG5cclxuICAgICAgLy8gSW5pdGlhbGl6ZSB1bmlmaWVkIGNhY2hlXHJcbiAgICAgIGF3YWl0IHVuaWZpZWRDYWNoZS5pbml0KCk7XHJcblxyXG4gICAgICAvLyBHZXQgbG9jYXRpb24gKHdpdGggY2FjaGUgY2hlY2spXHJcbiAgICAgIHRoaXMubG9jYXRpb24gPSBhd2FpdCB0aGlzLmdldExvY2F0aW9uKHsgXHJcbiAgICAgICAgZm9yY2VSZWZyZXNoOiBvcHRpb25zLmZvcmNlUmVmcmVzaCBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBGZXRjaCBwcmF5ZXIgdGltZXMgKHdpdGggY2FjaGUgY2hlY2spXHJcbiAgICAgIHRoaXMucHJheWVyVGltZXMgPSBhd2FpdCB0aGlzLmZldGNoUHJheWVyVGltZXMoKTtcclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBuZXh0IHByYXllclxyXG4gICAgICB0aGlzLmNhbGN1bGF0ZU5leHRQcmF5ZXIoKTtcclxuXHJcbiAgICAgIC8vIFNldHVwIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgIHRoaXMuc2V0dXBFdmVudEhhbmRsZXJzKCk7XHJcblxyXG4gICAgICAvLyBTZXR1cCB1cGRhdGUgaW50ZXJ2YWwgKGV2ZXJ5IHNlY29uZCBmb3IgY2xvY2spXHJcbiAgICAgIHRoaXMuc2V0dXBVcGRhdGVJbnRlcnZhbCgpO1xyXG5cclxuICAgICAgLy8gU2V0dXAgZGF0ZSBjaGFuZ2UgZGV0ZWN0aW9uXHJcbiAgICAgIHRoaXMuc2V0dXBEYXRlQ2hhbmdlRGV0ZWN0aW9uKCk7XHJcblxyXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdQcmF5ZXJUaW1lc1NlcnZpY2UgaW5pdGlhbGl6YXRpb24gZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnZXJyb3InLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBMb2NhdGlvbiBNYW5hZ2VtZW50XHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHVzZXIncyBsb2NhdGlvbiB3aXRoIHByb3BlciBjYWNoaW5nIGFuZCBmYWxsYmFja1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gT3B0aW9uc1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5mb3JjZVJlZnJlc2ggLSBGb3JjZSBHUFMgcmVmcmVzaFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLm1heEFnZSAtIE1heGltdW0gYWdlIG9mIGNhY2hlZCBsb2NhdGlvbiAobXMpXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gTG9jYXRpb24gb2JqZWN0IHdpdGggcXVhbGl0eVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldExvY2F0aW9uKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgY29uc3QgeyBmb3JjZVJlZnJlc2ggPSBmYWxzZSwgbWF4QWdlID0gQ0FDSEVfVFRMLkxPQ0FUSU9OIH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgY2FjaGVLZXkgPSB1bmlmaWVkQ2FjaGUuZ2VuZXJhdGVLZXkoQ0FDSEVfTkFNRVNQQUNFUy5MT0NBVElPTiwgJ2N1cnJlbnQnKTtcclxuXHJcbiAgICAvLyBDaGVjayBjYWNoZSBmaXJzdCAodW5sZXNzIGZvcmNlIHJlZnJlc2gpXHJcbiAgICBpZiAoIWZvcmNlUmVmcmVzaCkge1xyXG4gICAgICBjb25zdCBjYWNoZWQgPSBhd2FpdCB1bmlmaWVkQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcclxuICAgICAgaWYgKGNhY2hlZCAmJiB0aGlzLmlzTG9jYXRpb25GcmVzaChjYWNoZWQsIG1heEFnZSkpIHtcclxuICAgICAgICAvLyBJZiBjYWNoZWQgbG9jYXRpb24gaXMgbWlzc2luZyBjaXR5L2NvdW50cnksIHRyeSB0byByZXN0b3JlIGZyb20gZ2VvY29kaW5nIGNhY2hlXHJcbiAgICAgICAgaWYgKCghY2FjaGVkLmNpdHkgfHwgY2FjaGVkLmNpdHkgPT09ICdVbmtub3duJykgJiYgY2FjaGVkLmxhdGl0dWRlICYmIGNhY2hlZC5sb25naXR1ZGUpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdlb2NvZGluZ0tleSA9IHVuaWZpZWRDYWNoZS5nZW5lcmF0ZUxvY2F0aW9uS2V5KFxyXG4gICAgICAgICAgICAgIENBQ0hFX05BTUVTUEFDRVMuR0VPQ09ESU5HLFxyXG4gICAgICAgICAgICAgIGNhY2hlZC5sYXRpdHVkZSxcclxuICAgICAgICAgICAgICBjYWNoZWQubG9uZ2l0dWRlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdlb2NvZGVkID0gYXdhaXQgdW5pZmllZENhY2hlLmdldChnZW9jb2RpbmdLZXkpO1xyXG4gICAgICAgICAgICBpZiAoZ2VvY29kZWQpIHtcclxuICAgICAgICAgICAgICBjYWNoZWQuY2l0eSA9IGdlb2NvZGVkLmNpdHk7XHJcbiAgICAgICAgICAgICAgY2FjaGVkLmNvdW50cnkgPSBnZW9jb2RlZC5jb3VudHJ5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZSAtIHdpbGwgc2hvdyBVbmtub3duXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbUHJheWVyVGltZXNTZXJ2aWNlXSBVc2luZyBjYWNoZWQgbG9jYXRpb246JywgY2FjaGVkKTtcclxuICAgICAgICByZXR1cm4geyAuLi5jYWNoZWQsIHF1YWxpdHk6IExPQ0FUSU9OX1FVQUxJVFkuR1BTX0NBQ0hFRCB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVxdWVzdCBHUFMgcG9zaXRpb25cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gYXdhaXQgdGhpcy5yZXF1ZXN0R1BTUG9zaXRpb24oKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xyXG4gICAgICAgIGxhdGl0dWRlOiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXHJcbiAgICAgICAgbG9uZ2l0dWRlOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLFxyXG4gICAgICAgIGFjY3VyYWN5OiBwb3NpdGlvbi5jb29yZHMuYWNjdXJhY3ksXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIHF1YWxpdHk6IExPQ0FUSU9OX1FVQUxJVFkuR1BTX0ZSRVNIXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBGZXRjaCBjaXR5IG5hbWUgQkVGT1JFIGNhY2hpbmcgLSBhd2FpdCBpdCBzbyBjYWNoZSBoYXMgY29tcGxldGUgZGF0YVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hDaXR5TmFtZShsb2NhdGlvbik7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignW1ByYXllclRpbWVzU2VydmljZV0gR2VvY29kaW5nIGZhaWxlZDonLCBlcnIpO1xyXG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGggVW5rbm93biBjaXR5IC0gd2lsbCBzdGlsbCB3b3JrIGZvciBwcmF5ZXIgdGltZXNcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FjaGUgdGhlIGxvY2F0aW9uIFdJVEggY2l0eS9jb3VudHJ5IGRhdGFcclxuICAgICAgYXdhaXQgdW5pZmllZENhY2hlLnNldChjYWNoZUtleSwgbG9jYXRpb24sIENBQ0hFX1RUTC5MT0NBVElPTik7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnW1ByYXllclRpbWVzU2VydmljZV0gR290IGZyZXNoIEdQUyBsb2NhdGlvbjonLCBsb2NhdGlvbik7XHJcbiAgICAgIHJldHVybiBsb2NhdGlvbjtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tQcmF5ZXJUaW1lc1NlcnZpY2VdIEdQUyBmYWlsZWQsIHVzaW5nIGZhbGxiYWNrOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRMb2NhdGlvbkZhbGxiYWNrKGVycm9yLCBjYWNoZUtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXF1ZXN0IEdQUyBwb3NpdGlvbiB2aWEgbmF2aWdhdG9yLmdlb2xvY2F0aW9uXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8R2VvbG9jYXRpb25Qb3NpdGlvbj59XHJcbiAgICovXHJcbiAgcmVxdWVzdEdQU1Bvc2l0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKCdHZW9sb2NhdGlvbiBub3Qgc3VwcG9ydGVkJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihcclxuICAgICAgICByZXNvbHZlLFxyXG4gICAgICAgIHJlamVjdCxcclxuICAgICAgICBHRU9MT0NBVElPTl9PUFRJT05TXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBmYWxsYmFjayBsb2NhdGlvbiB3aGVuIEdQUyBmYWlsc1xyXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIC0gVGhlIEdQUyBlcnJvclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUtleSAtIENhY2hlIGtleSBmb3IgZXhwaXJlZCBjYWNoZSBsb29rdXBcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBGYWxsYmFjayBsb2NhdGlvblxyXG4gICAqL1xyXG4gIGFzeW5jIGdldExvY2F0aW9uRmFsbGJhY2soZXJyb3IsIGNhY2hlS2V5KSB7XHJcbiAgICAvLyBUcnkgZXhwaXJlZCBjYWNoZSBmaXJzdFxyXG4gICAgY29uc3QgZXhwaXJlZENhY2hlID0gYXdhaXQgdGhpcy5nZXRFeHBpcmVkTG9jYXRpb25DYWNoZShjYWNoZUtleSk7XHJcbiAgICBpZiAoZXhwaXJlZENhY2hlICYmIGV4cGlyZWRDYWNoZS5xdWFsaXR5ICE9PSBMT0NBVElPTl9RVUFMSVRZLkZBTExCQUNLKSB7XHJcbiAgICAgIC8vIElmIGV4cGlyZWQgY2FjaGUgaXMgbWlzc2luZyBjaXR5L2NvdW50cnksIHRyeSB0byByZXN0b3JlIGZyb20gZ2VvY29kaW5nIGNhY2hlXHJcbiAgICAgIGlmICghZXhwaXJlZENhY2hlLmNpdHkgfHwgZXhwaXJlZENhY2hlLmNpdHkgPT09ICdVbmtub3duJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBnZW9jb2RpbmdLZXkgPSB1bmlmaWVkQ2FjaGUuZ2VuZXJhdGVMb2NhdGlvbktleShcclxuICAgICAgICAgICAgQ0FDSEVfTkFNRVNQQUNFUy5HRU9DT0RJTkcsXHJcbiAgICAgICAgICAgIGV4cGlyZWRDYWNoZS5sYXRpdHVkZSxcclxuICAgICAgICAgICAgZXhwaXJlZENhY2hlLmxvbmdpdHVkZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGNvbnN0IGdlb2NvZGVkID0gYXdhaXQgdW5pZmllZENhY2hlLmdldChnZW9jb2RpbmdLZXkpO1xyXG4gICAgICAgICAgaWYgKGdlb2NvZGVkKSB7XHJcbiAgICAgICAgICAgIGV4cGlyZWRDYWNoZS5jaXR5ID0gZ2VvY29kZWQuY2l0eTtcclxuICAgICAgICAgICAgZXhwaXJlZENhY2hlLmNvdW50cnkgPSBnZW9jb2RlZC5jb3VudHJ5O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIC8vIElnbm9yZSAtIHdpbGwgc2hvdyBVbmtub3duXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnW1ByYXllclRpbWVzU2VydmljZV0gVXNpbmcgZXhwaXJlZCBjYWNoZSBhcyBmYWxsYmFjazonLCBleHBpcmVkQ2FjaGUpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLmV4cGlyZWRDYWNoZSxcclxuICAgICAgICBxdWFsaXR5OiBMT0NBVElPTl9RVUFMSVRZLkdQU19DQUNIRUQsXHJcbiAgICAgICAgaXNFeHBpcmVkOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNlIEpha2FydGEgZmFsbGJhY2tcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLkRFRkFVTFRfTE9DQVRJT04sXHJcbiAgICAgIHF1YWxpdHk6IExPQ0FUSU9OX1FVQUxJVFkuRkFMTEJBQ0ssXHJcbiAgICAgIGZhbGxiYWNrUmVhc29uOiB0aGlzLmdldEdQU0Vycm9yTWVzc2FnZShlcnJvciksXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBleHBpcmVkIGxvY2F0aW9uIGNhY2hlIChpZ25vcmluZyBUVEwpXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlS2V5IC0gQ2FjaGUga2V5XHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEV4cGlyZWRMb2NhdGlvbkNhY2hlKGNhY2hlS2V5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBBY2Nlc3MgSW5kZXhlZERCIGRpcmVjdGx5IHRvIGdldCBleHBpcmVkIGNhY2hlXHJcbiAgICAgIGlmICghdW5pZmllZENhY2hlLmlkYkNhY2hlIHx8ICF1bmlmaWVkQ2FjaGUuaWRiQ2FjaGUuZGIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGIgPSB1bmlmaWVkQ2FjaGUuaWRiQ2FjaGUuZGI7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFsnY2FjaGUnXSwgJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnY2FjaGUnKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUuZ2V0KGNhY2hlS2V5KTtcclxuXHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0LnZhbHVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVzb2x2ZShudWxsKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGNhY2hlZCBsb2NhdGlvbiBpcyBmcmVzaFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhdGlvbiAtIENhY2hlZCBsb2NhdGlvblxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhBZ2UgLSBNYXhpbXVtIGFnZSBpbiBtc1xyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGlzTG9jYXRpb25GcmVzaChsb2NhdGlvbiwgbWF4QWdlKSB7XHJcbiAgICBpZiAoIWxvY2F0aW9uIHx8ICFsb2NhdGlvbi50aW1lc3RhbXApIHJldHVybiBmYWxzZTtcclxuICAgIHJldHVybiBEYXRlLm5vdygpIC0gbG9jYXRpb24udGltZXN0YW1wIDwgbWF4QWdlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGh1bWFuLXJlYWRhYmxlIEdQUyBlcnJvciBtZXNzYWdlXHJcbiAgICogQHBhcmFtIHtHZW9sb2NhdGlvblBvc2l0aW9uRXJyb3J9IGVycm9yIFxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0R1BTRXJyb3JNZXNzYWdlKGVycm9yKSB7XHJcbiAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcclxuICAgICAgY2FzZSBlcnJvci5QRVJNSVNTSU9OX0RFTklFRDpcclxuICAgICAgICByZXR1cm4gJ1Blcm1pc3Npb24gZGVuaWVkJztcclxuICAgICAgY2FzZSBlcnJvci5QT1NJVElPTl9VTkFWQUlMQUJMRTpcclxuICAgICAgICByZXR1cm4gJ1Bvc2l0aW9uIHVuYXZhaWxhYmxlJztcclxuICAgICAgY2FzZSBlcnJvci5USU1FT1VUOlxyXG4gICAgICAgIHJldHVybiAnUmVxdWVzdCB0aW1lZCBvdXQnO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gR2VvY29kaW5nXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggY2l0eSBuYW1lIHVzaW5nIHJldmVyc2UgZ2VvY29kaW5nXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGxvY2F0aW9uIC0gTG9jYXRpb24gb2JqZWN0IChtb2RpZmllZCBpbiBwbGFjZSlcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgKi9cclxuICBhc3luYyBmZXRjaENpdHlOYW1lKGxvY2F0aW9uKSB7XHJcbiAgICBpZiAoIWxvY2F0aW9uIHx8IGxvY2F0aW9uLnF1YWxpdHkgPT09IExPQ0FUSU9OX1FVQUxJVFkuRkFMTEJBQ0spIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGdlb2NvZGluZyBjYWNoZSBmaXJzdFxyXG4gICAgY29uc3QgZ2VvY29kaW5nS2V5ID0gdW5pZmllZENhY2hlLmdlbmVyYXRlTG9jYXRpb25LZXkoXHJcbiAgICAgIENBQ0hFX05BTUVTUEFDRVMuR0VPQ09ESU5HLFxyXG4gICAgICBsb2NhdGlvbi5sYXRpdHVkZSxcclxuICAgICAgbG9jYXRpb24ubG9uZ2l0dWRlXHJcbiAgICApO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IHVuaWZpZWRDYWNoZS5nZXQoZ2VvY29kaW5nS2V5KTtcclxuICAgICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgIGxvY2F0aW9uLmNpdHkgPSBjYWNoZWQuY2l0eTtcclxuICAgICAgICBsb2NhdGlvbi5jb3VudHJ5ID0gY2FjaGVkLmNvdW50cnk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tQcmF5ZXJUaW1lc1NlcnZpY2VdIEdlb2NvZGluZyBjYWNoZSByZWFkIGVycm9yOicsIGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUcnkgb3VyIG93biBzZXJ2ZXJsZXNzIEFQSSBmaXJzdCAobm8gQ09SUyBpc3N1ZXMpXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgNTAwMCk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGAvYXBpL2dlb2NvZGU/bGF0PSR7bG9jYXRpb24ubGF0aXR1ZGV9Jmxvbj0ke2xvY2F0aW9uLmxvbmdpdHVkZX1gLFxyXG4gICAgICAgIHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9XHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuXHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgbG9jYXRpb24uY2l0eSA9IGRhdGEuY2l0eSB8fCBcIlVua25vd25cIjtcclxuICAgICAgICBsb2NhdGlvbi5jb3VudHJ5ID0gZGF0YS5jb3VudHJ5IHx8IFwiVW5rbm93blwiO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSB0aGUgZ2VvY29kaW5nIHJlc3VsdFxyXG4gICAgICAgIGF3YWl0IHVuaWZpZWRDYWNoZS5zZXQoXHJcbiAgICAgICAgICBnZW9jb2RpbmdLZXksXHJcbiAgICAgICAgICB7IGNpdHk6IGxvY2F0aW9uLmNpdHksIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkgfSxcclxuICAgICAgICAgIENBQ0hFX1RUTC5HRU9DT0RJTkdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgbG9jYXRpb24gY2FjaGUgc28gaXQgcGVyc2lzdHMgd2l0aCBjaXR5L2NvdW50cnlcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uQ2FjaGUobG9jYXRpb24pO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW1ByYXllclRpbWVzU2VydmljZV0gU2VydmVybGVzcyBnZW9jb2RpbmcgZmFpbGVkLCB0cnlpbmcgQ09SUyBwcm94aWVzOicsIGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGYWxsYmFjazogVHJ5IGVhY2ggQ09SUyBwcm94eVxyXG4gICAgY29uc3Qgbm9taW5hdGltVXJsID0gYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3JldmVyc2U/Zm9ybWF0PWpzb24mbGF0PSR7bG9jYXRpb24ubGF0aXR1ZGV9Jmxvbj0ke2xvY2F0aW9uLmxvbmdpdHVkZX1gO1xyXG5cclxuICAgIGZvciAoY29uc3QgcHJveHkgb2YgQ09SU19QUk9YSUVTKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgNTAwMCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICBgJHtwcm94eX0ke2VuY29kZVVSSUNvbXBvbmVudChub21pbmF0aW1VcmwpfWAsXHJcbiAgICAgICAgICB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxvY2F0aW9uLmNpdHkgPVxyXG4gICAgICAgICAgZGF0YS5hZGRyZXNzLmNpdHkgfHxcclxuICAgICAgICAgIGRhdGEuYWRkcmVzcy50b3duIHx8XHJcbiAgICAgICAgICBkYXRhLmFkZHJlc3MudmlsbGFnZSB8fFxyXG4gICAgICAgICAgZGF0YS5hZGRyZXNzLmNvdW50eSB8fFxyXG4gICAgICAgICAgXCJVbmtub3duXCI7XHJcbiAgICAgICAgbG9jYXRpb24uY291bnRyeSA9IGRhdGEuYWRkcmVzcy5jb3VudHJ5IHx8IFwiVW5rbm93blwiO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSB0aGUgZ2VvY29kaW5nIHJlc3VsdFxyXG4gICAgICAgIGF3YWl0IHVuaWZpZWRDYWNoZS5zZXQoXHJcbiAgICAgICAgICBnZW9jb2RpbmdLZXksXHJcbiAgICAgICAgICB7IGNpdHk6IGxvY2F0aW9uLmNpdHksIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkgfSxcclxuICAgICAgICAgIENBQ0hFX1RUTC5HRU9DT0RJTkdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgbG9jYXRpb24gY2FjaGUgc28gaXQgcGVyc2lzdHMgd2l0aCBjaXR5L2NvdW50cnlcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uQ2FjaGUobG9jYXRpb24pO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgW1ByYXllclRpbWVzU2VydmljZV0gR2VvY29kaW5nIHByb3h5ICR7cHJveHl9IGZhaWxlZDpgLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBbGwgbWV0aG9kcyBmYWlsZWRcclxuICAgIGxvY2F0aW9uLmNpdHkgPSBcIlVua25vd25cIjtcclxuICAgIGxvY2F0aW9uLmNvdW50cnkgPSBcIlVua25vd25cIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSB0aGUgbG9jYXRpb24gY2FjaGUgd2l0aCBjdXJyZW50IGxvY2F0aW9uIGRhdGEgKGUuZy4sIGFmdGVyIGdlb2NvZGluZylcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYXRpb24gLSBMb2NhdGlvbiBvYmplY3RcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVMb2NhdGlvbkNhY2hlKGxvY2F0aW9uKSB7XHJcbiAgICBpZiAoIWxvY2F0aW9uKSByZXR1cm47XHJcbiAgICBjb25zdCBjYWNoZUtleSA9IHVuaWZpZWRDYWNoZS5nZW5lcmF0ZUtleShDQUNIRV9OQU1FU1BBQ0VTLkxPQ0FUSU9OLCAnY3VycmVudCcpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdW5pZmllZENhY2hlLnNldChjYWNoZUtleSwgbG9jYXRpb24sIENBQ0hFX1RUTC5MT0NBVElPTik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tQcmF5ZXJUaW1lc1NlcnZpY2VdIEZhaWxlZCB0byB1cGRhdGUgbG9jYXRpb24gY2FjaGU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBQcmF5ZXIgVGltZXNcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSB0aW1lem9uZS1hd2FyZSBjYWNoZSBrZXkgZm9yIHByYXllciB0aW1lc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhdGlvbiAtIExvY2F0aW9uIG9iamVjdFxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IENhY2hlIGtleVxyXG4gICAqL1xyXG4gIGdlbmVyYXRlUHJheWVyQ2FjaGVLZXkobG9jYXRpb24pIHtcclxuICAgIGlmICghbG9jYXRpb24pIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIEdldCBsb2NhbCBkYXRlIGluIHVzZXIncyB0aW1lem9uZVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGxvY2FsRGF0ZSA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUNBJywge1xyXG4gICAgICB0aW1lWm9uZTogSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdW5pZmllZENhY2hlLmdlbmVyYXRlTG9jYXRpb25LZXkoXHJcbiAgICAgIENBQ0hFX05BTUVTUEFDRVMuUFJBWUVSX1RJTUVTLFxyXG4gICAgICBsb2NhdGlvbi5sYXRpdHVkZSxcclxuICAgICAgbG9jYXRpb24ubG9uZ2l0dWRlLFxyXG4gICAgICBsb2NhbERhdGUsXHJcbiAgICAgIGxvY2F0aW9uLnF1YWxpdHlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxjdWxhdGUgVFRMIHVudGlsIGVuZCBvZiBkYXkgaW4gdXNlcidzIHRpbWV6b25lXHJcbiAgICogQHJldHVybnMge251bWJlcn0gVFRMIGluIG1pbGxpc2Vjb25kc1xyXG4gICAqL1xyXG4gIGNhbGN1bGF0ZVByYXllclRUTCgpIHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCB0aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcclxuICAgIFxyXG4gICAgLy8gR2V0IGVuZCBvZiBkYXkgaW4gdXNlcidzIHRpbWV6b25lXHJcbiAgICBjb25zdCBlbmRPZkRheVN0ciA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUNBJywgeyB0aW1lWm9uZTogdGltZXpvbmUgfSkgKyAnVDIzOjU5OjU5JztcclxuICAgIGNvbnN0IGVuZE9mRGF5ID0gbmV3IERhdGUoZW5kT2ZEYXlTdHIpO1xyXG4gICAgXHJcbiAgICAvLyBBZGQgNSBtaW51dGUgYnVmZmVyIGZvciB0aW1lem9uZSBlZGdlIGNhc2VzXHJcbiAgICBjb25zdCB0dGwgPSBlbmRPZkRheS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpICsgKDUgKiA2MCAqIDEwMDApO1xyXG4gICAgXHJcbiAgICAvLyBNaW5pbXVtIDEgbWludXRlIFRUTFxyXG4gICAgcmV0dXJuIE1hdGgubWF4KHR0bCwgNjAgKiAxMDAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHByYXllciB0aW1lcyBmcm9tIEFQSSBvciBjYWNoZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhdGlvbiAtIE9wdGlvbmFsIGxvY2F0aW9uIG92ZXJyaWRlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gUHJheWVyIHRpbWVzIG9iamVjdFxyXG4gICAqL1xyXG4gIGFzeW5jIGZldGNoUHJheWVyVGltZXMobG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uKSB7XHJcbiAgICBpZiAoIWxvY2F0aW9uKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTG9jYXRpb24gbm90IGF2YWlsYWJsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5nZW5lcmF0ZVByYXllckNhY2hlS2V5KGxvY2F0aW9uKTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IHVuaWZpZWRDYWNoZS5nZXQoY2FjaGVLZXkpO1xyXG4gICAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgLy8gVmVyaWZ5IGNhY2hlIGlzIGZyb20gdG9kYXlcclxuICAgICAgICBjb25zdCBjYWNoZURhdGUgPSBuZXcgRGF0ZShjYWNoZWQuZGF0ZSk7XHJcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjYWNoZURhdGUudG9EYXRlU3RyaW5nKCkgPT09IHRvZGF5LnRvRGF0ZVN0cmluZygpKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1ByYXllclRpbWVzU2VydmljZV0gVXNpbmcgY2FjaGVkIHByYXllciB0aW1lcycpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDaGVjayBpZiBzdGFsZSBhbmQgcmVmcmVzaCBpbiBiYWNrZ3JvdW5kXHJcbiAgICAgICAgICBjb25zdCBjYWNoZUFnZSA9IERhdGUubm93KCkgLSBuZXcgRGF0ZShjYWNoZWQuZGF0ZSkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgY29uc3QgU1RBTEVfVEhSRVNIT0xEID0gMjAgKiA2MCAqIDYwICogMTAwMDsgLy8gMjAgaG91cnNcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGNhY2hlQWdlID4gU1RBTEVfVEhSRVNIT0xEKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFByYXllclRpbWVzSW5CYWNrZ3JvdW5kKGxvY2F0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIGNhY2hlZC5wcmF5ZXJUaW1lcztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW1ByYXllclRpbWVzU2VydmljZV0gUHJheWVyIHRpbWVzIGNhY2hlIHJlYWQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGZyb20gQVBJXHJcbiAgICByZXR1cm4gdGhpcy5mZXRjaFByYXllclRpbWVzRnJvbUFQSShsb2NhdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBwcmF5ZXIgdGltZXMgZnJvbSBBbGFkaGFuIEFQSVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhdGlvbiAtIExvY2F0aW9uIG9iamVjdFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IFByYXllciB0aW1lcyBvYmplY3RcclxuICAgKi9cclxuICBhc3luYyBmZXRjaFByYXllclRpbWVzRnJvbUFQSShsb2NhdGlvbikge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgZGF0ZSA9IHRvZGF5LmdldERhdGUoKTtcclxuICAgIGNvbnN0IG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBjb25zdCB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuYWxhZGhhbi5jb20vdjEvdGltaW5ncy8ke2RhdGV9LSR7bW9udGh9LSR7eWVhcn0/bGF0aXR1ZGU9JHtsb2NhdGlvbi5sYXRpdHVkZX0mbG9uZ2l0dWRlPSR7bG9jYXRpb24ubG9uZ2l0dWRlfSZtZXRob2Q9MjBgO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCAmJiBkYXRhLmRhdGEpIHtcclxuICAgICAgICBjb25zdCBwcmF5ZXJUaW1lcyA9IHt9O1xyXG4gICAgICAgIFBSQVlFUl9OQU1FUy5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgcHJheWVyVGltZXNbbmFtZV0gPSBkYXRhLmRhdGEudGltaW5nc1tuYW1lXTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2FjaGUgdGhlIHJlc3VsdFxyXG4gICAgICAgIGF3YWl0IHRoaXMuY2FjaGVQcmF5ZXJUaW1lcyhsb2NhdGlvbiwgcHJheWVyVGltZXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbUHJheWVyVGltZXNTZXJ2aWNlXSBGZXRjaGVkIHByYXllciB0aW1lcyBmcm9tIEFQSScpO1xyXG4gICAgICAgIHJldHVybiBwcmF5ZXJUaW1lcztcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEFQSSByZXNwb25zZScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1ByYXllclRpbWVzU2VydmljZV0gUHJheWVyIHRpbWVzIGZldGNoIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWNoZSBwcmF5ZXIgdGltZXNcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYXRpb24gLSBMb2NhdGlvbiBvYmplY3RcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJheWVyVGltZXMgLSBQcmF5ZXIgdGltZXMgb2JqZWN0XHJcbiAgICovXHJcbiAgYXN5bmMgY2FjaGVQcmF5ZXJUaW1lcyhsb2NhdGlvbiwgcHJheWVyVGltZXMpIHtcclxuICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5nZW5lcmF0ZVByYXllckNhY2hlS2V5KGxvY2F0aW9uKTtcclxuICAgIGlmICghY2FjaGVLZXkpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHByYXllclRpbWVzOiBwcmF5ZXJUaW1lcyxcclxuICAgICAgbG9jYXRpb246IHtcclxuICAgICAgICBsYXRpdHVkZTogbG9jYXRpb24ubGF0aXR1ZGUsXHJcbiAgICAgICAgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sb25naXR1ZGUsXHJcbiAgICAgICAgcXVhbGl0eTogbG9jYXRpb24ucXVhbGl0eVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHR0bCA9IHRoaXMuY2FsY3VsYXRlUHJheWVyVFRMKCk7XHJcbiAgICBhd2FpdCB1bmlmaWVkQ2FjaGUuc2V0KGNhY2hlS2V5LCBkYXRhLCB0dGwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVmcmVzaCBwcmF5ZXIgdGltZXMgaW4gYmFja2dyb3VuZFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsb2NhdGlvbiAtIExvY2F0aW9uIG9iamVjdFxyXG4gICAqL1xyXG4gIGFzeW5jIHJlZnJlc2hQcmF5ZXJUaW1lc0luQmFja2dyb3VuZChsb2NhdGlvbiA9IHRoaXMubG9jYXRpb24pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHByYXllclRpbWVzID0gYXdhaXQgdGhpcy5mZXRjaFByYXllclRpbWVzRnJvbUFQSShsb2NhdGlvbik7XHJcbiAgICAgIHRoaXMucHJheWVyVGltZXMgPSBwcmF5ZXJUaW1lcztcclxuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ3ByYXllci10aW1lcy11cGRhdGVkJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tQcmF5ZXJUaW1lc1NlcnZpY2VdIEJhY2tncm91bmQgcmVmcmVzaCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBOZXh0IFByYXllciBDYWxjdWxhdGlvblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGN1bGF0ZSB0aGUgbmV4dCBwcmF5ZXIgYW5kIHRpbWUgcmVtYWluaW5nXHJcbiAgICogQHJldHVybnMge09iamVjdH0gTmV4dCBwcmF5ZXIgaW5mb1xyXG4gICAqL1xyXG4gIGNhbGN1bGF0ZU5leHRQcmF5ZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMucHJheWVyVGltZXMpIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBjdXJyZW50TWludXRlcyA9IG5vdy5nZXRIb3VycygpICogNjAgKyBub3cuZ2V0TWludXRlcygpO1xyXG5cclxuICAgIC8vIENvbnZlcnQgcHJheWVyIHRpbWVzIHRvIG1pbnV0ZXNcclxuICAgIGNvbnN0IHByYXllck1pbnV0ZXMgPSBQUkFZRVJfTkFNRVMubWFwKG5hbWUgPT4ge1xyXG4gICAgICBjb25zdCBbaG91cnMsIG1pbnV0ZXNdID0gdGhpcy5wcmF5ZXJUaW1lc1tuYW1lXS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgdGltZTogdGhpcy5wcmF5ZXJUaW1lc1tuYW1lXSxcclxuICAgICAgICBtaW51dGVzOiBob3VycyAqIDYwICsgbWludXRlc1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRmluZCBuZXh0IHByYXllclxyXG4gICAgbGV0IG5leHRQcmF5ZXIgPSBudWxsO1xyXG4gICAgZm9yIChjb25zdCBwcmF5ZXIgb2YgcHJheWVyTWludXRlcykge1xyXG4gICAgICBpZiAocHJheWVyLm1pbnV0ZXMgPiBjdXJyZW50TWludXRlcykge1xyXG4gICAgICAgIG5leHRQcmF5ZXIgPSBwcmF5ZXI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBubyBuZXh0IHByYXllciBmb3VuZCB0b2RheSwgdXNlIEZhanIgdG9tb3Jyb3dcclxuICAgIGlmICghbmV4dFByYXllcikge1xyXG4gICAgICBuZXh0UHJheWVyID0gcHJheWVyTWludXRlc1swXTtcclxuICAgICAgY29uc3QgbWludXRlc1VudGlsTWlkbmlnaHQgPSAyNCAqIDYwIC0gY3VycmVudE1pbnV0ZXM7XHJcbiAgICAgIHRoaXMudGltZVRvTmV4dFByYXllciA9IG1pbnV0ZXNVbnRpbE1pZG5pZ2h0ICsgbmV4dFByYXllci5taW51dGVzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50aW1lVG9OZXh0UHJheWVyID0gbmV4dFByYXllci5taW51dGVzIC0gY3VycmVudE1pbnV0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5uZXh0UHJheWVyID0gbmV4dFByYXllcjtcclxuICAgIHJldHVybiBuZXh0UHJheWVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0IHRpbWUgdG8gbmV4dCBwcmF5ZXJcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgdGltZSBzdHJpbmdcclxuICAgKi9cclxuICBmb3JtYXRUaW1lVG9OZXh0UHJheWVyKCkge1xyXG4gICAgaWYgKHRoaXMudGltZVRvTmV4dFByYXllciA9PT0gbnVsbCkgcmV0dXJuIFwiXCI7XHJcblxyXG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHRoaXMudGltZVRvTmV4dFByYXllciAvIDYwKTtcclxuICAgIGNvbnN0IG1pbnV0ZXMgPSB0aGlzLnRpbWVUb05leHRQcmF5ZXIgJSA2MDtcclxuXHJcbiAgICBpZiAoaG91cnMgPiAwKSB7XHJcbiAgICAgIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlc31tYDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHttaW51dGVzfW1gO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBGb3JtYXR0aW5nIFV0aWxpdGllc1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdCBjdXJyZW50IGRhdGVcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgZGF0ZSBzdHJpbmdcclxuICAgKi9cclxuICBmb3JtYXREYXRlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwge1xyXG4gICAgICB3ZWVrZGF5OiBcInNob3J0XCIsXHJcbiAgICAgIG1vbnRoOiBcInNob3J0XCIsXHJcbiAgICAgIGRheTogXCJudW1lcmljXCIsXHJcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXQgY3VycmVudCB0aW1lXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlU2Vjb25kcyAtIEluY2x1ZGUgc2Vjb25kcyBpbiBvdXRwdXRcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgdGltZSBzdHJpbmdcclxuICAgKi9cclxuICBmb3JtYXRDdXJyZW50VGltZShpbmNsdWRlU2Vjb25kcyA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcclxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcclxuICAgICAgaG91cjEyOiB0cnVlLFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgaWYgKGluY2x1ZGVTZWNvbmRzKSB7XHJcbiAgICAgIG9wdGlvbnMuc2Vjb25kID0gXCIyLWRpZ2l0XCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhcImVuLVVTXCIsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0IGxvY2F0aW9uIGZvciBkaXNwbGF5XHJcbiAgICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIGxvY2F0aW9uIHN0cmluZ1xyXG4gICAqL1xyXG4gIGZvcm1hdExvY2F0aW9uKCkge1xyXG4gICAgaWYgKCF0aGlzLmxvY2F0aW9uKSByZXR1cm4gXCJVbmtub3duXCI7XHJcbiAgICBcclxuICAgIGNvbnN0IGNpdHkgPSB0aGlzLmxvY2F0aW9uLmNpdHkgfHwgXCJVbmtub3duXCI7XHJcbiAgICBjb25zdCBjb3VudHJ5ID0gdGhpcy5sb2NhdGlvbi5jb3VudHJ5IHx8IFwiVW5rbm93blwiO1xyXG4gICAgY29uc3QgZmFsbGJhY2tJbmRpY2F0b3IgPSB0aGlzLmxvY2F0aW9uLnF1YWxpdHkgPT09IExPQ0FUSU9OX1FVQUxJVFkuRkFMTEJBQ0sgPyAnIChGYWxsYmFjayknIDogJyc7XHJcbiAgICBcclxuICAgIHJldHVybiBgJHtjaXR5fSwgJHtjb3VudHJ5fSR7ZmFsbGJhY2tJbmRpY2F0b3J9YDtcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gU3RhdGUgTWFuYWdlbWVudFxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjdXJyZW50IHN0YXRlXHJcbiAgICogQHJldHVybnMge09iamVjdH0gQ3VycmVudCBzdGF0ZVxyXG4gICAqL1xyXG4gIGdldFN0YXRlKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbG9jYXRpb246IHRoaXMubG9jYXRpb24sXHJcbiAgICAgIHByYXllclRpbWVzOiB0aGlzLnByYXllclRpbWVzLFxyXG4gICAgICBuZXh0UHJheWVyOiB0aGlzLm5leHRQcmF5ZXIsXHJcbiAgICAgIHRpbWVUb05leHRQcmF5ZXI6IHRoaXMudGltZVRvTmV4dFByYXllcixcclxuICAgICAgZm9ybWF0dGVkVGltZVRvTmV4dDogdGhpcy5mb3JtYXRUaW1lVG9OZXh0UHJheWVyKCksXHJcbiAgICAgIGlzTG9hZGluZzogdGhpcy5pc0xvYWRpbmcsXHJcbiAgICAgIGVycm9yOiB0aGlzLmVycm9yLFxyXG4gICAgICBmb3JtYXR0ZWREYXRlOiB0aGlzLmZvcm1hdERhdGUoKSxcclxuICAgICAgZm9ybWF0dGVkVGltZTogdGhpcy5mb3JtYXRDdXJyZW50VGltZSgpLFxyXG4gICAgICBmb3JtYXR0ZWRMb2NhdGlvbjogdGhpcy5mb3JtYXRMb2NhdGlvbigpXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3Vic2NyaWJlIHRvIHN0YXRlIGNoYW5nZXNcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIENhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAqL1xyXG4gIHN1YnNjcmliZShsaXN0ZW5lcikge1xyXG4gICAgdGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcclxuICAgIHJldHVybiAoKSA9PiB0aGlzLmxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTm90aWZ5IGFsbCBsaXN0ZW5lcnMgb2Ygc3RhdGUgY2hhbmdlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdHlwZVxyXG4gICAqIEBwYXJhbSB7Kn0gZGF0YSAtIEV2ZW50IGRhdGFcclxuICAgKi9cclxuICBub3RpZnlMaXN0ZW5lcnMoZXZlbnQsIGRhdGEpIHtcclxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xyXG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGlzdGVuZXIoc3RhdGUsIGV2ZW50LCBkYXRhKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdbUHJheWVyVGltZXNTZXJ2aWNlXSBMaXN0ZW5lciBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBFdmVudCBIYW5kbGVyc1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHVwIGV2ZW50IGhhbmRsZXJzIGZvciBuZXR3b3JrIGFuZCB2aXNpYmlsaXR5XHJcbiAgICovXHJcbiAgc2V0dXBFdmVudEhhbmRsZXJzKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsIHRoaXMuaGFuZGxlT25saW5lKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgdGhpcy5oYW5kbGVPZmZsaW5lKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIG9ubGluZSBldmVudFxyXG4gICAqL1xyXG4gIGhhbmRsZU9ubGluZSgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdbUHJheWVyVGltZXNTZXJ2aWNlXSBOZXR3b3JrIHJlc3RvcmVkLCByZWZyZXNoaW5nLi4uJyk7XHJcbiAgICB0aGlzLnJlZnJlc2hQcmF5ZXJUaW1lc0luQmFja2dyb3VuZCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIG9mZmxpbmUgZXZlbnRcclxuICAgKi9cclxuICBoYW5kbGVPZmZsaW5lKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1tQcmF5ZXJUaW1lc1NlcnZpY2VdIE5ldHdvcmsgbG9zdCwgdXNpbmcgY2FjaGVkIGRhdGEnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSB2aXNpYmlsaXR5IGNoYW5nZVxyXG4gICAqL1xyXG4gIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcclxuICAgICAgLy8gUmVjYWxjdWxhdGUgbmV4dCBwcmF5ZXIgd2hlbiBwYWdlIGJlY29tZXMgdmlzaWJsZVxyXG4gICAgICB0aGlzLmNhbGN1bGF0ZU5leHRQcmF5ZXIoKTtcclxuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ3Zpc2liaWxpdHktY2hhbmdlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFVwZGF0ZSBJbnRlcnZhbFxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHVwIHVwZGF0ZSBpbnRlcnZhbCBmb3IgY2xvY2sgYW5kIG5leHQgcHJheWVyXHJcbiAgICovXHJcbiAgc2V0dXBVcGRhdGVJbnRlcnZhbCgpIHtcclxuICAgIC8vIENsZWFyIGV4aXN0aW5nIGludGVydmFsXHJcbiAgICBpZiAodGhpcy51cGRhdGVJbnRlcnZhbCkge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMudXBkYXRlSW50ZXJ2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBldmVyeSBzZWNvbmRcclxuICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlTmV4dFByYXllcigpO1xyXG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygndGljaycpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIERhdGUgQ2hhbmdlIERldGVjdGlvblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHVwIGRhdGUgY2hhbmdlIGRldGVjdGlvbiBmb3IgY2FjaGUgaW52YWxpZGF0aW9uXHJcbiAgICovXHJcbiAgc2V0dXBEYXRlQ2hhbmdlRGV0ZWN0aW9uKCkge1xyXG4gICAgdGhpcy5sYXN0RGF0ZSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICBpZiAodGhpcy5sYXN0RGF0ZSAhPT0gY3VycmVudERhdGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW1ByYXllclRpbWVzU2VydmljZV0gRGF0ZSBjaGFuZ2VkLCBpbnZhbGlkYXRpbmcgY2FjaGUnKTtcclxuICAgICAgICB0aGlzLmxhc3REYXRlID0gY3VycmVudERhdGU7XHJcbiAgICAgICAgdGhpcy5pbnZhbGlkYXRlUHJheWVyVGltZXNDYWNoZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LCA2MCAqIDEwMDApOyAvLyBDaGVjayBldmVyeSBtaW51dGVcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gQ2FjaGUgSW52YWxpZGF0aW9uXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICogSW52YWxpZGF0ZSBsb2NhdGlvbiBjYWNoZVxyXG4gICAqL1xyXG4gIGFzeW5jIGludmFsaWRhdGVMb2NhdGlvbkNhY2hlKCkge1xyXG4gICAgYXdhaXQgdW5pZmllZENhY2hlLmludmFsaWRhdGVOYW1lc3BhY2UoQ0FDSEVfTkFNRVNQQUNFUy5MT0NBVElPTik7XHJcbiAgICB0aGlzLmxvY2F0aW9uID0gbnVsbDtcclxuICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdsb2NhdGlvbi1pbnZhbGlkYXRlZCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW52YWxpZGF0ZSBwcmF5ZXIgdGltZXMgY2FjaGVcclxuICAgKi9cclxuICBhc3luYyBpbnZhbGlkYXRlUHJheWVyVGltZXNDYWNoZSgpIHtcclxuICAgIGF3YWl0IHVuaWZpZWRDYWNoZS5pbnZhbGlkYXRlTmFtZXNwYWNlKENBQ0hFX05BTUVTUEFDRVMuUFJBWUVSX1RJTUVTKTtcclxuICAgIHRoaXMucHJheWVyVGltZXMgPSBudWxsO1xyXG4gICAgXHJcbiAgICAvLyBSZS1mZXRjaCBwcmF5ZXIgdGltZXNcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMucHJheWVyVGltZXMgPSBhd2FpdCB0aGlzLmZldGNoUHJheWVyVGltZXMoKTtcclxuICAgICAgdGhpcy5jYWxjdWxhdGVOZXh0UHJheWVyKCk7XHJcbiAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdwcmF5ZXItdGltZXMtdXBkYXRlZCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1ByYXllclRpbWVzU2VydmljZV0gRmFpbGVkIHRvIHJlZnJlc2ggcHJheWVyIHRpbWVzOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEludmFsaWRhdGUgYWxsIGNhY2hlc1xyXG4gICAqL1xyXG4gIGFzeW5jIGludmFsaWRhdGVBbGxDYWNoZXMoKSB7XHJcbiAgICBhd2FpdCB0aGlzLmludmFsaWRhdGVMb2NhdGlvbkNhY2hlKCk7XHJcbiAgICBhd2FpdCB0aGlzLmludmFsaWRhdGVQcmF5ZXJUaW1lc0NhY2hlKCk7XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIEZvcmNlIFJlZnJlc2hcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBGb3JjZSByZWZyZXNoIGxvY2F0aW9uIGFuZCBwcmF5ZXIgdGltZXNcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgKi9cclxuICBhc3luYyBmb3JjZVJlZnJlc2goKSB7XHJcbiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnbG9hZGluZycpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEdldCBmcmVzaCBsb2NhdGlvbiAoZ2VvY29kaW5nIGlzIG5vdyBhd2FpdGVkIGluc2lkZSBnZXRMb2NhdGlvbilcclxuICAgICAgdGhpcy5sb2NhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0TG9jYXRpb24oeyBmb3JjZVJlZnJlc2g6IHRydWUgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgZnJlc2ggcHJheWVyIHRpbWVzXHJcbiAgICAgIHRoaXMucHJheWVyVGltZXMgPSBhd2FpdCB0aGlzLmZldGNoUHJheWVyVGltZXNGcm9tQVBJKHRoaXMubG9jYXRpb24pO1xyXG4gICAgICBcclxuICAgICAgLy8gUmVjYWxjdWxhdGVcclxuICAgICAgdGhpcy5jYWxjdWxhdGVOZXh0UHJheWVyKCk7XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcclxuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ3JlZnJlc2hlZCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnZXJyb3InLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIENsZWFudXBcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiBEZXN0cm95IHRoZSBzZXJ2aWNlIGFuZCBjbGVhbnVwXHJcbiAgICovXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLnVwZGF0ZUludGVydmFsKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvbmxpbmUnLCB0aGlzLmhhbmRsZU9ubGluZSk7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIHRoaXMuaGFuZGxlT2ZmbGluZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy5oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcclxuICAgIFxyXG4gICAgdGhpcy5saXN0ZW5lcnMuY2xlYXIoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU2luZ2xldG9uIEluc3RhbmNlXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmF5ZXJUaW1lc1NlcnZpY2UgPSBuZXcgUHJheWVyVGltZXNTZXJ2aWNlKCk7XHJcblxyXG4vLyBOT1RFOiBBdXRvLWluaXQgcmVtb3ZlZCB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9ucy5cclxuLy8gQ29uc3VtZXJzIChtYXJxdWVlLmpzLCBmZWVkLmpzKSBjYWxsIHByYXllclRpbWVzU2VydmljZS5pbml0KClcclxuLy8gYWZ0ZXIgc3Vic2NyaWJpbmcsIGVuc3VyaW5nIHRoZXkgcmVjZWl2ZSBhbGwgc3RhdGUgdXBkYXRlcy5cclxuIiwiLyoqXHJcbiAqIE1hcnF1ZWUgTW9kdWxlXHJcbiAqIERpc3BsYXlzIHByYXllciB0aW1lcyB3aWRnZXQgYW5kIGNhcm91c2VsIGNhcHRpb25zIGluIGEgc2Nyb2xsaW5nIG1hcnF1ZWVcclxuICogXHJcbiAqIFJFRkFDVE9SRUQ6IE5vdyB1c2VzIFByYXllclRpbWVzU2VydmljZSBhcyBzaW5nbGUgc291cmNlIG9mIHRydXRoXHJcbiAqIEFsbCBsb2NhdGlvbiwgZ2VvY29kaW5nLCBhbmQgcHJheWVyIHRpbWVzIGxvZ2ljIGhhcyBiZWVuIG1vdmVkIHRvIHRoZSBzZXJ2aWNlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcHJheWVyVGltZXNTZXJ2aWNlLCBMT0NBVElPTl9RVUFMSVRZIH0gZnJvbSAnLi9wcmF5ZXItdGltZXMtc2VydmljZS5qcyc7XHJcblxyXG5jbGFzcyBNYXJxdWVlIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubWFycXVlZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5mZWVkQ29uZmlnID0gbnVsbDtcclxuICAgIHRoaXMuZmVlZERvY3VtZW50cyA9IFtdO1xyXG4gICAgdGhpcy5mZWVkVHlwZSA9IG51bGw7XHJcbiAgICB0aGlzLmVudGl0eU5hbWUgPSBudWxsO1xyXG4gICAgdGhpcy5lbnRpdHlNZXRhZGF0YSA9IG51bGw7XHJcbiAgICB0aGlzLmNhY2hlZENvbnRlbnQgPSBudWxsO1xyXG4gICAgdGhpcy5jYWNoZWRDb250ZW50SGFzaCA9IG51bGw7XHJcbiAgICB0aGlzLnVuc3Vic2NyaWJlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgdGhlIG1hcnF1ZWUgbW9kdWxlXHJcbiAgICovXHJcbiAgYXN5bmMgaW5pdCgpIHtcclxuICAgIHRoaXMubWFycXVlZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByYXllci10aW1lcy1tYXJxdWVlXCIpO1xyXG4gICAgaWYgKCF0aGlzLm1hcnF1ZWVFbGVtZW50KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJNYXJxdWVlIGVsZW1lbnQgbm90IGZvdW5kXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIGNsaWNrIGhhbmRsZXIgZm9yIG5hdmlnYXRpb24gdG8gZmVlZCBwYWdlXHJcbiAgICB0aGlzLm1hcnF1ZWVFbGVtZW50LnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgdGhpcy5tYXJxdWVlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLm5hdmlnYXRlVG9GZWVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgZmVlZCB0eXBlIGFuZCBlbnRpdHkgbmFtZSBmcm9tIFVSTFxyXG4gICAgICB0aGlzLmdldEZlZWRDb250ZXh0KCk7XHJcblxyXG4gICAgICAvLyBGZXRjaCBmZWVkIGNvbmZpZ3VyYXRpb25cclxuICAgICAgYXdhaXQgdGhpcy5mZXRjaEZlZWRDb25maWcoKTtcclxuXHJcbiAgICAgIC8vIEZldGNoIGVudGl0eSBtZXRhZGF0YSAoZm9yIGJpbyBmYWxsYmFjaylcclxuICAgICAgYXdhaXQgdGhpcy5mZXRjaEVudGl0eU1ldGFkYXRhKCk7XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB3aWRnZXQgaXMgZW5hYmxlZFxyXG4gICAgICBjb25zdCB3aWRnZXRFbmFibGVkID0gdGhpcy5mZWVkQ29uZmlnPy53aWRnZXQ/LmVuYWJsZWQgIT09IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHdpZGdldEVuYWJsZWQpIHtcclxuICAgICAgICAvLyBTaG93IGxvYWRpbmcgc3RhdGVcclxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nU3RhdGUoKTtcclxuXHJcbiAgICAgICAgLy8gU3Vic2NyaWJlIHRvIHByYXllciB0aW1lcyBzZXJ2aWNlIHVwZGF0ZXNcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlID0gcHJheWVyVGltZXNTZXJ2aWNlLnN1YnNjcmliZSgoc3RhdGUsIGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZVNlcnZpY2VVcGRhdGUoc3RhdGUsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgc2VydmljZSAoaWYgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWQpXHJcbiAgICAgICAgYXdhaXQgcHJheWVyVGltZXNTZXJ2aWNlLmluaXQoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBXaWRnZXQgZGlzYWJsZWQsIGp1c3Qgc2hvdyBjYXJvdXNlbC9iaW9cclxuICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgbWFycXVlZTpcIiwgZXJyb3IpO1xyXG4gICAgICB0aGlzLnNob3dFcnJvcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIHVwZGF0ZXMgZnJvbSBQcmF5ZXJUaW1lc1NlcnZpY2VcclxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgLSBTZXJ2aWNlIHN0YXRlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdHlwZVxyXG4gICAqL1xyXG4gIGhhbmRsZVNlcnZpY2VVcGRhdGUoc3RhdGUsIGV2ZW50KSB7XHJcbiAgICBzd2l0Y2ggKGV2ZW50KSB7XHJcbiAgICAgIGNhc2UgJ2xvYWRpbmcnOlxyXG4gICAgICAgIC8vIE9ubHkgc2hvdyBsb2FkaW5nIGlmIHdlIGRvbid0IGhhdmUgZGF0YSB5ZXRcclxuICAgICAgICBpZiAoIXN0YXRlLnByYXllclRpbWVzKSB7XHJcbiAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nU3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2luaXRpYWxpemVkJzpcclxuICAgICAgY2FzZSAncmVmcmVzaGVkJzpcclxuICAgICAgY2FzZSAndGljayc6XHJcbiAgICAgIGNhc2UgJ2xvY2F0aW9uLXVwZGF0ZWQnOlxyXG4gICAgICBjYXNlICdwcmF5ZXItdGltZXMtdXBkYXRlZCc6XHJcbiAgICAgIGNhc2UgJ3Zpc2liaWxpdHktY2hhbmdlJzpcclxuICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgIC8vIE9ubHkgc2hvdyBlcnJvciBpZiB3ZSBkb24ndCBoYXZlIGRhdGEgdG8gZGlzcGxheVxyXG4gICAgICAgIGlmICghc3RhdGUucHJheWVyVGltZXMpIHtcclxuICAgICAgICAgIHRoaXMuc2hvd1dhcm5pbmdTdGF0ZShzdGF0ZS5lcnJvcj8ubWVzc2FnZSB8fCAnVW5hYmxlIHRvIGxvYWQgcHJheWVyIHRpbWVzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRoaXMudXBkYXRlRGlzcGxheSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvdyBsb2FkaW5nIHN0YXRlIGluIG1hcnF1ZWVcclxuICAgKi9cclxuICBzaG93TG9hZGluZ1N0YXRlKCkge1xyXG4gICAgaWYgKCF0aGlzLm1hcnF1ZWVFbGVtZW50KSByZXR1cm47XHJcbiAgICB0aGlzLm1hcnF1ZWVFbGVtZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPHNwYW4gY2xhc3M9XCJwcmF5ZXItbG9hZGluZ1wiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwibG9hZGluZy1zcGlubmVyXCI+PC9zcGFuPlxyXG4gICAgICAgIEZldGNoaW5nIHlvdXIgbG9jYXRpb24uLi5cclxuICAgICAgPC9zcGFuPlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgZXJyb3Ivd2FybmluZyBzdGF0ZSBpbiBtYXJxdWVlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBNZXNzYWdlIHRvIGRpc3BsYXlcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dSZXRyeSAtIFdoZXRoZXIgdG8gc2hvdyByZXRyeSBidXR0b25cclxuICAgKi9cclxuICBzaG93V2FybmluZ1N0YXRlKG1lc3NhZ2UsIHNob3dSZXRyeSA9IHRydWUpIHtcclxuICAgIGlmICghdGhpcy5tYXJxdWVlRWxlbWVudCkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXRyeUJ0biA9IHNob3dSZXRyeSA/IGA8YnV0dG9uIGNsYXNzPVwicmV0cnktbG9jYXRpb24tYnRuXCIgdGl0bGU9XCJSZXRyeSBsb2NhdGlvbiBmZXRjaFwiPvCflIQ8L2J1dHRvbj5gIDogJyc7XHJcbiAgICBcclxuICAgIHRoaXMubWFycXVlZUVsZW1lbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8c3BhbiBjbGFzcz1cInByYXllci13YXJuaW5nXCI+XHJcbiAgICAgICAg4pqg77iPICR7bWVzc2FnZX0gJHtyZXRyeUJ0bn1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyBBZGQgcmV0cnkgaGFuZGxlclxyXG4gICAgaWYgKHNob3dSZXRyeSkge1xyXG4gICAgICBjb25zdCByZXRyeUJ0biA9IHRoaXMubWFycXVlZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJldHJ5LWxvY2F0aW9uLWJ0bicpO1xyXG4gICAgICBpZiAocmV0cnlCdG4pIHtcclxuICAgICAgICByZXRyeUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgdGhpcy5yZXRyeUxvY2F0aW9uRmV0Y2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0cnkgbG9jYXRpb24gZmV0Y2hcclxuICAgKi9cclxuICBhc3luYyByZXRyeUxvY2F0aW9uRmV0Y2goKSB7XHJcbiAgICB0aGlzLnNob3dMb2FkaW5nU3RhdGUoKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgcHJheWVyVGltZXNTZXJ2aWNlLmZvcmNlUmVmcmVzaCgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignUmV0cnkgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgdGhpcy5zaG93V2FybmluZ1N0YXRlKCdMb2NhdGlvbiBmZXRjaCBmYWlsZWQuIFVzaW5nIGZhbGxiYWNrIGxvY2F0aW9uLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGZlZWQgY29udGV4dCBmcm9tIFVSTCBwYXJhbWV0ZXJzXHJcbiAgICovXHJcbiAgZ2V0RmVlZENvbnRleHQoKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgY29uc3QgaW5zdGl0dXRpb24gPSBwYXJhbXMuZ2V0KCdpbnN0aXR1dGlvbicpO1xyXG4gICAgY29uc3QganVyaXNkaWN0aW9uID0gcGFyYW1zLmdldCgnanVyaXNkaWN0aW9uJyk7XHJcblxyXG4gICAgaWYgKGluc3RpdHV0aW9uKSB7XHJcbiAgICAgIHRoaXMuZmVlZFR5cGUgPSAnaW5zdGl0dXRpb24nO1xyXG4gICAgICB0aGlzLmVudGl0eU5hbWUgPSBpbnN0aXR1dGlvbjtcclxuICAgIH0gZWxzZSBpZiAoanVyaXNkaWN0aW9uKSB7XHJcbiAgICAgIHRoaXMuZmVlZFR5cGUgPSAnanVyaXNkaWN0aW9uJztcclxuICAgICAgdGhpcy5lbnRpdHlOYW1lID0ganVyaXNkaWN0aW9uO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5mZWVkVHlwZSA9ICdnbG9iYWwnO1xyXG4gICAgICB0aGlzLmVudGl0eU5hbWUgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggZmVlZCBjb25maWd1cmF0aW9uIGJhc2VkIG9uIGZlZWQgdHlwZVxyXG4gICAqL1xyXG4gIGFzeW5jIGZldGNoRmVlZENvbmZpZygpIHtcclxuICAgIGlmICh0aGlzLmZlZWRUeXBlID09PSAnZ2xvYmFsJykge1xyXG4gICAgICB0aGlzLmZlZWRDb25maWcgPSBudWxsO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBnZXRJbnN0aXR1dGlvbkZlZWRDb25maWcsIGdldEp1cmlzZGljdGlvbkZlZWRDb25maWcsIGdldEZlZWREb2N1bWVudHMgfSA9IGF3YWl0IGltcG9ydCgnLi9jb25maWcuanMnKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmZlZWRUeXBlID09PSAnaW5zdGl0dXRpb24nKSB7XHJcbiAgICAgICAgdGhpcy5mZWVkQ29uZmlnID0gYXdhaXQgZ2V0SW5zdGl0dXRpb25GZWVkQ29uZmlnKHRoaXMuZW50aXR5TmFtZSk7XHJcbiAgICAgICAgLy8gR2V0IEZlZWQtdHlwZSBkb2N1bWVudHMgZm9yIHRoaXMgaW5zdGl0dXRpb25cclxuICAgICAgICBjb25zdCBmZWVkRG9jcyA9IGF3YWl0IGdldEZlZWREb2N1bWVudHMoJ2luc3RpdHV0aW9uJywgdGhpcy5lbnRpdHlOYW1lKTtcclxuICAgICAgICB0aGlzLmZlZWREb2N1bWVudHMgPSBmZWVkRG9jcztcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmZlZWRUeXBlID09PSAnanVyaXNkaWN0aW9uJykge1xyXG4gICAgICAgIHRoaXMuZmVlZENvbmZpZyA9IGF3YWl0IGdldEp1cmlzZGljdGlvbkZlZWRDb25maWcodGhpcy5lbnRpdHlOYW1lKTtcclxuICAgICAgICAvLyBHZXQgRmVlZC10eXBlIGRvY3VtZW50cyBmb3IgdGhpcyBqdXJpc2RpY3Rpb25cclxuICAgICAgICBjb25zdCBmZWVkRG9jcyA9IGF3YWl0IGdldEZlZWREb2N1bWVudHMoJ2p1cmlzZGljdGlvbicsIHRoaXMuZW50aXR5TmFtZSk7XHJcbiAgICAgICAgdGhpcy5mZWVkRG9jdW1lbnRzID0gZmVlZERvY3M7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZmV0Y2hpbmcgZmVlZCBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmZlZWRDb25maWcgPSBudWxsO1xyXG4gICAgICB0aGlzLmZlZWREb2N1bWVudHMgPSBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGVudGl0eSBtZXRhZGF0YSAoZm9yIGJpbyBmYWxsYmFjaylcclxuICAgKi9cclxuICBhc3luYyBmZXRjaEVudGl0eU1ldGFkYXRhKCkge1xyXG4gICAgaWYgKCF0aGlzLmVudGl0eU5hbWUpIHtcclxuICAgICAgdGhpcy5lbnRpdHlNZXRhZGF0YSA9IG51bGw7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGdldEluc3RpdHV0aW9uTWV0YWRhdGEsIGdldEp1cmlzZGljdGlvbk1ldGFkYXRhIH0gPSBhd2FpdCBpbXBvcnQoJy4vY29uZmlnLmpzJyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5mZWVkVHlwZSA9PT0gJ2luc3RpdHV0aW9uJykge1xyXG4gICAgICAgIHRoaXMuZW50aXR5TWV0YWRhdGEgPSBhd2FpdCBnZXRJbnN0aXR1dGlvbk1ldGFkYXRhKHRoaXMuZW50aXR5TmFtZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5mZWVkVHlwZSA9PT0gJ2p1cmlzZGljdGlvbicpIHtcclxuICAgICAgICB0aGlzLmVudGl0eU1ldGFkYXRhID0gYXdhaXQgZ2V0SnVyaXNkaWN0aW9uTWV0YWRhdGEodGhpcy5lbnRpdHlOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdFcnJvciBmZXRjaGluZyBlbnRpdHkgbWV0YWRhdGE6JywgZXJyb3IpO1xyXG4gICAgICB0aGlzLmVudGl0eU1ldGFkYXRhID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSB0aGUgbWFycXVlZSBkaXNwbGF5XHJcbiAgICovXHJcbiAgdXBkYXRlRGlzcGxheSgpIHtcclxuICAgIGlmICghdGhpcy5tYXJxdWVlRWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHdpZGdldCBpcyBlbmFibGVkXHJcbiAgICBjb25zdCB3aWRnZXRFbmFibGVkID0gdGhpcy5mZWVkQ29uZmlnPy53aWRnZXQ/LmVuYWJsZWQgIT09IGZhbHNlO1xyXG5cclxuICAgIC8vIEJ1aWxkIHdpZGdldCBzZWN0aW9uIGNvbnRlbnQgd2l0aCBoZWFkZXJcclxuICAgIGxldCB3aWRnZXRTZWN0aW9uID0gJyc7XHJcbiAgICBpZiAod2lkZ2V0RW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBzdGF0ZSA9IHByYXllclRpbWVzU2VydmljZS5nZXRTdGF0ZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgZm9yIGVycm9yIHN0YXRlXHJcbiAgICAgIGlmIChzdGF0ZS5lcnJvciAmJiAhc3RhdGUucHJheWVyVGltZXMpIHtcclxuICAgICAgICB0aGlzLnNob3dXYXJuaW5nU3RhdGUoc3RhdGUuZXJyb3IubWVzc2FnZSB8fCAnVW5hYmxlIHRvIGxvYWQgcHJheWVyIHRpbWVzJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBmb3IgbG9hZGluZyBzdGF0ZVxyXG4gICAgICBpZiAoc3RhdGUuaXNMb2FkaW5nICYmICFzdGF0ZS5wcmF5ZXJUaW1lcykge1xyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmdTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQnVpbGQgcHJheWVyIHRpbWVzIGNvbnRlbnRcclxuICAgICAgY29uc3QgbG9jYXRpb25UZXh0ID0gc3RhdGUuZm9ybWF0dGVkTG9jYXRpb247XHJcbiAgICAgIGNvbnN0IHRpbWVUb05leHQgPSBzdGF0ZS5mb3JtYXR0ZWRUaW1lVG9OZXh0O1xyXG4gICAgICBjb25zdCBuZXh0UHJheWVyTmFtZSA9IHN0YXRlLm5leHRQcmF5ZXI/Lm5hbWUgfHwgXCJVbmtub3duXCI7XHJcblxyXG4gICAgICBjb25zdCB3aWRnZXRDb250ZW50ID0gYDxzcGFuIGNsYXNzPVwicHJheWVyLWl0ZW1cIj48c3BhbiBjbGFzcz1cInByYXllci1sYWJlbFwiPvCfk408L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJheWVyLXZhbHVlXCI+JHtsb2NhdGlvblRleHR9PC9zcGFuPjwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJwcmF5ZXItc2VwYXJhdG9yXCI+4oCiPC9zcGFuPiA8c3BhbiBjbGFzcz1cInByYXllci1pdGVtXCI+PHNwYW4gY2xhc3M9XCJwcmF5ZXItbGFiZWxcIj7wn5OFPC9zcGFuPiA8c3BhbiBjbGFzcz1cInByYXllci12YWx1ZVwiPiR7c3RhdGUuZm9ybWF0dGVkRGF0ZX08L3NwYW4+PC9zcGFuPiA8c3BhbiBjbGFzcz1cInByYXllci1zZXBhcmF0b3JcIj7igKI8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJheWVyLWl0ZW1cIj48c3BhbiBjbGFzcz1cInByYXllci1sYWJlbFwiPvCflZA8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJheWVyLXZhbHVlXCI+JHtzdGF0ZS5mb3JtYXR0ZWRUaW1lfTwvc3Bhbj48L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJheWVyLXNlcGFyYXRvclwiPuKAojwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJwcmF5ZXItaXRlbVwiPjxzcGFuIGNsYXNzPVwicHJheWVyLWxhYmVsXCI+4o+wPC9zcGFuPiA8c3BhbiBjbGFzcz1cInByYXllci12YWx1ZVwiPiR7bmV4dFByYXllck5hbWV9ICgke3RpbWVUb05leHR9KTwvc3Bhbj48L3NwYW4+YDtcclxuICAgICAgd2lkZ2V0U2VjdGlvbiA9IGA8c3BhbiBjbGFzcz1cInByYXllci1pdGVtXCI+PHNwYW4gY2xhc3M9XCJwcmF5ZXItbGFiZWxcIj5QcmF5ZXIgVGltZSBXaWRnZXQ6PC9zcGFuPiA8c3BhbiBjbGFzcz1cInByYXllci12YWx1ZVwiPiR7d2lkZ2V0Q29udGVudH08L3NwYW4+PC9zcGFuPmA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgZmVlZCBkb2N1bWVudHMgc2VjdGlvbiBjb250ZW50IGlmIGF2YWlsYWJsZVxyXG4gICAgbGV0IGZlZWRDb250ZW50ID0gJyc7XHJcbiAgICBpZiAodGhpcy5mZWVkRG9jdW1lbnRzICYmIHRoaXMuZmVlZERvY3VtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGZlZWRJdGVtcyA9IHRoaXMuZmVlZERvY3VtZW50cy5tYXAoZmVlZERvYyA9PiB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBmZWVkRG9jLnRpdGxlIHx8ICdVbnRpdGxlZCc7XHJcbiAgICAgICAgbGV0IGhlYWRlciA9ICcnO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mZWVkVHlwZSA9PT0gJ2luc3RpdHV0aW9uJykge1xyXG4gICAgICAgICAgY29uc3QganVyaXNkaWN0aW9uTmFtZSA9IGZlZWREb2MuanVyaXNkaWN0aW9uIHx8ICcnO1xyXG4gICAgICAgICAgY29uc3QgY2xlYW5KdXJpc2RpY3Rpb25OYW1lID0ganVyaXNkaWN0aW9uTmFtZS5yZXBsYWNlKC9cXHMqXFxbLio/XFxdXFxzKi9nLCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgaGVhZGVyID0gYFBvc3RlZCBpbiAke2NsZWFuSnVyaXNkaWN0aW9uTmFtZX1gO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5mZWVkVHlwZSA9PT0gJ2p1cmlzZGljdGlvbicpIHtcclxuICAgICAgICAgIGNvbnN0IGluc3RpdHV0aW9uTmFtZSA9IGZlZWREb2MuaW5zdGl0dXRpb24gfHwgJyc7XHJcbiAgICAgICAgICBjb25zdCBjbGVhbkluc3RpdHV0aW9uTmFtZSA9IGluc3RpdHV0aW9uTmFtZS5yZXBsYWNlKC9cXHMqXFxbLio/XFxdXFxzKi9nLCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgaGVhZGVyID0gYFBvc3RlZCBieSAke2NsZWFuSW5zdGl0dXRpb25OYW1lfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYDxzcGFuIGNsYXNzPVwicHJheWVyLWl0ZW1cIj48c3BhbiBjbGFzcz1cInByYXllci1sYWJlbFwiPiR7aGVhZGVyfTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJheWVyLXZhbHVlXCI+JHt0aXRsZX08L3NwYW4+PC9zcGFuPmA7XHJcbiAgICAgIH0pLmpvaW4oJyA8c3BhbiBjbGFzcz1cInByYXllci1zZXBhcmF0b3JcIj7igKI8L3NwYW4+ICcpO1xyXG5cclxuICAgICAgZmVlZENvbnRlbnQgPSBgIDxzcGFuIGNsYXNzPVwicHJheWVyLXNlcGFyYXRvclwiPnw8L3NwYW4+ICR7ZmVlZEl0ZW1zfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgdGhlIGNvbXBsZXRlIG1hcnF1ZWUgY29udGVudFxyXG4gICAgY29uc3QgZW5kU2VwYXJhdG9yID0gZmVlZENvbnRlbnQgPyAnfCcgOiAn4oCiJztcclxuICAgIGxldCBjb250ZW50ID0gYCR7d2lkZ2V0U2VjdGlvbn0ke2ZlZWRDb250ZW50fSA8c3BhbiBjbGFzcz1cInByYXllci1zZXBhcmF0b3JcIj4ke2VuZFNlcGFyYXRvcn08L3NwYW4+IGA7XHJcblxyXG4gICAgLy8gSWYgbm8gd2lkZ2V0IGFuZCBubyBmZWVkIGNvbnRlbnQsIHNob3cgYmlvIGFzIGZhbGxiYWNrXHJcbiAgICBpZiAoIXdpZGdldFNlY3Rpb24gJiYgIWZlZWRDb250ZW50ICYmIHRoaXMuZW50aXR5TWV0YWRhdGE/LmJpbykge1xyXG4gICAgICBjb25zdCBiaW8gPSB0aGlzLmVudGl0eU1ldGFkYXRhLmJpbztcclxuICAgICAgY29udGVudCA9IGA8c3BhbiBjbGFzcz1cInByYXllci1pdGVtXCI+PHNwYW4gY2xhc3M9XCJwcmF5ZXItdmFsdWVcIj4ke2Jpb308L3NwYW4+PC9zcGFuPiA8c3BhbiBjbGFzcz1cInByYXllci1zZXBhcmF0b3JcIj7igKI8L3NwYW4+IGA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgaGFzaCBvZiB0aGUgY29udGVudCAoZXhjbHVkaW5nIHRpbWUpIHRvIGRldGVjdCBhY3R1YWwgY2hhbmdlc1xyXG4gICAgY29uc3QgY29udGVudEhhc2ggPSB0aGlzLmdlbmVyYXRlQ29udGVudEhhc2god2lkZ2V0U2VjdGlvbiwgZmVlZENvbnRlbnQsIHRoaXMuZW50aXR5TWV0YWRhdGE/LmJpbyk7XHJcblxyXG4gICAgLy8gT25seSByZWdlbmVyYXRlIHJlcGVhdGVkIGNvbnRlbnQgaWYgdGhlIHN0cnVjdHVyZSBoYXMgY2hhbmdlZFxyXG4gICAgaWYgKHRoaXMuY2FjaGVkQ29udGVudEhhc2ggIT09IGNvbnRlbnRIYXNoKSB7XHJcbiAgICAgIC8vIEVuc3VyZSBjb250ZW50IGlzIGxvbmcgZW5vdWdoIHRvIGZpbGwgc2NyZWVuIHdpdGhvdXQgZ2Fwc1xyXG4gICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHRlbXAuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICB0ZW1wLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgdGVtcC5zdHlsZS53aGl0ZVNwYWNlID0gJ25vd3JhcCc7XHJcbiAgICAgIHRlbXAuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZW1wKTtcclxuICAgICAgY29uc3QgY29udGVudFdpZHRoID0gdGVtcC5vZmZzZXRXaWR0aDtcclxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZW1wKTtcclxuXHJcbiAgICAgIC8vIElmIGNvbnRlbnQgaXMgc2hvcnRlciB0aGFuIDJ4IHNjcmVlbiB3aWR0aCwgcmVwZWF0IGl0XHJcbiAgICAgIGlmIChjb250ZW50V2lkdGggPCBzY3JlZW5XaWR0aCAqIDIpIHtcclxuICAgICAgICBjb25zdCByZXBldGl0aW9ucyA9IE1hdGguY2VpbCgoc2NyZWVuV2lkdGggKiAyKSAvIGNvbnRlbnRXaWR0aCkgKyAxO1xyXG4gICAgICAgIGNvbnRlbnQgPSBBcnJheShyZXBldGl0aW9ucykuZmlsbChjb250ZW50LnRyaW0oKSkuam9pbignICcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNhY2hlZENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICB0aGlzLmNhY2hlZENvbnRlbnRIYXNoID0gY29udGVudEhhc2g7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBVc2UgY2FjaGVkIGNvbnRlbnQsIGp1c3QgdXBkYXRlIHRoZSB0aW1lIGlmIHdpZGdldCBpcyBlbmFibGVkXHJcbiAgICAgIGlmICh3aWRnZXRFbmFibGVkICYmIHRoaXMuY2FjaGVkQ29udGVudCkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aW1lIGluIGNhY2hlZCBjb250ZW50XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBwcmF5ZXJUaW1lc1NlcnZpY2UuZ2V0U3RhdGUoKTtcclxuICAgICAgICBjb25zdCB0aW1lUmVnZXggPSAvPHNwYW4gY2xhc3M9XCJwcmF5ZXItdmFsdWVcIj4oXFxkezEsMn06XFxkezJ9XFxzW0FQXU0pPFxcL3NwYW4+LztcclxuICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aGlzLmNhY2hlZENvbnRlbnQubWF0Y2godGltZVJlZ2V4KTtcclxuICAgICAgICBpZiAodGltZU1hdGNoKSB7XHJcbiAgICAgICAgICB0aGlzLmNhY2hlZENvbnRlbnQgPSB0aGlzLmNhY2hlZENvbnRlbnQucmVwbGFjZSh0aW1lTWF0Y2hbMF0sIGA8c3BhbiBjbGFzcz1cInByYXllci12YWx1ZVwiPiR7c3RhdGUuZm9ybWF0dGVkVGltZX08L3NwYW4+YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnRlbnQgPSB0aGlzLmNhY2hlZENvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRHVwbGljYXRlIGNvbnRlbnQgZm9yIHNlYW1sZXNzIGxvb3BpbmdcclxuICAgIHRoaXMubWFycXVlZUVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudCArIGNvbnRlbnQ7XHJcblxyXG4gICAgLy8gU2V0IGNvbnNpc3RlbnQgc2Nyb2xsIHNwZWVkIGFjcm9zcyBhbGwgc2NyZWVuIHNpemVzXHJcbiAgICB0aGlzLnNldFNjcm9sbFNwZWVkKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSBhIGhhc2ggb2YgdGhlIGNvbnRlbnQgc3RydWN0dXJlIChleGNsdWRpbmcgdGltZSlcclxuICAgKi9cclxuICBnZW5lcmF0ZUNvbnRlbnRIYXNoKHdpZGdldFNlY3Rpb24sIGNhcm91c2VsQ29udGVudCwgYmlvKSB7XHJcbiAgICAvLyBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgY29udGVudCBmb3IgaGFzaGluZyAocmVtb3ZlIHRpbWUpXHJcbiAgICBjb25zdCBzaW1wbGlmaWVkV2lkZ2V0ID0gd2lkZ2V0U2VjdGlvbiA/IHdpZGdldFNlY3Rpb24ucmVwbGFjZSgvXFxkezEsMn06XFxkezJ9XFxzW0FQXU0vZywgJ1RJTUUnKSA6ICcnO1xyXG4gICAgcmV0dXJuIGAke3NpbXBsaWZpZWRXaWRnZXR9fCR7Y2Fyb3VzZWxDb250ZW50fXwke2JpbyB8fCAnJ31gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHNjcm9sbCBzcGVlZCBiYXNlZCBvbiBjb250ZW50IHdpZHRoIGZvciBjb25zaXN0ZW50IHNwZWVkIGFjcm9zcyBzY3JlZW4gc2l6ZXNcclxuICAgKi9cclxuICBzZXRTY3JvbGxTcGVlZCgpIHtcclxuICAgIGNvbnN0IHBpeGVsc1BlclNlY29uZCA9IDMwO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgdGhlIGFjdHVhbCB3aWR0aCBvZiB0aGUgbWFycXVlZSBjb250ZW50XHJcbiAgICBjb25zdCBjb250ZW50V2lkdGggPSB0aGlzLm1hcnF1ZWVFbGVtZW50LnNjcm9sbFdpZHRoIC8gMjtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIGR1cmF0aW9uOiB3aWR0aCAvIHNwZWVkXHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IGNvbnRlbnRXaWR0aCAvIHBpeGVsc1BlclNlY29uZDtcclxuICAgIFxyXG4gICAgLy8gQXBwbHkgdGhlIGFuaW1hdGlvbiB3aXRoIGNhbGN1bGF0ZWQgZHVyYXRpb25cclxuICAgIHRoaXMubWFycXVlZUVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gYHNjcm9sbCAke2R1cmF0aW9ufXMgbGluZWFyIGluZmluaXRlYDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3cgZXJyb3IgbWVzc2FnZVxyXG4gICAqL1xyXG4gIHNob3dFcnJvcigpIHtcclxuICAgIGlmICghdGhpcy5tYXJxdWVlRWxlbWVudCkgcmV0dXJuO1xyXG4gICAgdGhpcy5tYXJxdWVlRWxlbWVudC5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxzcGFuIGNsYXNzPVwicHJheWVyLWVycm9yXCI+VW5hYmxlIHRvIGxvYWQgbWFycXVlZSBjb250ZW50LiBQbGVhc2UgY2hlY2sgeW91ciBjb25uZWN0aW9uLjwvc3Bhbj5cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBOYXZpZ2F0ZSB0byBmZWVkIHBhZ2Ugd2l0aCBhcHByb3ByaWF0ZSBwYXJhbWV0ZXJzXHJcbiAgICovXHJcbiAgbmF2aWdhdGVUb0ZlZWQoKSB7XHJcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBwcm9maWxlIG1vZGUgKGxpYnJhcnkuaHRtbCB3aXRoIGluc3RpdHV0aW9uL2p1cmlzZGljdGlvbiBmaWx0ZXIpXHJcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgY29uc3QgaW5zdGl0dXRpb24gPSBwYXJhbXMuZ2V0KCdpbnN0aXR1dGlvbicpO1xyXG4gICAgY29uc3QganVyaXNkaWN0aW9uID0gcGFyYW1zLmdldCgnanVyaXNkaWN0aW9uJyk7XHJcblxyXG4gICAgbGV0IGZlZWRVcmwgPSAnZmVlZC5odG1sJztcclxuICAgIFxyXG4gICAgaWYgKGluc3RpdHV0aW9uKSB7XHJcbiAgICAgIGZlZWRVcmwgPSBgZmVlZC5odG1sP2luc3RpdHV0aW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGluc3RpdHV0aW9uKX1gO1xyXG4gICAgfSBlbHNlIGlmIChqdXJpc2RpY3Rpb24pIHtcclxuICAgICAgZmVlZFVybCA9IGBmZWVkLmh0bWw/anVyaXNkaWN0aW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGp1cmlzZGljdGlvbil9YDtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGZlZWRVcmw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbiB1cFxyXG4gICAqL1xyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICBpZiAodGhpcy51bnN1YnNjcmliZSkge1xyXG4gICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIHdoZW4gRE9NIGlzIHJlYWR5XHJcbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICAgIGNvbnN0IG1hcnF1ZWUgPSBuZXcgTWFycXVlZSgpO1xyXG4gICAgbWFycXVlZS5pbml0KCk7XHJcbiAgfSk7XHJcbn0gZWxzZSB7XHJcbiAgY29uc3QgbWFycXVlZSA9IG5ldyBNYXJxdWVlKCk7XHJcbiAgbWFycXVlZS5pbml0KCk7XHJcbn1cclxuXHJcbi8vIEV4cG9ydCBmb3IgcG90ZW50aWFsIHVzZSBpbiBvdGhlciBtb2R1bGVzXHJcbmV4cG9ydCB7IE1hcnF1ZWUgfTtcclxuIl0sIm5hbWVzIjpbIkluZGV4ZWREQkNhY2hlIiwiY29uc3RydWN0b3IiLCJkYk5hbWUiLCJzdG9yZU5hbWUiLCJ2ZXJzaW9uIiwidGhpcyIsImRiIiwiaW5pdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdCIsImluZGV4ZWREQiIsIm9wZW4iLCJvbmVycm9yIiwiRXJyb3IiLCJlcnJvciIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9udXBncmFkZW5lZWRlZCIsImV2ZW50IiwidGFyZ2V0Iiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwic3RvcmUiLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJjcmVhdGVJbmRleCIsInVuaXF1ZSIsImdldCIsImtleSIsInRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmUiLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwidHRsIiwidmFsdWUiLCJkZWxldGUiLCJjYXRjaCIsImNvbnNvbGUiLCJ3YXJuIiwic2V0IiwiZGF0YSIsInB1dCIsIm9uY29tcGxldGUiLCJnZXRPckZldGNoIiwiZmV0Y2hGbiIsImNhY2hlZCIsImdldE9yRmV0Y2hTdGFsZSIsInN0YWxlVFRMIiwidGhlbiIsImFnZSIsInJlZnJlc2hJbkJhY2tncm91bmQiLCJjbGVhciIsImNsZWFyRXhwaXJlZCIsImluZGV4Iiwib3BlbkN1cnNvciIsImNsZWFyZWRDb3VudCIsImN1cnNvciIsImNvbnRpbnVlIiwia2V5cyIsImdldEFsbEtleXMiLCJnZXRTdGF0cyIsImdldEFsbCIsImVudHJpZXMiLCJ2YWxpZEVudHJpZXMiLCJleHBpcmVkRW50cmllcyIsInRvdGFsU2l6ZSIsImZvckVhY2giLCJlbnRyeSIsInNpemUiLCJKU09OIiwic3RyaW5naWZ5IiwibGVuZ3RoIiwidG90YWxFbnRyaWVzIiwidG90YWxCeXRlcyIsInRvdGFsS0IiLCJ0b0ZpeGVkIiwiYXZnRW50cnlTaXplIiwiY2xvc2UiLCJkZWxldGVEYXRhYmFzZSIsIkNBQ0hFX05BTUVTUEFDRVMiLCJDQUNIRV9ERUZBVUxUX1RUTCIsIlBSQVlFUl9USU1FUyIsInVuaWZpZWRDYWNoZSIsIm1lbW9yeUNhY2hlIiwiTWFwIiwiaWRiQ2FjaGUiLCJpbml0aWFsaXplZCIsImluaXRQcm9taXNlIiwiX2RvSW5pdCIsImdlbmVyYXRlS2V5IiwibmFtZXNwYWNlIiwicGFydHMiLCJqb2luIiwiZ2VuZXJhdGVMb2NhdGlvbktleSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiZXh0cmFQYXJ0cyIsImxhdFN0ciIsImxvblN0ciIsImhhcyIsImludmFsaWRhdGVOYW1lc3BhY2UiLCJwcmVmaXgiLCJzdGFydHNXaXRoIiwiY2xlYXJlZCIsIm1lbW9yeVNpemUiLCJpZGJTdGF0cyIsIm1lbW9yeUVudHJpZXMiLCJpc1N0YWxlIiwiX3JlZnJlc2hJbkJhY2tncm91bmQiLCJ3aW5kb3ciLCJMT0NBVElPTl9RVUFMSVRZIiwiR0VPTE9DQVRJT05fT1BUSU9OUyIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsInRpbWVvdXQiLCJtYXhpbXVtQWdlIiwiQ09SU19QUk9YSUVTIiwiREVGQVVMVF9MT0NBVElPTiIsImNpdHkiLCJjb3VudHJ5IiwiQ0FDSEVfVFRMIiwiTE9DQVRJT04iLCJHRU9DT0RJTkciLCJQUkFZRVJfTkFNRVMiLCJwcmF5ZXJUaW1lc1NlcnZpY2UiLCJsb2NhdGlvbiIsInByYXllclRpbWVzIiwibmV4dFByYXllciIsInRpbWVUb05leHRQcmF5ZXIiLCJpc0xvYWRpbmciLCJsYXN0RGF0ZSIsImxpc3RlbmVycyIsIlNldCIsInVwZGF0ZUludGVydmFsIiwiaGFuZGxlT25saW5lIiwiYmluZCIsImhhbmRsZU9mZmxpbmUiLCJoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIiwib3B0aW9ucyIsIm5vdGlmeUxpc3RlbmVycyIsImdldExvY2F0aW9uIiwiZm9yY2VSZWZyZXNoIiwiZmV0Y2hQcmF5ZXJUaW1lcyIsImNhbGN1bGF0ZU5leHRQcmF5ZXIiLCJzZXR1cEV2ZW50SGFuZGxlcnMiLCJzZXR1cFVwZGF0ZUludGVydmFsIiwic2V0dXBEYXRlQ2hhbmdlRGV0ZWN0aW9uIiwibWF4QWdlIiwiY2FjaGVLZXkiLCJpc0xvY2F0aW9uRnJlc2giLCJnZW9jb2RpbmdLZXkiLCJnZW9jb2RlZCIsImUiLCJsb2ciLCJxdWFsaXR5IiwicG9zaXRpb24iLCJyZXF1ZXN0R1BTUG9zaXRpb24iLCJjb29yZHMiLCJhY2N1cmFjeSIsImZldGNoQ2l0eU5hbWUiLCJlcnIiLCJtZXNzYWdlIiwiZ2V0TG9jYXRpb25GYWxsYmFjayIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwiZXhwaXJlZENhY2hlIiwiZ2V0RXhwaXJlZExvY2F0aW9uQ2FjaGUiLCJpc0V4cGlyZWQiLCJmYWxsYmFja1JlYXNvbiIsImdldEdQU0Vycm9yTWVzc2FnZSIsImNvZGUiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlBPU0lUSU9OX1VOQVZBSUxBQkxFIiwiVElNRU9VVCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJyZXNwb25zZSIsImZldGNoIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJqc29uIiwidXBkYXRlTG9jYXRpb25DYWNoZSIsIm5vbWluYXRpbVVybCIsInByb3h5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYWRkcmVzcyIsInRvd24iLCJ2aWxsYWdlIiwiY291bnR5IiwiZ2VuZXJhdGVQcmF5ZXJDYWNoZUtleSIsImxvY2FsRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInRpbWVab25lIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwicmVzb2x2ZWRPcHRpb25zIiwiY2FsY3VsYXRlUHJheWVyVFRMIiwidGltZXpvbmUiLCJlbmRPZkRheVN0ciIsImdldFRpbWUiLCJNYXRoIiwibWF4IiwiY2FjaGVEYXRlIiwiZGF0ZSIsInRvZGF5IiwidG9EYXRlU3RyaW5nIiwiY2FjaGVBZ2UiLCJyZWZyZXNoUHJheWVyVGltZXNJbkJhY2tncm91bmQiLCJmZXRjaFByYXllclRpbWVzRnJvbUFQSSIsInVybCIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwibmFtZSIsInRpbWluZ3MiLCJjYWNoZVByYXllclRpbWVzIiwidG9JU09TdHJpbmciLCJjdXJyZW50TWludXRlcyIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInByYXllck1pbnV0ZXMiLCJtYXAiLCJob3VycyIsIm1pbnV0ZXMiLCJzcGxpdCIsIk51bWJlciIsInRpbWUiLCJwcmF5ZXIiLCJtaW51dGVzVW50aWxNaWRuaWdodCIsImZvcm1hdFRpbWVUb05leHRQcmF5ZXIiLCJmbG9vciIsImZvcm1hdERhdGUiLCJ3ZWVrZGF5IiwibW9udGgiLCJkYXkiLCJ5ZWFyIiwiZm9ybWF0Q3VycmVudFRpbWUiLCJpbmNsdWRlU2Vjb25kcyIsImhvdXIiLCJtaW51dGUiLCJob3VyMTIiLCJzZWNvbmQiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJmb3JtYXRMb2NhdGlvbiIsImdldFN0YXRlIiwiZm9ybWF0dGVkVGltZVRvTmV4dCIsImZvcm1hdHRlZERhdGUiLCJmb3JtYXR0ZWRUaW1lIiwiZm9ybWF0dGVkTG9jYXRpb24iLCJzdWJzY3JpYmUiLCJsaXN0ZW5lciIsImFkZCIsInN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvY3VtZW50IiwidmlzaWJpbGl0eVN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiY3VycmVudERhdGUiLCJpbnZhbGlkYXRlUHJheWVyVGltZXNDYWNoZSIsImludmFsaWRhdGVMb2NhdGlvbkNhY2hlIiwiaW52YWxpZGF0ZUFsbENhY2hlcyIsImRlc3Ryb3kiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTWFycXVlZSIsIm1hcnF1ZWVFbGVtZW50IiwiZmVlZENvbmZpZyIsImZlZWREb2N1bWVudHMiLCJmZWVkVHlwZSIsImVudGl0eU5hbWUiLCJlbnRpdHlNZXRhZGF0YSIsImNhY2hlZENvbnRlbnQiLCJjYWNoZWRDb250ZW50SGFzaCIsInVuc3Vic2NyaWJlIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsIm5hdmlnYXRlVG9GZWVkIiwiZ2V0RmVlZENvbnRleHQiLCJmZXRjaEZlZWRDb25maWciLCJmZXRjaEVudGl0eU1ldGFkYXRhIiwid2lkZ2V0IiwiZW5hYmxlZCIsInNob3dMb2FkaW5nU3RhdGUiLCJoYW5kbGVTZXJ2aWNlVXBkYXRlIiwidXBkYXRlRGlzcGxheSIsInNob3dFcnJvciIsInNob3dXYXJuaW5nU3RhdGUiLCJpbm5lckhUTUwiLCJzaG93UmV0cnkiLCJyZXRyeUJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJzdG9wUHJvcGFnYXRpb24iLCJyZXRyeUxvY2F0aW9uRmV0Y2giLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJpbnN0aXR1dGlvbiIsImp1cmlzZGljdGlvbiIsImdldEluc3RpdHV0aW9uRmVlZENvbmZpZyIsImdldEp1cmlzZGljdGlvbkZlZWRDb25maWciLCJnZXRGZWVkRG9jdW1lbnRzIiwiaW1wb3J0IiwiZmVlZERvY3MiLCJnZXRJbnN0aXR1dGlvbk1ldGFkYXRhIiwiZ2V0SnVyaXNkaWN0aW9uTWV0YWRhdGEiLCJ3aWRnZXRFbmFibGVkIiwid2lkZ2V0U2VjdGlvbiIsImxvY2F0aW9uVGV4dCIsInRpbWVUb05leHQiLCJuZXh0UHJheWVyTmFtZSIsImZlZWRDb250ZW50IiwiZmVlZERvYyIsInRpdGxlIiwiaGVhZGVyIiwicmVwbGFjZSIsInRyaW0iLCJjb250ZW50IiwiYmlvIiwiY29udGVudEhhc2giLCJnZW5lcmF0ZUNvbnRlbnRIYXNoIiwic2NyZWVuV2lkdGgiLCJpbm5lcldpZHRoIiwidGVtcCIsImNyZWF0ZUVsZW1lbnQiLCJ2aXNpYmlsaXR5Iiwid2hpdGVTcGFjZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnRXaWR0aCIsIm9mZnNldFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJyZXBldGl0aW9ucyIsImNlaWwiLCJBcnJheSIsImZpbGwiLCJ0aW1lUmVnZXgiLCJ0aW1lTWF0Y2giLCJtYXRjaCIsInNldFNjcm9sbFNwZWVkIiwiY2Fyb3VzZWxDb250ZW50IiwiZHVyYXRpb24iLCJzY3JvbGxXaWR0aCIsImFuaW1hdGlvbiIsImZlZWRVcmwiLCJocmVmIiwicmVhZHlTdGF0ZSJdLCJtYXBwaW5ncyI6IkFBTU8sTUFBTUEsZUFDWCxXQUFBQyxDQUFZQyxFQUFTLGNBQWVDLEVBQVksWUFBYUMsRUFBVSxHQUNyRUMsS0FBS0gsT0FBU0EsRUFDZEcsS0FBS0YsVUFBWUEsRUFDakJFLEtBQUtELFFBQVVBLEVBQ2ZDLEtBQUtDLEdBQUssSUFDWixDQU1BLFVBQU1DLEdB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
