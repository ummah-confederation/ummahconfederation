const n="1.0.0";let t=null,i=null,o=null;let s={documents:0,institutions:0,jurisdictions:0,squircleIcons:0};function c(n){const t=Date.now();return s[n]&&t-s[n]<3e5}function u(n){s[n]=Date.now()}async function e(t,i=!0){const o=i?`?v=${n}&t=${Date.now()}`:`?t=${Date.now()}`;return fetch(t+o,{cache:"no-store",headers:{Accept:"application/json"}})}async function r(){if(t&&c("documents"))return t;try{const n=await e("config/documents-config.json");if(!n.ok)throw new Error(`Failed to load config: ${n.status} ${n.statusText}`);const i=await n.json();return t=i,u("documents"),i}catch(n){throw n}}async function a(){if(i&&c("institutions"))return i;try{const n=await e("config/institution-config.json");if(!n.ok)throw new Error(`Failed to load institution config: ${n.status} ${n.statusText}`);const t=await n.json();return i=t,u("institutions"),t}catch(n){return{institutions:{}}}}async function f(){if(o&&c("jurisdictions"))return o;try{const n=await e("config/jurisdiction-config.json");if(!n.ok)throw new Error(`Failed to load jurisdiction config: ${n.status} ${n.statusText}`);const t=await n.json();return o=t,u("jurisdictions"),t}catch(n){return{jurisdictions:{}}}}function d(){return n}function l(n){w()}function w(){t=null,i=null,o=null,s={documents:0,institutions:0,jurisdictions:0,squircleIcons:0}}async function j(n){const t=await a();return t.institutions?.[n]?.feed_config||null}async function g(n){const t=await f();return t.jurisdictions?.[n]?.feed_config||null}async function h(n){const t=await a(),i=[];for(const[o,s]of Object.entries(t.institutions||{})){const t=s.feed_config?.carousel;if(t&&t.post_to_jurisdictions?.includes(n)){const n=await Promise.all(t.images.map(async n=>{const t=n.document_id?await m(n.document_id):null;return{...n,document:t}}));i.push({institution:o,...t,images:n})}}return i}async function m(n){return(await r()).documents.find(t=>t.id===n)||null}"undefined"!=typeof window&&(window.clearConfigCache=w,window.getCacheVersion=d,window.setCacheVersion=l);export{w as clearConfigCache,d as getCacheVersion,m as getDocumentById,j as getInstitutionFeedConfig,h as getJurisdictionCarousels,g as getJurisdictionFeedConfig,r as loadDocumentsConfig,a as loadInstitutionConfig,f as loadJurisdictionConfig,l as setCacheVersion};
