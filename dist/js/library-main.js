const t="1.0.0";let n=null,e=null,i=null,o=null;let a={documents:0,institutions:0,jurisdictions:0,squircleIcons:0};function s(t){const n=Date.now();return a[t]&&n-a[t]<3e5}function r(t){a[t]=Date.now()}async function c(n,e=!0){const i=e?`?v=${t}&t=${Date.now()}`:`?t=${Date.now()}`;return fetch(n+i,{cache:"no-store",headers:{Accept:"application/json"}})}async function l(){if(n&&s("documents"))return n;try{const t=await c("config/documents-config.json");if(!t.ok)throw new Error(`Failed to load config: ${t.status} ${t.statusText}`);const e=await t.json();return n=e,r("documents"),e}catch(t){throw console.error("Error loading documents config:",t),t}}async function d(){if(e&&s("institutions"))return e;try{const t=await c("config/institution-config.json");if(!t.ok)throw new Error(`Failed to load institution config: ${t.status} ${t.statusText}`);const n=await t.json();return e=n,r("institutions"),n}catch(t){return console.error("Error loading institution config:",t),{institutions:{}}}}async function u(){if(i&&s("jurisdictions"))return i;try{const t=await c("config/jurisdiction-config.json");if(!t.ok)throw new Error(`Failed to load jurisdiction config: ${t.status} ${t.statusText}`);const n=await t.json();return i=n,r("jurisdictions"),n}catch(t){return console.error("Error loading jurisdiction config:",t),{jurisdictions:{}}}}async function m(t){const n=await d();return n.institutions?.[t]||null}async function f(){return(await l()).documents.filter(t=>!1!==t.visible)}async function p(){if(o&&s("squircleIcons"))return o;try{const t=await c("config/squircle-icons-config.json");if(!t.ok)throw new Error(`Failed to load squircle icons config: ${t.status} ${t.statusText}`);const n=await t.json();return o=n,r("squircleIcons"),n}catch(t){return console.error("Error loading squircle icons config:",t),{icons:{}}}}function v(){n=null,e=null,i=null,o=null,a={documents:0,institutions:0,jurisdictions:0,squircleIcons:0}}async function y(t,n){const e=(await f()).filter(e=>"Feed"===e.item&&("institution"===t?e.institution===n:"jurisdiction"===t&&e.jurisdiction===n));return await Promise.all(e.map(async t=>{const n=t.carousel?.linked_document_id?await async function(t){return(await l()).documents.find(n=>n.id===t)||null}(t.carousel.linked_document_id):null;return{...t,linkedDocument:n}}))}function h(){const t=new URLSearchParams(window.location.search);return{item:t.get("item"),institution:t.get("institution"),jurisdiction:t.get("jurisdiction")}}function b(){const t=window.location.hash.slice(1);if(!t)return{item:null,institution:null,jurisdiction:null};const n=new URLSearchParams(t);return{item:n.get("item"),institution:n.get("institution"),jurisdiction:n.get("jurisdiction")}}function w(t,n){const e=[...t];switch(n){case"name":return e.sort((t,n)=>t.title.localeCompare(n.title));case"version":return e.sort((t,n)=>{const e=n.version-t.version;return 0!==e?e:new Date(n.date)-new Date(t.date)});case"date":return e.sort((t,n)=>new Date(n.date)-new Date(t.date));default:return e}}function g(t,n){return t.filter(t=>(!n.item||t.item.toLowerCase()===n.item.toLowerCase())&&((!n.institution||t.institution.toLowerCase()===n.institution.toLowerCase())&&(!n.jurisdiction||t.jurisdiction.toLowerCase()===n.jurisdiction.toLowerCase())))}function $(t){const n=document.createElement("div");return n.textContent=t,n.innerHTML}"undefined"!=typeof window&&(window.clearConfigCache=v,window.getCacheVersion=function(){return t},window.setCacheVersion=function(t){v()});const L={profileType:null,profileName:null,currentFilter:"Feed",documents:[],profileData:null,availableTypes:[]};let E=null;function j(t){const n=t.match(/^(.+?)\s*\[(.*?)\]\s*$/);return n?{name:n[1].trim(),label:n[2].trim()}:{name:t.trim(),label:""}}function x(){let t=h();return t.institution||t.jurisdiction||(t=b()),t.institution?{type:"institution",name:t.institution}:t.jurisdiction?{type:"jurisdiction",name:t.jurisdiction}:null}async function C(t){E=t;const n=x();if(!n)return void function(){const t=document.getElementById("profile-container");t&&t.classList.add("hidden")}();L.profileType=n.type,L.profileName=n.name;const e=await f();var i;L.documents=e.filter(t=>"institution"===L.profileType?t.institution===L.profileName:t.jurisdiction===L.profileName),L.availableTypes=(i=L.documents,["all",...[...new Set(i.map(t=>t.item))].sort((t,n)=>t.localeCompare(n))]),L.availableTypes.includes("Feed")?L.currentFilter="Feed":L.currentFilter="all","institution"===L.profileType?L.profileData=await m(L.profileName):L.profileData=await async function(t){const n=await u();return n.jurisdictions?.[t]||null}(L.profileName),function(){!function(){const t=document.getElementById("profile-container");t&&t.classList.remove("hidden")}();const t=document.getElementById("profile-header");if(!t)return;const{name:n,label:e}=j(L.profileName),i=L.profileData||{},o=i.cover||"./images/default-cover.jpg",a=i.avatar||"./images/default-avatar.webp",s=i.bio||"";let r="";if("institution"===L.profileType){const t=function(t,n){return t.filter(t=>t.institution===n).length}(L.documents,L.profileName);r=`${t} Contributions`}else{const t=function(t,n){return new Set(t.filter(t=>t.jurisdiction===n).map(t=>t.institution)).size}(L.documents,L.profileName);r=`${t} Contributors`}const c="institution"===L.profileType?"Contact":"Contributors";t.innerHTML=`\n    <div class="profile-cover">\n      <img src="${$(o)}" alt="Cover" loading="lazy" decoding="async" />\n    </div>\n    <div class="profile-info">\n      <div class="profile-header-row">\n        <div class="profile-avatar">\n          <img src="${$(a)}" alt="${$(n)}" loading="eager" fetchpriority="high" />\n        </div>\n        <div class="profile-actions">\n          <button class="profile-button" id="profile-action-btn">${$(c)}</button>\n        </div>\n      </div>\n      <div class="profile-details-section">\n        <h1 class="profile-name">${$(n)}</h1>\n        ${e?`<span class="profile-label">${$(e)}</span>`:""}\n        <span class="profile-count">${$(r)}</span>\n        ${s?`<p class="profile-bio">${$(s)}</p>`:""}\n      </div>\n    </div>\n  `;const l=document.getElementById("profile-action-btn");l&&l.addEventListener("click",I)}(),function(){const t=document.getElementById("profile-filters");if(!t)return;const n=L.availableTypes;t.innerHTML=`\n    <div class="filter-pills-container">\n      ${n.map(t=>{return`\n        <button \n          class="filter-pill ${t===L.currentFilter?"active":""}" \n          data-type="${$(t)}"\n        >\n          <span class="filter-pill-icon">\n            ${function(t){return{all:"üìÇ",feed:"üì∞",book:"üìö",guideline:"üíé",policy:"üìã",decision:"‚ÑπÔ∏è",verdict:"‚öñÔ∏è",note:"üìé"}[t.toLowerCase()]||"üìÑ"}(t)}\n          </span>\n          <span class="filter-pill-label">${$((n=t,n.charAt(0).toUpperCase()+n.slice(1)))}</span>\n        </button>\n      `;var n}).join("")}\n    </div>\n  `,t.querySelectorAll(".filter-pill").forEach(t=>{t.addEventListener("click",()=>{!function(t){L.currentFilter=t,document.querySelectorAll(".filter-pill").forEach(n=>{n.classList.toggle("active",n.dataset.type===t)}),E&&E(t)}(t.dataset.type)})})}()}function k(){return L.currentFilter}function T(){return"all"===L.currentFilter?L.documents.filter(t=>"Feed"!==t.item):"feed"===L.currentFilter.toLowerCase()?[]:L.documents.filter(t=>t.item.toLowerCase()===L.currentFilter.toLowerCase())}function I(){"institution"===L.profileType?async function(){const t=L.profileData||{},{name:n,label:e}=j(L.profileName),i=t.contact||{},o=document.getElementById("profile-modal-overlay"),a=document.getElementById("modal-title"),s=document.getElementById("modal-content");if(!o||!a||!s)return void console.error("Modal elements not found");a.textContent="Contact Information";const r=t.avatar||"./images/default-avatar.webp";s.innerHTML=`\n    <div class="contact-card">\n      <div class="contact-card-header">\n        <img src="${$(r)}" alt="${$(n)}" class="contact-card-avatar" loading="lazy" decoding="async" />\n        <div>\n          <div class="contact-card-name">${$(n)}</div>\n          ${e?`<div class="contact-card-label">${$(e)}</div>`:""}\n        </div>\n      </div>\n      ${i.email?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üìß</span>\n          <div>\n            <div class="contact-info-label">Email</div>\n            <div class="contact-info-value">\n              <a href="mailto:${$(i.email)}">${$(i.email)}</a>\n            </div>\n          </div>\n        </div>\n      `:""}\n      ${i.phone?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üì±</span>\n          <div>\n            <div class="contact-info-label">Phone</div>\n            <div class="contact-info-value">\n              <a href="tel:${$(i.phone.replace(/\s/g,""))}">${$(i.phone)}</a>\n            </div>\n          </div>\n        </div>\n      `:""}\n      ${i.address?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üìç</span>\n          <div>\n            <div class="contact-info-label">Address</div>\n            <div class="contact-info-value">${$(i.address)}</div>\n          </div>\n        </div>\n      `:""}\n      ${i.website?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üåê</span>\n          <div>\n            <div class="contact-info-label">Website</div>\n            <div class="contact-info-value">\n              <a href="${$(i.website)}" target="_blank" rel="noopener noreferrer">${$(i.website)}</a>\n            </div>\n          </div>\n        </div>\n      `:""}\n      ${i.email||i.phone||i.address||i.website?"":'\n        <div class="contact-info-item">\n          <span class="contact-info-icon">‚ÑπÔ∏è</span>\n          <div class="contact-info-value">No contact information available</div>\n        </div>\n      '}\n    </div>\n  `,o.classList.add("active")}():async function(){j(L.profileName);const t=document.getElementById("profile-modal-overlay"),n=document.getElementById("modal-title"),e=document.getElementById("modal-content");if(!t||!n||!e)return void console.error("Modal elements not found");n.textContent="Contributors";const i=function(t){const n=new Map;return L.documents.forEach(e=>{if(e.jurisdiction===t){const t=e.institution;n.set(t,(n.get(t)||0)+1)}}),Array.from(n.entries()).map(([t,n])=>({name:t,count:n})).sort((t,n)=>n.count-t.count)}(L.profileName);if(0===i.length)e.innerHTML='\n      <div class="contact-info-item">\n        <span class="contact-info-icon">‚ÑπÔ∏è</span>\n        <div class="contact-info-value">No contributors found</div>\n      </div>\n    ';else{const t=await Promise.all(i.map(async t=>{const n=await m(t.name),e=n?.avatar||"./images/default-avatar.webp",{name:i}=j(t.name);return`\n          <div class="contributor-item">\n            <img src="${$(e)}" alt="${$(i)}" class="contributor-avatar" loading="lazy" decoding="async" />\n            <div class="contributor-info">\n              <div class="contributor-name">${$(i)}</div>\n              <div class="contributor-count">${t.count} contribution${1!==t.count?"s":""}</div>\n            </div>\n            <a href="?institution=${encodeURIComponent(t.name)}" class="contributor-link">View</a>\n          </div>\n        `}));e.innerHTML=`\n      <div class="contributor-list">\n        ${t.join("")}\n      </div>\n    `}t.classList.add("active")}()}function N(){const t=document.getElementById("profile-modal-overlay");t&&t.classList.remove("active")}async function M(t){if(!t)return;const n=await y(L.profileType,L.profileName);if(0===n.length)return void(t.innerHTML='<p class="text-center" style="padding: 2rem; opacity: 0.6;">No feed items found.</p>');let e;if("jurisdiction"===L.profileType){const t=new Map;n.forEach(n=>{const e=n.institution;t.has(e)||t.set(e,[]),t.get(e).push(n)}),e=Array.from(t.entries()).map(([t,n])=>({title:n[0]?.title||t.replace(/\s*\[.*?\]\s*/g,"").trim(),sourceLabel:`Posted by ${t.replace(/\s*\[.*?\]\s*/g,"").trim()}`,docs:n}))}else{const t=n[0]?.jurisdiction?.replace(/\s*\[.*?\]\s*/g,"").trim()||"";e=[{title:n[0]?.title||"Feed",sourceLabel:`Posted in ${t}`,docs:n}]}t.innerHTML="",e.forEach(n=>{const e=`carousel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i=n.docs.map((t,n)=>({caption:t.linkedDocument?.title||t.title||"Untitled",docLink:t.linkedDocument?.filename||"#",imageUrl:t.carousel?.image||"",index:n})),o=`\n      <div class="feed-carousel" id="${e}">\n        <div class="carousel-header">\n          <h3 class="carousel-title">${$(n.title)}</h3>\n        </div>\n        <div class="carousel-container">\n          <div class="carousel-track" id="${e}-track">\n            ${i.map(t=>`\n              <div class="carousel-slide">\n                <img src="${$(t.imageUrl)}" alt="${$(t.caption)}" loading="${0===t.index?"eager":"lazy"}" decoding="async" fetchpriority="${0===t.index?"high":"auto"}">\n                <div class="carousel-caption">\n                  <a href="${$(t.docLink)}" class="carousel-caption-link">${$(t.caption)}</a>\n                </div>\n              </div>\n            `).join("")}\n          </div>\n          <button class="carousel-nav prev" aria-label="Previous slide">‚Äπ</button>\n          <button class="carousel-nav next" aria-label="Next slide">‚Ä∫</button>\n        </div>\n        <div class="carousel-footer">\n          <div class="carousel-indicators">\n            ${i.map(t=>`\n              <button class="carousel-indicator ${0===t.index?"active":""}" data-index="${t.index}" aria-label="Go to slide ${t.index+1}"></button>\n            `).join("")}\n          </div>\n          <span class="carousel-source">${$(n.sourceLabel)}</span>\n        </div>\n      </div>\n    `;t.insertAdjacentHTML("beforeend",o),function(t,n){const e=document.getElementById(t);if(!e)return;const i=document.getElementById(`${t}-track`),o=e.querySelector(".carousel-nav.prev"),a=e.querySelector(".carousel-nav.next"),s=e.querySelectorAll(".carousel-indicator");let r,c=0;function l(t){t<0&&(t=n-1),t>=n&&(t=0),c=t,i.style.transform=`translateX(-${100*c}%)`,s.forEach((t,n)=>{t.classList.toggle("active",n===c)})}function d(){l(c+1)}function u(){l(c-1)}function m(){r=setInterval(d,5e3)}function f(){clearInterval(r)}function p(){f(),m()}o.addEventListener("click",()=>{u(),p()}),a.addEventListener("click",()=>{d(),p()}),s.forEach((t,n)=>{t.addEventListener("click",()=>{l(n),p()})}),m(),e.addEventListener("mouseenter",f),e.addEventListener("mouseleave",m);let v=0,y=0;e.addEventListener("touchstart",t=>{v=t.changedTouches[0].screenX},{passive:!0}),e.addEventListener("touchend",t=>{y=t.changedTouches[0].screenX;const n=v-y;Math.abs(n)>50&&(n>0?d():u(),p())},{passive:!0})}(e,i.length)})}!function(){const t=document.getElementById("profile-modal-overlay"),n=document.getElementById("modal-close");n&&n.addEventListener("click",N),t&&t.addEventListener("click",n=>{n.target===t&&N()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&N()})}();let B="name",F=[],D=!1;function S(t){const n=document.getElementById("library");if(!n)return void console.warn("Library container not found");const e=x(),i="institution"===e?.type,o=i||"jurisdiction"===e?.type;n.innerHTML="";let a="";if(o){const t="library-grid-profile";a=i?`\n<div class="library-row library-header ${t} gap-3 items-baseline text-left font-bold border-b border-black pb-1 mb-3">\n  <span class="overflow-hidden text-ellipsis whitespace-nowrap">Title</span>\n  <span class="text-right whitespace-nowrap">Posted in</span>\n</div>`:`\n<div class="library-row library-header ${t} gap-3 items-baseline text-left font-bold border-b border-black pb-1 mb-3">\n  <span class="overflow-hidden text-ellipsis whitespace-nowrap">Title</span>\n  <span class="text-right whitespace-nowrap">Posted by</span>\n</div>`}else{a=`\n<div class="library-row library-header ${"library-grid-default"} gap-4 items-start text-left font-bold border-b border-black pb-1 mb-3">\n  <span class="overflow-hidden text-ellipsis whitespace-nowrap">Title</span>\n  <span class="text-center tabular-nums">Version</span>\n  <span class="text-right whitespace-nowrap">Updated Date</span>\n</div>`}n.innerHTML=a,t.forEach(t=>{const e=function(t){const n=x(),e="institution"===n?.type,i="jurisdiction"===n?.type,o=e||i,a=document.createElement("div"),s=o?"library-grid-profile":"library-grid-default";a.className=`library-row ${s} gap-3 items-start border-b border-gray-200 py-2`,a.dataset.name=t.title,a.dataset.version=t.version,a.dataset.date=t.date,a.dataset.item=t.item,a.dataset.institution=t.institution,a.dataset.jurisdiction=t.jurisdiction;const r=document.createElement("span");r.className="overflow-hidden text-ellipsis whitespace-nowrap min-w-0";const c=document.createElement("a");c.href=t.filename,c.textContent=t.title,c.className="block overflow-hidden text-ellipsis whitespace-nowrap",r.appendChild(c);const l=document.createElement("span");if(e){l.className="library-metadata text-right whitespace-nowrap overflow-hidden text-sm text-ellipsis shrink-0";const n=(t.jurisdiction||"").replace(/\s*\[.*?\]\s*/g,""),e=t.jurisdiction?`?jurisdiction=${encodeURIComponent(t.jurisdiction)}`:"#";l.innerHTML=`<span class="sm:hidden">Posted in </span><a href="${$(e)}" class="library-profile-link">${$(n)}</a>`}else{if(!i){const n=document.createElement("span");n.className="library-version text-center text-sm   tabular-nums",n.innerHTML=`<span class="sm:hidden text-sm">Version </span>${t.version}`;const e=document.createElement("span");return e.className="library-date text-right whitespace-nowrap",e.textContent=t.dateFormatted,a.appendChild(r),a.appendChild(n),a.appendChild(e),a}{l.className="library-metadata text-right whitespace-nowrap overflow-hidden text-sm text-ellipsis shrink-0";const n=(t.institution||"").replace(/\s*\[.*?\]\s*/g,""),e=t.institution?`?institution=${encodeURIComponent(t.institution)}`:"#";l.innerHTML=`<span class="sm:hidden">Posted by </span><a href="${$(e)}" class="library-profile-link">${$(n)}</a>`}}return a.appendChild(r),a.appendChild(l),a}(t);n.appendChild(e)})}function q(t){document.querySelectorAll(".sort-controls button").forEach(n=>{n.classList.remove("active"),n.dataset.sort===t&&n.classList.add("active")})}async function H(t={},n=null){try{D=!!n||!!x(),D?document.body.classList.add("has-profile"):document.body.classList.remove("has-profile");const e=document.querySelector(".sort-controls-wrapper");e&&(D?e.classList.add("hidden"):e.classList.remove("hidden"));const i=document.getElementById("library-context");if(i&&(D?i.classList.add("hidden"):i.classList.remove("hidden")),0===F.length){const n=await f();F=g(n,t),F=w(F,B)}S(F),function(t){const n=document.getElementById("library-context");if(!n)return;const e=[];t.item&&e.push(t.item),t.institution&&e.push(t.institution),t.jurisdiction&&e.push(t.jurisdiction),0===e.length&&e.push("All"),n.textContent=e.join(" ¬∑ ")}(t),q(B),D||document.querySelectorAll(".sort-controls button").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.sort;var e;n&&(B=e=n,F=w(F,e),S(F),q(e))})})}catch(t){console.error("Failed to initialize library:",t),function(t){console.error(t);const n=document.createElement("div");n.className="error-message",n.style.cssText="\n    background: #fee;\n    border: 1px solid #fcc;\n    color: #c00;\n    padding: 1rem;\n    margin: 1rem;\n    border-radius: 4px;\n    text-align: center;\n  ",n.textContent=t,document.body.insertBefore(n,document.body.firstChild),setTimeout(()=>{n.remove()},5e3)}("Unable to load document library. Please try again later.")}}const P="darkMode";document.addEventListener("DOMContentLoaded",async()=>{!function(){const t=document.querySelector(".admin-seal");if(!t)return;const n=localStorage.getItem(P),e=window.matchMedia("(prefers-color-scheme: dark)").matches;("true"===n||!n&&e)&&document.documentElement.classList.add("dark"),t.addEventListener("click",()=>{document.documentElement.classList.toggle("dark");const t=document.documentElement.classList.contains("dark");localStorage.setItem(P,t)})}(),await async function(){const[t,n,e,i]=await Promise.all([l(),d(),u(),p()]);return{documents:t,institutions:n,jurisdictions:e,squircleIcons:i}}();const t=await f();let n=h();n.institution||n.jurisdiction||n.item||(n=b());const e=x(),i=g(t,n);let o=i;if(e){await C(async()=>{if("feed"===k().toLowerCase()){const t=document.getElementById("library");return void(t&&await M(t))}const t=T(),n=new Set(t.map(t=>t.id)),e=i.filter(t=>n.has(t.id));F=w(e,B),S(F),q(B)});const t=T(),n=new Set(t.map(t=>t.id));o=i.filter(t=>n.has(t.id))}if(o=w(o,"name"),F=o,await H(n,e),e){if("feed"===k().toLowerCase()){const t=document.getElementById("library");t&&await M(t)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlicmFyeS1tYWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9qcy9jb25maWcuanMiLCIuLi8uLi9qcy91dGlscy5qcyIsIi4uLy4uL2pzL3Byb2ZpbGUtdWkuanMiLCIuLi8uLi9qcy9saWJyYXJ5LXVpLmpzIiwiLi4vLi4vanMvbGlicmFyeS1tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb25maWd1cmF0aW9uIE1vZHVsZVxyXG4gKiBMb2FkcyBhbmQgcHJvdmlkZXMgYWNjZXNzIHRvIGRvY3VtZW50cy1jb25maWcuanNvbiwgaW5zdGl0dXRpb24tY29uZmlnLmpzb24sIGFuZCBqdXJpc2RpY3Rpb24tY29uZmlnLmpzb25cclxuICogT3B0aW1pemVkIHdpdGggYWdncmVzc2l2ZSBjYWNoaW5nIHRvIHJlZHVjZSBuZXR3b3JrIHJlcXVlc3RzXHJcbiAqIEluY2x1ZGVzIGNhY2hlLWJ1c3RpbmcgZm9yIGRldmVsb3BtZW50XHJcbiAqL1xyXG5cclxuLy8gQ2FjaGUgdmVyc2lvbiAtIGluY3JlbWVudCB0aGlzIHdoZW4gY29uZmlnIGZpbGVzIGNoYW5nZSB0byBidXN0IGNhY2hlXHJcbmNvbnN0IENBQ0hFX1ZFUlNJT04gPSAnMS4wLjAnO1xyXG5cclxubGV0IGNvbmZpZ0NhY2hlID0gbnVsbDtcclxubGV0IGluc3RpdHV0aW9uQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG5sZXQganVyaXNkaWN0aW9uQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG5sZXQgc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlID0gbnVsbDtcclxuXHJcbi8vIENhY2hlIHRpbWVzdGFtcHMgZm9yIFRUTC1iYXNlZCBpbnZhbGlkYXRpb25cclxuY29uc3QgQ0FDSEVfVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXHJcbmxldCBjYWNoZVRpbWVzdGFtcHMgPSB7XHJcbiAgZG9jdW1lbnRzOiAwLFxyXG4gIGluc3RpdHV0aW9uczogMCxcclxuICBqdXJpc2RpY3Rpb25zOiAwLFxyXG4gIHNxdWlyY2xlSWNvbnM6IDBcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBjYWNoZSBpcyBzdGlsbCB2YWxpZCBiYXNlZCBvbiBUVExcclxuICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlVHlwZSAtIFR5cGUgb2YgY2FjaGUgdG8gY2hlY2tcclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgY2FjaGUgaXMgdmFsaWRcclxuICovXHJcbmZ1bmN0aW9uIGlzQ2FjaGVWYWxpZChjYWNoZVR5cGUpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIHJldHVybiBjYWNoZVRpbWVzdGFtcHNbY2FjaGVUeXBlXSAmJiAobm93IC0gY2FjaGVUaW1lc3RhbXBzW2NhY2hlVHlwZV0gPCBDQUNIRV9UVEwpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGNhY2hlIHRpbWVzdGFtcFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVUeXBlIC0gVHlwZSBvZiBjYWNoZSB0byB1cGRhdGVcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUNhY2hlVGltZXN0YW1wKGNhY2hlVHlwZSkge1xyXG4gIGNhY2hlVGltZXN0YW1wc1tjYWNoZVR5cGVdID0gRGF0ZS5ub3coKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIHdpdGggY2FjaGluZyBhbmQgY2FjaGUtYnVzdGluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVVJMIHRvIGZldGNoXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlQ2FjaGVCdXN0aW5nIC0gV2hldGhlciB0byBhZGQgY2FjaGUtYnVzdGluZyBxdWVyeSBwYXJhbVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59IEZldGNoIHJlc3BvbnNlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhDYWNoZSh1cmwsIHVzZUNhY2hlQnVzdGluZyA9IHRydWUpIHtcclxuICAvLyBBZGQgY2FjaGUtYnVzdGluZyBxdWVyeSBwYXJhbSBiYXNlZCBvbiB2ZXJzaW9uIGFuZCB0aW1lc3RhbXBcclxuICBjb25zdCBjYWNoZUJ1c3RlciA9IHVzZUNhY2hlQnVzdGluZyBcclxuICAgID8gYD92PSR7Q0FDSEVfVkVSU0lPTn0mdD0ke0RhdGUubm93KCl9YCBcclxuICAgIDogYD90PSR7RGF0ZS5ub3coKX1gO1xyXG4gIFxyXG4gIHJldHVybiBmZXRjaCh1cmwgKyBjYWNoZUJ1c3Rlciwge1xyXG4gICAgY2FjaGU6ICduby1zdG9yZScsIC8vIFVzZSBuby1zdG9yZSB0byBsZXQgY2FjaGUtYnVzdGluZyBxdWVyeSBwYXJhbSBjb250cm9sIGNhY2hpbmdcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUgZG9jdW1lbnRzIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZERvY3VtZW50c0NvbmZpZygpIHtcclxuICBpZiAoY29uZmlnQ2FjaGUgJiYgaXNDYWNoZVZhbGlkKCdkb2N1bWVudHMnKSkge1xyXG4gICAgcmV0dXJuIGNvbmZpZ0NhY2hlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoQ2FjaGUoJ2NvbmZpZy9kb2N1bWVudHMtY29uZmlnLmpzb24nKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBjb25maWc6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uZmlnQ2FjaGUgPSBjb25maWc7XHJcbiAgICB1cGRhdGVDYWNoZVRpbWVzdGFtcCgnZG9jdW1lbnRzJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGRvY3VtZW50cyBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUgaW5zdGl0dXRpb24gY29uZmlndXJhdGlvbiBmcm9tIEpTT04gZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgaW5zdGl0dXRpb24gY29uZmlndXJhdGlvbiBvYmplY3RcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW5zdGl0dXRpb25Db25maWcoKSB7XHJcbiAgaWYgKGluc3RpdHV0aW9uQ29uZmlnQ2FjaGUgJiYgaXNDYWNoZVZhbGlkKCdpbnN0aXR1dGlvbnMnKSkge1xyXG4gICAgcmV0dXJuIGluc3RpdHV0aW9uQ29uZmlnQ2FjaGU7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhDYWNoZSgnY29uZmlnL2luc3RpdHV0aW9uLWNvbmZpZy5qc29uJyk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgaW5zdGl0dXRpb24gY29uZmlnOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGluc3RpdHV0aW9uQ29uZmlnQ2FjaGUgPSBjb25maWc7XHJcbiAgICB1cGRhdGVDYWNoZVRpbWVzdGFtcCgnaW5zdGl0dXRpb25zJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGluc3RpdHV0aW9uIGNvbmZpZzonLCBlcnJvcik7XHJcbiAgICAvLyBSZXR1cm4gZW1wdHkgY29uZmlnIG9uIGVycm9yIHRvIHByZXZlbnQgYnJlYWtpbmcgdGhlIFVJXHJcbiAgICByZXR1cm4geyBpbnN0aXR1dGlvbnM6IHt9IH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUganVyaXNkaWN0aW9uIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVGhlIGp1cmlzZGljdGlvbiBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRKdXJpc2RpY3Rpb25Db25maWcoKSB7XHJcbiAgaWYgKGp1cmlzZGljdGlvbkNvbmZpZ0NhY2hlICYmIGlzQ2FjaGVWYWxpZCgnanVyaXNkaWN0aW9ucycpKSB7XHJcbiAgICByZXR1cm4ganVyaXNkaWN0aW9uQ29uZmlnQ2FjaGU7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhDYWNoZSgnY29uZmlnL2p1cmlzZGljdGlvbi1jb25maWcuanNvbicpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGp1cmlzZGljdGlvbiBjb25maWc6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgXHJcbiAgICBqdXJpc2RpY3Rpb25Db25maWdDYWNoZSA9IGNvbmZpZztcclxuICAgIHVwZGF0ZUNhY2hlVGltZXN0YW1wKCdqdXJpc2RpY3Rpb25zJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGp1cmlzZGljdGlvbiBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgLy8gUmV0dXJuIGVtcHR5IGNvbmZpZyBvbiBlcnJvciB0byBwcmV2ZW50IGJyZWFraW5nIHRoZSBVSVxyXG4gICAgcmV0dXJuIHsganVyaXNkaWN0aW9uczoge30gfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgaW5zdGl0dXRpb24gbWV0YWRhdGEgYnkgZnVsbCBpbnN0aXR1dGlvbiBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnN0aXR1dGlvbk5hbWUgLSBUaGUgZnVsbCBpbnN0aXR1dGlvbiBuYW1lIChlLmcuLCBcIlVtbWFoIENhYmluZXQgW05vbi1Qcm9maXQg4oCiIFByaXZhdGVdXCIpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGluc3RpdHV0aW9uIG1ldGFkYXRhIG9yIG51bGwgaWYgbm90IGZvdW5kXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGl0dXRpb25NZXRhZGF0YShpbnN0aXR1dGlvbk5hbWUpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkSW5zdGl0dXRpb25Db25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmluc3RpdHV0aW9ucz8uW2luc3RpdHV0aW9uTmFtZV0gfHwgbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBqdXJpc2RpY3Rpb24gbWV0YWRhdGEgYnkgZnVsbCBqdXJpc2RpY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganVyaXNkaWN0aW9uTmFtZSAtIFRoZSBmdWxsIGp1cmlzZGljdGlvbiBuYW1lIChlLmcuLCBcIkJvcm5lbyBbUmVnaW9uXVwiKVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBqdXJpc2RpY3Rpb24gbWV0YWRhdGEgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRKdXJpc2RpY3Rpb25NZXRhZGF0YShqdXJpc2RpY3Rpb25OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZEp1cmlzZGljdGlvbkNvbmZpZygpO1xyXG4gIHJldHVybiBjb25maWcuanVyaXNkaWN0aW9ucz8uW2p1cmlzZGljdGlvbk5hbWVdIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIHZpc2libGUgZG9jdW1lbnRzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gQXJyYXkgb2YgZG9jdW1lbnQgb2JqZWN0c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50cygpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkRG9jdW1lbnRzQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5kb2N1bWVudHMuZmlsdGVyKGRvYyA9PiBkb2MudmlzaWJsZSAhPT0gZmFsc2UpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVuaXF1ZSBpdGVtcyBmcm9tIGFsbCBkb2N1bWVudHNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXk+fSBTb3J0ZWQgYXJyYXkgb2YgdW5pcXVlIGl0ZW1zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SXRlbXMoKSB7XHJcbiAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcbiAgY29uc3QgaXRlbXMgPSBuZXcgU2V0KGRvY3VtZW50cy5tYXAoZG9jID0+IGRvYy5pdGVtKSk7XHJcbiAgcmV0dXJuIFsuLi5pdGVtc10uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1bmlxdWUgaW5zdGl0dXRpb25zIGZyb20gYWxsIGRvY3VtZW50c1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IFNvcnRlZCBhcnJheSBvZiB1bmlxdWUgaW5zdGl0dXRpb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGl0dXRpb25zKCkge1xyXG4gIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGdldERvY3VtZW50cygpO1xyXG4gIGNvbnN0IGluc3RpdHV0aW9ucyA9IG5ldyBTZXQoZG9jdW1lbnRzLm1hcChkb2MgPT4gZG9jLmluc3RpdHV0aW9uKSk7XHJcbiAgcmV0dXJuIFsuLi5pbnN0aXR1dGlvbnNdLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdW5pcXVlIGp1cmlzZGljdGlvbnMgZnJvbSBhbGwgZG9jdW1lbnRzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gU29ydGVkIGFycmF5IG9mIHVuaXF1ZSBqdXJpc2RpY3Rpb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SnVyaXNkaWN0aW9ucygpIHtcclxuICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHMoKTtcclxuICBjb25zdCBqdXJpc2RpY3Rpb25zID0gbmV3IFNldChkb2N1bWVudHMubWFwKGRvYyA9PiBkb2MuanVyaXNkaWN0aW9uKSk7XHJcbiAgcmV0dXJuIFsuLi5qdXJpc2RpY3Rpb25zXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUgc3F1aXJjbGUgaWNvbnMgY29uZmlndXJhdGlvbiBmcm9tIEpTT04gZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgc3F1aXJjbGUgaWNvbnMgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkU3F1aXJjbGVJY29uc0NvbmZpZygpIHtcclxuICBpZiAoc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlICYmIGlzQ2FjaGVWYWxpZCgnc3F1aXJjbGVJY29ucycpKSB7XHJcbiAgICByZXR1cm4gc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoQ2FjaGUoJ2NvbmZpZy9zcXVpcmNsZS1pY29ucy1jb25maWcuanNvbicpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHNxdWlyY2xlIGljb25zIGNvbmZpZzogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBzcXVpcmNsZUljb25zQ29uZmlnQ2FjaGUgPSBjb25maWc7XHJcbiAgICB1cGRhdGVDYWNoZVRpbWVzdGFtcCgnc3F1aXJjbGVJY29ucycpO1xyXG4gICAgcmV0dXJuIGNvbmZpZztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBzcXVpcmNsZSBpY29ucyBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgLy8gUmV0dXJuIGVtcHR5IGNvbmZpZyBvbiBlcnJvciB0byBwcmV2ZW50IGJyZWFraW5nIHRoZSBVSVxyXG4gICAgcmV0dXJuIHsgaWNvbnM6IHt9IH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHNxdWlyY2xlIGljb24gbWV0YWRhdGEgYnkgaXRlbSBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtTmFtZSAtIFRoZSBpdGVtIG5hbWUgKGUuZy4sIFwiQm9va1wiLCBcIlBvbGljeVwiLCBcIkRlY2lzaW9uXCIpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGljb24gbWV0YWRhdGEgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTcXVpcmNsZUljb25NZXRhZGF0YShpdGVtTmFtZSkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWRTcXVpcmNsZUljb25zQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5pY29ucz8uW2l0ZW1OYW1lXSB8fCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogUHJlbG9hZCBhbGwgY29uZmlndXJhdGlvbnMgYXQgb25jZVxyXG4gKiBVc2VmdWwgZm9yIGluaXRpYWwgcGFnZSBsb2FkIHRvIGJhdGNoIHJlcXVlc3RzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IE9iamVjdCBjb250YWluaW5nIGFsbCBjb25maWdzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlbG9hZEFsbENvbmZpZ3MoKSB7XHJcbiAgY29uc3QgW2RvY3VtZW50cywgaW5zdGl0dXRpb25zLCBqdXJpc2RpY3Rpb25zLCBzcXVpcmNsZUljb25zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGxvYWREb2N1bWVudHNDb25maWcoKSxcclxuICAgIGxvYWRJbnN0aXR1dGlvbkNvbmZpZygpLFxyXG4gICAgbG9hZEp1cmlzZGljdGlvbkNvbmZpZygpLFxyXG4gICAgbG9hZFNxdWlyY2xlSWNvbnNDb25maWcoKVxyXG4gIF0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZG9jdW1lbnRzLFxyXG4gICAgaW5zdGl0dXRpb25zLFxyXG4gICAganVyaXNkaWN0aW9ucyxcclxuICAgIHNxdWlyY2xlSWNvbnNcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBjdXJyZW50IGNhY2hlIHZlcnNpb25cclxuICogQHJldHVybnMge3N0cmluZ30gQ3VycmVudCBjYWNoZSB2ZXJzaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVWZXJzaW9uKCkge1xyXG4gIHJldHVybiBDQUNIRV9WRVJTSU9OO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGEgbmV3IGNhY2hlIHZlcnNpb24gdG8gYnVzdCBhbGwgY2FjaGVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJzaW9uIC0gTmV3IHZlcnNpb24gc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q2FjaGVWZXJzaW9uKHZlcnNpb24pIHtcclxuICAvLyBDbGVhciBhbGwgY2FjaGVzIHdoZW4gdmVyc2lvbiBjaGFuZ2VzXHJcbiAgY2xlYXJDb25maWdDYWNoZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgdGhlIGNvbmZpZyBjYWNoZSAodXNlZnVsIGZvciB0ZXN0aW5nIG9yIGhvdC1yZWxvYWQpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJDb25maWdDYWNoZSgpIHtcclxuICBjb25maWdDYWNoZSA9IG51bGw7XHJcbiAgaW5zdGl0dXRpb25Db25maWdDYWNoZSA9IG51bGw7XHJcbiAganVyaXNkaWN0aW9uQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG4gIHNxdWlyY2xlSWNvbnNDb25maWdDYWNoZSA9IG51bGw7XHJcbiAgY2FjaGVUaW1lc3RhbXBzID0ge1xyXG4gICAgZG9jdW1lbnRzOiAwLFxyXG4gICAgaW5zdGl0dXRpb25zOiAwLFxyXG4gICAganVyaXNkaWN0aW9uczogMCxcclxuICAgIHNxdWlyY2xlSWNvbnM6IDBcclxuICB9O1xyXG59XHJcblxyXG4vLyBFeHBvc2UgY2FjaGUgdXRpbGl0aWVzIGdsb2JhbGx5IGZvciBkZXZlbG9wbWVudCAoY2FuIGJlIGNhbGxlZCBmcm9tIGJyb3dzZXIgY29uc29sZSlcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgd2luZG93LmNsZWFyQ29uZmlnQ2FjaGUgPSBjbGVhckNvbmZpZ0NhY2hlO1xyXG4gIHdpbmRvdy5nZXRDYWNoZVZlcnNpb24gPSBnZXRDYWNoZVZlcnNpb247XHJcbiAgd2luZG93LnNldENhY2hlVmVyc2lvbiA9IHNldENhY2hlVmVyc2lvbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBpbnN0aXR1dGlvbiBmZWVkIGNvbmZpZ3VyYXRpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IGluc3RpdHV0aW9uTmFtZSAtIFRoZSBmdWxsIGluc3RpdHV0aW9uIG5hbWVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBUaGUgZmVlZCBjb25maWcgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnN0aXR1dGlvbkZlZWRDb25maWcoaW5zdGl0dXRpb25OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZEluc3RpdHV0aW9uQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5pbnN0aXR1dGlvbnM/LltpbnN0aXR1dGlvbk5hbWVdPy5mZWVkX2NvbmZpZyB8fCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGp1cmlzZGljdGlvbiBmZWVkIGNvbmZpZ3VyYXRpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IGp1cmlzZGljdGlvbk5hbWUgLSBUaGUgZnVsbCBqdXJpc2RpY3Rpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBmZWVkIGNvbmZpZyBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEp1cmlzZGljdGlvbkZlZWRDb25maWcoanVyaXNkaWN0aW9uTmFtZSkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWRKdXJpc2RpY3Rpb25Db25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmp1cmlzZGljdGlvbnM/LltqdXJpc2RpY3Rpb25OYW1lXT8uZmVlZF9jb25maWcgfHwgbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBkb2N1bWVudCBieSBJRFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCBJRFxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBkb2N1bWVudCBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREb2N1bWVudEJ5SWQoZG9jdW1lbnRJZCkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWREb2N1bWVudHNDb25maWcoKTtcclxuICBjb25zdCBkb2MgPSBjb25maWcuZG9jdW1lbnRzLmZpbmQoZG9jID0+IGRvYy5pZCA9PT0gZG9jdW1lbnRJZCkgfHwgbnVsbDtcclxuICByZXR1cm4gZG9jO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IEZlZWQtdHlwZSBkb2N1bWVudHMgKGNhcm91c2VsIGVudHJpZXMpIGZvciBhIGdpdmVuIHByb2ZpbGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHByb2ZpbGVUeXBlIC0gJ2luc3RpdHV0aW9uJyBvciAnanVyaXNkaWN0aW9uJ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvZmlsZU5hbWUgLSBUaGUgZnVsbCBpbnN0aXR1dGlvbiBvciBqdXJpc2RpY3Rpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IEFycmF5IG9mIEZlZWQgZG9jdW1lbnQgb2JqZWN0cyB3aXRoIHJlc29sdmVkIGxpbmtlZCBkb2N1bWVudHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGZWVkRG9jdW1lbnRzKHByb2ZpbGVUeXBlLCBwcm9maWxlTmFtZSkge1xyXG4gIGNvbnN0IGFsbERvY3MgPSBhd2FpdCBnZXREb2N1bWVudHMoKTtcclxuICBjb25zdCBmZWVkRG9jcyA9IGFsbERvY3MuZmlsdGVyKGRvYyA9PiB7XHJcbiAgICBpZiAoZG9jLml0ZW0gIT09ICdGZWVkJykgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHByb2ZpbGVUeXBlID09PSAnaW5zdGl0dXRpb24nKSByZXR1cm4gZG9jLmluc3RpdHV0aW9uID09PSBwcm9maWxlTmFtZTtcclxuICAgIGlmIChwcm9maWxlVHlwZSA9PT0gJ2p1cmlzZGljdGlvbicpIHJldHVybiBkb2MuanVyaXNkaWN0aW9uID09PSBwcm9maWxlTmFtZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgLy8gUmVzb2x2ZSBsaW5rZWQgZG9jdW1lbnRzIGZvciBlYWNoIGZlZWQgZW50cnlcclxuICBjb25zdCByZXNvbHZlZCA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgZmVlZERvY3MubWFwKGFzeW5jIChmZWVkRG9jKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpbmtlZERvYyA9IGZlZWREb2MuY2Fyb3VzZWw/LmxpbmtlZF9kb2N1bWVudF9pZFxyXG4gICAgICAgID8gYXdhaXQgZ2V0RG9jdW1lbnRCeUlkKGZlZWREb2MuY2Fyb3VzZWwubGlua2VkX2RvY3VtZW50X2lkKVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5mZWVkRG9jLFxyXG4gICAgICAgIGxpbmtlZERvY3VtZW50OiBsaW5rZWREb2NcclxuICAgICAgfTtcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJlc29sdmVkO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBVdGlsaXR5IEZ1bmN0aW9uc1xyXG4gKiBTaGFyZWQgaGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIGRvY3VtZW50IG1hbmFnZW1lbnQgc3lzdGVtXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlIFVSTCBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIGZpbHRlciBwYXJhbWV0ZXJzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVBhcmFtcygpIHtcclxuICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gIHJldHVybiB7XHJcbiAgICBpdGVtOiBwYXJhbXMuZ2V0KCdpdGVtJyksXHJcbiAgICBpbnN0aXR1dGlvbjogcGFyYW1zLmdldCgnaW5zdGl0dXRpb24nKSxcclxuICAgIGp1cmlzZGljdGlvbjogcGFyYW1zLmdldCgnanVyaXNkaWN0aW9uJylcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgaGFzaC1iYXNlZCBVUkwgcGFyYW1ldGVycyAoZm9yIGNsaWVudC1zaWRlIHJvdXRpbmcgY29tcGF0aWJpbGl0eSlcclxuICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgZmlsdGVyIHBhcmFtZXRlcnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUhhc2hQYXJhbXMoKSB7XHJcbiAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpOyAvLyBSZW1vdmUgI1xyXG4gIGlmICghaGFzaCkgcmV0dXJuIHsgaXRlbTogbnVsbCwgaW5zdGl0dXRpb246IG51bGwsIGp1cmlzZGljdGlvbjogbnVsbCB9O1xyXG4gIFxyXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaGFzaCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGl0ZW06IHBhcmFtcy5nZXQoJ2l0ZW0nKSxcclxuICAgIGluc3RpdHV0aW9uOiBwYXJhbXMuZ2V0KCdpbnN0aXR1dGlvbicpLFxyXG4gICAganVyaXNkaWN0aW9uOiBwYXJhbXMuZ2V0KCdqdXJpc2RpY3Rpb24nKVxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCdWlsZCBhIGZpbHRlciBVUkwgZm9yIHRoZSBsaWJyYXJ5IHBhZ2VcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBGaWx0ZXIgdHlwZSAoaXRlbSwgaW5zdGl0dXRpb24sIGp1cmlzZGljdGlvbilcclxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gRmlsdGVyIHZhbHVlXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNBbGwgLSBXaGV0aGVyIHRoaXMgaXMgdGhlIFwiQWxsXCIgb3B0aW9uIChubyBmaWx0ZXIpXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFVSTCB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZpbHRlclVybCh0eXBlLCB2YWx1ZSwgaXNBbGwgPSBmYWxzZSkge1xyXG4gIGlmIChpc0FsbCkge1xyXG4gICAgcmV0dXJuICdsaWJyYXJ5Lmh0bWwnO1xyXG4gIH1cclxuICByZXR1cm4gYGxpYnJhcnkuaHRtbD8ke3R5cGV9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IGEgZGF0ZSBzdHJpbmcgZm9yIGRpc3BsYXlcclxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGVTdHJpbmcgLSBJU08gZGF0ZSBzdHJpbmdcclxuICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIGRhdGUgc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlU3RyaW5nKSB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xyXG4gIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcclxuICBjb25zdCBtb250aCA9IGRhdGUudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyBtb250aDogJ3Nob3J0JyB9KTtcclxuICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcclxuICBjb25zdCBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xyXG5cclxuICByZXR1cm4gYCR7ZGF5fSAke21vbnRofSAke3llYXJ9IHwgJHtob3Vyc306JHttaW51dGVzfWA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTb3J0IGRvY3VtZW50cyBieSBmaWVsZFxyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBBcnJheSBvZiBkb2N1bWVudCBvYmplY3RzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBGaWVsZCB0byBzb3J0IGJ5IChuYW1lLCB2ZXJzaW9uLCBkYXRlKVxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IFNvcnRlZCBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNvcnREb2N1bWVudHMoZG9jdW1lbnRzLCBzb3J0QnkpIHtcclxuICBjb25zdCBzb3J0ZWQgPSBbLi4uZG9jdW1lbnRzXTtcclxuXHJcbiAgc3dpdGNoIChzb3J0QnkpIHtcclxuICAgIGNhc2UgJ25hbWUnOlxyXG4gICAgICByZXR1cm4gc29ydGVkLnNvcnQoKGEsIGIpID0+IGEudGl0bGUubG9jYWxlQ29tcGFyZShiLnRpdGxlKSk7XHJcblxyXG4gICAgY2FzZSAndmVyc2lvbic6XHJcbiAgICAgIHJldHVybiBzb3J0ZWQuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb25EaWZmID0gYi52ZXJzaW9uIC0gYS52ZXJzaW9uO1xyXG4gICAgICAgIGlmICh2ZXJzaW9uRGlmZiAhPT0gMCkgcmV0dXJuIHZlcnNpb25EaWZmO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShiLmRhdGUpIC0gbmV3IERhdGUoYS5kYXRlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgY2FzZSAnZGF0ZSc6XHJcbiAgICAgIHJldHVybiBzb3J0ZWQuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5kYXRlKSAtIG5ldyBEYXRlKGEuZGF0ZSkpO1xyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBzb3J0ZWQ7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRmlsdGVyIGRvY3VtZW50cyBiYXNlZCBvbiBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGRvY3VtZW50cyAtIEFycmF5IG9mIGRvY3VtZW50IG9iamVjdHNcclxuICogQHBhcmFtIHtPYmplY3R9IGZpbHRlcnMgLSBGaWx0ZXIgY3JpdGVyaWFcclxuICogQHJldHVybnMge0FycmF5fSBGaWx0ZXJlZCBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckRvY3VtZW50cyhkb2N1bWVudHMsIGZpbHRlcnMpIHtcclxuICByZXR1cm4gZG9jdW1lbnRzLmZpbHRlcihkb2MgPT4ge1xyXG4gICAgaWYgKGZpbHRlcnMuaXRlbSAmJiBkb2MuaXRlbS50b0xvd2VyQ2FzZSgpICE9PSBmaWx0ZXJzLml0ZW0udG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVycy5pbnN0aXR1dGlvbiAmJiBkb2MuaW5zdGl0dXRpb24udG9Mb3dlckNhc2UoKSAhPT0gZmlsdGVycy5pbnN0aXR1dGlvbi50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLmp1cmlzZGljdGlvbiAmJiBkb2MuanVyaXNkaWN0aW9uLnRvTG93ZXJDYXNlKCkgIT09IGZpbHRlcnMuanVyaXNkaWN0aW9uLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFc2NhcGUgSFRNTCB0byBwcmV2ZW50IFhTU1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRleHQgdG8gZXNjYXBlXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEVzY2FwZWQgdGV4dFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUh0bWwodGV4dCkge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgcmV0dXJuIGRpdi5pbm5lckhUTUw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEVycm9yIG1lc3NhZ2UgdG8gZGlzcGxheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlKSB7XHJcbiAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcclxuXHJcbiAgLy8gQ3JlYXRlIGVycm9yIGVsZW1lbnRcclxuICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGVycm9yRGl2LmNsYXNzTmFtZSA9ICdlcnJvci1tZXNzYWdlJztcclxuICBlcnJvckRpdi5zdHlsZS5jc3NUZXh0ID0gYFxyXG4gICAgYmFja2dyb3VuZDogI2ZlZTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNmY2M7XHJcbiAgICBjb2xvcjogI2MwMDtcclxuICAgIHBhZGRpbmc6IDFyZW07XHJcbiAgICBtYXJnaW46IDFyZW07XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgYDtcclxuICBlcnJvckRpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcblxyXG4gIC8vIEluc2VydCBhdCB0b3Agb2YgYm9keVxyXG4gIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGVycm9yRGl2LCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpO1xyXG5cclxuICAvLyBBdXRvLXJlbW92ZSBhZnRlciA1IHNlY29uZHNcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGVycm9yRGl2LnJlbW92ZSgpO1xyXG4gIH0sIDUwMDApO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBQcm9maWxlIFVJIE1vZHVsZVxyXG4gKiBIYW5kbGVzIHJlbmRlcmluZyBhbmQgaW50ZXJhY3Rpb24gZm9yIHNvY2lhbCBtZWRpYS1zdHlsZSBwcm9maWxlIHZpZXdzXHJcbiAqIFVzZWQgb24gbGlicmFyeS5odG1sIHdoZW4gaW5zdGl0dXRpb24gb3IganVyaXNkaWN0aW9uIGZpbHRlciBpcyBhY3RpdmVcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gIGdldEluc3RpdHV0aW9uTWV0YWRhdGEsXHJcbiAgZ2V0SnVyaXNkaWN0aW9uTWV0YWRhdGEsXHJcbiAgZ2V0RG9jdW1lbnRzLFxyXG4gIGdldEZlZWREb2N1bWVudHMsXHJcbiAgZ2V0RG9jdW1lbnRCeUlkLFxyXG59IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgeyBwYXJzZVF1ZXJ5UGFyYW1zLCBwYXJzZUhhc2hQYXJhbXMsIGVzY2FwZUh0bWwgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xyXG5cclxuLy8gUHJvZmlsZSBzdGF0ZVxyXG5jb25zdCBwcm9maWxlU3RhdGUgPSB7XHJcbiAgcHJvZmlsZVR5cGU6IG51bGwsIC8vICdpbnN0aXR1dGlvbicgb3IgJ2p1cmlzZGljdGlvbidcclxuICBwcm9maWxlTmFtZTogbnVsbCwgLy8gaW5zdGl0dXRpb24gb3IganVyaXNkaWN0aW9uIG5hbWVcclxuICBjdXJyZW50RmlsdGVyOiBcIkZlZWRcIiwgLy8gZGVmYXVsdCB0byBGZWVkOyBhbHNvIHN1cHBvcnRzICdhbGwnLCAnQm9vaycsICdQb2xpY3knLCAnRGVjaXNpb24nLCBldGMuXHJcbiAgZG9jdW1lbnRzOiBbXSxcclxuICBwcm9maWxlRGF0YTogbnVsbCxcclxuICBhdmFpbGFibGVUeXBlczogW10sXHJcbn07XHJcblxyXG4vLyBDYWxsYmFjayBmb3IgZmlsdGVyIGNoYW5nZXNcclxubGV0IG9uRmlsdGVyQ2hhbmdlQ2FsbGJhY2sgPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIEV4dHJhY3QgbGFiZWwgZnJvbSBicmFja2V0ZWQgc3VmZml4IGluIG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBGdWxsIG5hbWUgd2l0aCBicmFja2V0ZWQgbGFiZWxcclxuICogQHJldHVybnMge09iamVjdH0geyBuYW1lOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfVxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdExhYmVsKG5hbWUpIHtcclxuICBjb25zdCBtYXRjaCA9IG5hbWUubWF0Y2goL14oLis/KVxccypcXFsoLio/KVxcXVxccyokLyk7XHJcbiAgaWYgKG1hdGNoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiBtYXRjaFsxXS50cmltKCksXHJcbiAgICAgIGxhYmVsOiBtYXRjaFsyXS50cmltKCksXHJcbiAgICB9O1xyXG4gIH1cclxuICByZXR1cm4geyBuYW1lOiBuYW1lLnRyaW0oKSwgbGFiZWw6IFwiXCIgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvdW50IGRvY3VtZW50cyBmb3IgYW4gaW5zdGl0dXRpb25cclxuICogQHBhcmFtIHtBcnJheX0gZG9jdW1lbnRzIC0gQWxsIGRvY3VtZW50c1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5zdGl0dXRpb25OYW1lIC0gSW5zdGl0dXRpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBEb2N1bWVudCBjb3VudFxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRJbnN0aXR1dGlvbkRvY3VtZW50cyhkb2N1bWVudHMsIGluc3RpdHV0aW9uTmFtZSkge1xyXG4gIHJldHVybiBkb2N1bWVudHMuZmlsdGVyKChkb2MpID0+IGRvYy5pbnN0aXR1dGlvbiA9PT0gaW5zdGl0dXRpb25OYW1lKS5sZW5ndGg7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb3VudCB1bmlxdWUgY29udHJpYnV0b3JzIChpbnN0aXR1dGlvbnMpIGZvciBhIGp1cmlzZGljdGlvblxyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBBbGwgZG9jdW1lbnRzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBqdXJpc2RpY3Rpb25OYW1lIC0gSnVyaXNkaWN0aW9uIG5hbWVcclxuICogQHJldHVybnMge251bWJlcn0gVW5pcXVlIGluc3RpdHV0aW9uIGNvdW50XHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEp1cmlzZGljdGlvbkNvbnRyaWJ1dG9ycyhkb2N1bWVudHMsIGp1cmlzZGljdGlvbk5hbWUpIHtcclxuICBjb25zdCBpbnN0aXR1dGlvbnMgPSBuZXcgU2V0KFxyXG4gICAgZG9jdW1lbnRzXHJcbiAgICAgIC5maWx0ZXIoKGRvYykgPT4gZG9jLmp1cmlzZGljdGlvbiA9PT0ganVyaXNkaWN0aW9uTmFtZSlcclxuICAgICAgLm1hcCgoZG9jKSA9PiBkb2MuaW5zdGl0dXRpb24pLFxyXG4gICk7XHJcbiAgcmV0dXJuIGluc3RpdHV0aW9ucy5zaXplO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVuaXF1ZSBkb2N1bWVudCB0eXBlcyBmcm9tIGRvY3VtZW50c1xyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBGaWx0ZXJlZCBkb2N1bWVudHNcclxuICogQHJldHVybnMge0FycmF5fSBTb3J0ZWQgYXJyYXkgb2YgdW5pcXVlIHR5cGVzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXREb2N1bWVudFR5cGVzKGRvY3VtZW50cykge1xyXG4gIGNvbnN0IHR5cGVzID0gbmV3IFNldChkb2N1bWVudHMubWFwKChkb2MpID0+IGRvYy5pdGVtKSk7XHJcbiAgcmV0dXJuIFtcImFsbFwiLCAuLi5bLi4udHlwZXNdLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSldO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgcHJvZmlsZSB2aWV3IHNob3VsZCBiZSBzaG93biBiYXNlZCBvbiBVUkwgcGFyYW1zXHJcbiAqIEByZXR1cm5zIHtPYmplY3R8bnVsbH0gUHJvZmlsZSBpbmZvIG9yIG51bGwgaWYgbm8gcHJvZmlsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdFByb2ZpbGVNb2RlKCkge1xyXG4gIC8vIFRyeSBxdWVyeSBwYXJhbXMgZmlyc3RcclxuICBsZXQgcGFyYW1zID0gcGFyc2VRdWVyeVBhcmFtcygpO1xyXG5cclxuICAvLyBJZiBubyBwYXJhbXMgaW4gcXVlcnksIHRyeSBoYXNoIHBhcmFtc1xyXG4gIGlmICghcGFyYW1zLmluc3RpdHV0aW9uICYmICFwYXJhbXMuanVyaXNkaWN0aW9uKSB7XHJcbiAgICBwYXJhbXMgPSBwYXJzZUhhc2hQYXJhbXMoKTtcclxuICB9XHJcblxyXG4gIGlmIChwYXJhbXMuaW5zdGl0dXRpb24pIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwiaW5zdGl0dXRpb25cIixcclxuICAgICAgbmFtZTogcGFyYW1zLmluc3RpdHV0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGlmIChwYXJhbXMuanVyaXNkaWN0aW9uKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBcImp1cmlzZGljdGlvblwiLFxyXG4gICAgICBuYW1lOiBwYXJhbXMuanVyaXNkaWN0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgcHJvZmlsZSBVSVxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZpbHRlckNoYW5nZSAtIENhbGxiYWNrIHdoZW4gZmlsdGVyIGNoYW5nZXNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplUHJvZmlsZVVJKG9uRmlsdGVyQ2hhbmdlKSB7XHJcbiAgb25GaWx0ZXJDaGFuZ2VDYWxsYmFjayA9IG9uRmlsdGVyQ2hhbmdlO1xyXG5cclxuICBjb25zdCBwcm9maWxlSW5mbyA9IGRldGVjdFByb2ZpbGVNb2RlKCk7XHJcbiAgaWYgKCFwcm9maWxlSW5mbykge1xyXG4gICAgLy8gTm8gcHJvZmlsZSBtb2RlLCBoaWRlIHByb2ZpbGUgY29udGFpbmVyXHJcbiAgICBoaWRlUHJvZmlsZUNvbnRhaW5lcigpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgcHJvZmlsZVN0YXRlLnByb2ZpbGVUeXBlID0gcHJvZmlsZUluZm8udHlwZTtcclxuICBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUgPSBwcm9maWxlSW5mby5uYW1lO1xyXG5cclxuICAvLyBMb2FkIGFsbCBkb2N1bWVudHMgdG8gY2FsY3VsYXRlIGNvdW50cyBhbmQgZ2V0IHR5cGVzXHJcbiAgY29uc3QgYWxsRG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcbiAgcHJvZmlsZVN0YXRlLmRvY3VtZW50cyA9IGFsbERvY3VtZW50cy5maWx0ZXIoKGRvYykgPT4ge1xyXG4gICAgaWYgKHByb2ZpbGVTdGF0ZS5wcm9maWxlVHlwZSA9PT0gXCJpbnN0aXR1dGlvblwiKSB7XHJcbiAgICAgIHJldHVybiBkb2MuaW5zdGl0dXRpb24gPT09IHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBkb2MuanVyaXNkaWN0aW9uID09PSBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHByb2ZpbGVTdGF0ZS5hdmFpbGFibGVUeXBlcyA9IGdldERvY3VtZW50VHlwZXMocHJvZmlsZVN0YXRlLmRvY3VtZW50cyk7XHJcblxyXG4gIC8vIFNldCBkZWZhdWx0IGZpbHRlcjogXCJGZWVkXCIgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgXCJhbGxcIlxyXG4gIGlmIChwcm9maWxlU3RhdGUuYXZhaWxhYmxlVHlwZXMuaW5jbHVkZXMoXCJGZWVkXCIpKSB7XHJcbiAgICBwcm9maWxlU3RhdGUuY3VycmVudEZpbHRlciA9IFwiRmVlZFwiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwcm9maWxlU3RhdGUuY3VycmVudEZpbHRlciA9IFwiYWxsXCI7XHJcbiAgfVxyXG5cclxuICAvLyBMb2FkIHByb2ZpbGUgbWV0YWRhdGFcclxuICBpZiAocHJvZmlsZVN0YXRlLnByb2ZpbGVUeXBlID09PSBcImluc3RpdHV0aW9uXCIpIHtcclxuICAgIHByb2ZpbGVTdGF0ZS5wcm9maWxlRGF0YSA9IGF3YWl0IGdldEluc3RpdHV0aW9uTWV0YWRhdGEoXHJcbiAgICAgIHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZSxcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHByb2ZpbGVTdGF0ZS5wcm9maWxlRGF0YSA9IGF3YWl0IGdldEp1cmlzZGljdGlvbk1ldGFkYXRhKFxyXG4gICAgICBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVuZGVyIHByb2ZpbGVcclxuICByZW5kZXJQcm9maWxlKCk7XHJcbiAgcmVuZGVyRmlsdGVyUGlsbHMoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZGUgdGhlIHByb2ZpbGUgY29udGFpbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBoaWRlUHJvZmlsZUNvbnRhaW5lcigpIHtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtY29udGFpbmVyXCIpO1xyXG4gIGlmIChjb250YWluZXIpIHtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3cgdGhlIHByb2ZpbGUgY29udGFpbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93UHJvZmlsZUNvbnRhaW5lcigpIHtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtY29udGFpbmVyXCIpO1xyXG4gIGlmIChjb250YWluZXIpIHtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbmRlciB0aGUgcHJvZmlsZSBoZWFkZXJcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlclByb2ZpbGUoKSB7XHJcbiAgc2hvd1Byb2ZpbGVDb250YWluZXIoKTtcclxuXHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWhlYWRlclwiKTtcclxuICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICBjb25zdCB7IG5hbWUsIGxhYmVsIH0gPSBleHRyYWN0TGFiZWwocHJvZmlsZVN0YXRlLnByb2ZpbGVOYW1lKTtcclxuICBjb25zdCBtZXRhZGF0YSA9IHByb2ZpbGVTdGF0ZS5wcm9maWxlRGF0YSB8fCB7fTtcclxuXHJcbiAgLy8gR2V0IGNvdmVyIGFuZCBhdmF0YXIgd2l0aCBmYWxsYmFja3NcclxuICBjb25zdCBjb3ZlclVybCA9IG1ldGFkYXRhLmNvdmVyIHx8IFwiLi9pbWFnZXMvZGVmYXVsdC1jb3Zlci5qcGdcIjtcclxuICBjb25zdCBhdmF0YXJVcmwgPSBtZXRhZGF0YS5hdmF0YXIgfHwgXCIuL2ltYWdlcy9kZWZhdWx0LWF2YXRhci53ZWJwXCI7XHJcbiAgY29uc3QgYmlvID0gbWV0YWRhdGEuYmlvIHx8IFwiXCI7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBjb3VudFxyXG4gIGxldCBjb3VudFRleHQgPSBcIlwiO1xyXG4gIGlmIChwcm9maWxlU3RhdGUucHJvZmlsZVR5cGUgPT09IFwiaW5zdGl0dXRpb25cIikge1xyXG4gICAgY29uc3QgY291bnQgPSBjb3VudEluc3RpdHV0aW9uRG9jdW1lbnRzKFxyXG4gICAgICBwcm9maWxlU3RhdGUuZG9jdW1lbnRzLFxyXG4gICAgICBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUsXHJcbiAgICApO1xyXG4gICAgY291bnRUZXh0ID0gYCR7Y291bnR9IENvbnRyaWJ1dGlvbnNgO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBjb3VudCA9IGNvdW50SnVyaXNkaWN0aW9uQ29udHJpYnV0b3JzKFxyXG4gICAgICBwcm9maWxlU3RhdGUuZG9jdW1lbnRzLFxyXG4gICAgICBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUsXHJcbiAgICApO1xyXG4gICAgY291bnRUZXh0ID0gYCR7Y291bnR9IENvbnRyaWJ1dG9yc2A7XHJcbiAgfVxyXG5cclxuICBjb25zdCBidXR0b25UZXh0ID0gcHJvZmlsZVN0YXRlLnByb2ZpbGVUeXBlID09PSBcImluc3RpdHV0aW9uXCIgPyBcIkNvbnRhY3RcIiA6IFwiQ29udHJpYnV0b3JzXCI7XHJcblxyXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwicHJvZmlsZS1jb3ZlclwiPlxyXG4gICAgICA8aW1nIHNyYz1cIiR7ZXNjYXBlSHRtbChjb3ZlclVybCl9XCIgYWx0PVwiQ292ZXJcIiBsb2FkaW5nPVwibGF6eVwiIGRlY29kaW5nPVwiYXN5bmNcIiAvPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwicHJvZmlsZS1pbmZvXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLWhlYWRlci1yb3dcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZmlsZS1hdmF0YXJcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiJHtlc2NhcGVIdG1sKGF2YXRhclVybCl9XCIgYWx0PVwiJHtlc2NhcGVIdG1sKG5hbWUpfVwiIGxvYWRpbmc9XCJlYWdlclwiIGZldGNocHJpb3JpdHk9XCJoaWdoXCIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZmlsZS1hY3Rpb25zXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHJvZmlsZS1idXR0b25cIiBpZD1cInByb2ZpbGUtYWN0aW9uLWJ0blwiPiR7ZXNjYXBlSHRtbChidXR0b25UZXh0KX08L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLWRldGFpbHMtc2VjdGlvblwiPlxyXG4gICAgICAgIDxoMSBjbGFzcz1cInByb2ZpbGUtbmFtZVwiPiR7ZXNjYXBlSHRtbChuYW1lKX08L2gxPlxyXG4gICAgICAgICR7bGFiZWwgPyBgPHNwYW4gY2xhc3M9XCJwcm9maWxlLWxhYmVsXCI+JHtlc2NhcGVIdG1sKGxhYmVsKX08L3NwYW4+YCA6IFwiXCJ9XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9maWxlLWNvdW50XCI+JHtlc2NhcGVIdG1sKGNvdW50VGV4dCl9PC9zcGFuPlxyXG4gICAgICAgICR7YmlvID8gYDxwIGNsYXNzPVwicHJvZmlsZS1iaW9cIj4ke2VzY2FwZUh0bWwoYmlvKX08L3A+YCA6IFwiXCJ9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYDtcclxuXHJcbiAgLy8gQWRkIGNsaWNrIGhhbmRsZXIgZm9yIHRoZSBhY3Rpb24gYnV0dG9uXHJcbiAgY29uc3QgYWN0aW9uQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWFjdGlvbi1idG5cIik7XHJcbiAgaWYgKGFjdGlvbkJ0bikge1xyXG4gICAgYWN0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVBY3Rpb25CdXR0b25DbGljayk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVyIHRoZSBmaWx0ZXIgcGlsbHNcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckZpbHRlclBpbGxzKCkge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1maWx0ZXJzXCIpO1xyXG4gIGlmICghY29udGFpbmVyKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IHR5cGVzID0gcHJvZmlsZVN0YXRlLmF2YWlsYWJsZVR5cGVzO1xyXG5cclxuICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cImZpbHRlci1waWxscy1jb250YWluZXJcIj5cclxuICAgICAgJHt0eXBlc1xyXG4gICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAodHlwZSkgPT4gYFxyXG4gICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICBjbGFzcz1cImZpbHRlci1waWxsICR7dHlwZSA9PT0gcHJvZmlsZVN0YXRlLmN1cnJlbnRGaWx0ZXIgPyBcImFjdGl2ZVwiIDogXCJcIn1cIiBcclxuICAgICAgICAgIGRhdGEtdHlwZT1cIiR7ZXNjYXBlSHRtbCh0eXBlKX1cIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsdGVyLXBpbGwtaWNvblwiPlxyXG4gICAgICAgICAgICAke2dldFR5cGVJY29uKHR5cGUpfVxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWx0ZXItcGlsbC1sYWJlbFwiPiR7ZXNjYXBlSHRtbChjYXBpdGFsaXplRmlyc3QodHlwZSkpfTwvc3Bhbj5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgYCxcclxuICAgICAgICApXHJcbiAgICAgICAgLmpvaW4oXCJcIil9XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG5cclxuICAvLyBBZGQgY2xpY2sgaGFuZGxlcnNcclxuICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXItcGlsbFwiKS5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0eXBlID0gYnRuLmRhdGFzZXQudHlwZTtcclxuICAgICAgc2V0RmlsdGVyKHR5cGUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgaWNvbiBmb3IgZG9jdW1lbnQgdHlwZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIERvY3VtZW50IHR5cGVcclxuICogQHJldHVybnMge3N0cmluZ30gSWNvbiBIVE1MXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRUeXBlSWNvbih0eXBlKSB7XHJcbiAgY29uc3QgaWNvbnMgPSB7XHJcbiAgICBhbGw6IFwi8J+TglwiLFxyXG4gICAgZmVlZDogXCLwn5OwXCIsXHJcbiAgICBib29rOiBcIvCfk5pcIixcclxuICAgIGd1aWRlbGluZTogXCLwn5KOXCIsXHJcbiAgICBwb2xpY3k6IFwi8J+Ti1wiLFxyXG4gICAgZGVjaXNpb246IFwi4oS577iPXCIsXHJcbiAgICB2ZXJkaWN0OiBcIuKalu+4j1wiLFxyXG4gICAgbm90ZTogXCLwn5OOXCIsXHJcbiAgfTtcclxuICByZXR1cm4gaWNvbnNbdHlwZS50b0xvd2VyQ2FzZSgpXSB8fCBcIvCfk4RcIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENhcGl0YWxpemUgZmlyc3QgbGV0dGVyXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBTdHJpbmcgdG8gY2FwaXRhbGl6ZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDYXBpdGFsaXplZCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHIpIHtcclxuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBjdXJyZW50IGZpbHRlclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEZpbHRlciB0eXBlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRGaWx0ZXIodHlwZSkge1xyXG4gIHByb2ZpbGVTdGF0ZS5jdXJyZW50RmlsdGVyID0gdHlwZTtcclxuXHJcbiAgLy8gVXBkYXRlIFVJXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXItcGlsbFwiKS5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIsIGJ0bi5kYXRhc2V0LnR5cGUgPT09IHR5cGUpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBOb3RpZnkgY2FsbGJhY2tcclxuICBpZiAob25GaWx0ZXJDaGFuZ2VDYWxsYmFjaykge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2VDYWxsYmFjayh0eXBlKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGN1cnJlbnQgZmlsdGVyXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEN1cnJlbnQgZmlsdGVyIHR5cGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RmlsdGVyKCkge1xyXG4gIHJldHVybiBwcm9maWxlU3RhdGUuY3VycmVudEZpbHRlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBmaWx0ZXJlZCBkb2N1bWVudHMgYmFzZWQgb24gY3VycmVudCBmaWx0ZXJcclxuICogQHJldHVybnMge0FycmF5fSBGaWx0ZXJlZCBkb2N1bWVudHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJlZERvY3VtZW50cygpIHtcclxuICBpZiAocHJvZmlsZVN0YXRlLmN1cnJlbnRGaWx0ZXIgPT09IFwiYWxsXCIpIHtcclxuICAgIC8vIEV4Y2x1ZGUgRmVlZC10eXBlIGRvY3VtZW50cyBmcm9tIFwiYWxsXCIg4oCUIHRoZXkgYXJlIHNob3duIGFzIGNhcm91c2VsXHJcbiAgICByZXR1cm4gcHJvZmlsZVN0YXRlLmRvY3VtZW50cy5maWx0ZXIoKGRvYykgPT4gZG9jLml0ZW0gIT09IFwiRmVlZFwiKTtcclxuICB9XHJcbiAgaWYgKHByb2ZpbGVTdGF0ZS5jdXJyZW50RmlsdGVyLnRvTG93ZXJDYXNlKCkgPT09IFwiZmVlZFwiKSB7XHJcbiAgICAvLyBGZWVkIGl0ZW1zIGFyZSByZW5kZXJlZCBhcyBjYXJvdXNlbCwgbm90IGFzIGRvY3VtZW50IHJvd3NcclxuICAgIC8vIFJldHVybiBlbXB0eSBzbyB0aGUgbGlicmFyeSB0YWJsZSBzdGF5cyBlbXB0eSB3aGlsZSBjYXJvdXNlbCByZW5kZXJzXHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG4gIHJldHVybiBwcm9maWxlU3RhdGUuZG9jdW1lbnRzLmZpbHRlcihcclxuICAgIChkb2MpID0+XHJcbiAgICAgIGRvYy5pdGVtLnRvTG93ZXJDYXNlKCkgPT09IHByb2ZpbGVTdGF0ZS5jdXJyZW50RmlsdGVyLnRvTG93ZXJDYXNlKCksXHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgcHJvZmlsZSBzdGF0ZSAoZm9yIGRlYnVnZ2luZylcclxuICogQHJldHVybnMge09iamVjdH0gQ3VycmVudCBwcm9maWxlIHN0YXRlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvZmlsZVN0YXRlKCkge1xyXG4gIHJldHVybiB7IC4uLnByb2ZpbGVTdGF0ZSB9O1xyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlIGFjdGlvbiBidXR0b24gY2xpY2tcclxuICogU2hvd3MgY29udGFjdCBjYXJkIGZvciBpbnN0aXR1dGlvbnMgb3IgY29udHJpYnV0b3IgbGlzdCBmb3IganVyaXNkaWN0aW9uc1xyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlQWN0aW9uQnV0dG9uQ2xpY2soKSB7XHJcbiAgaWYgKHByb2ZpbGVTdGF0ZS5wcm9maWxlVHlwZSA9PT0gXCJpbnN0aXR1dGlvblwiKSB7XHJcbiAgICBzaG93Q29udGFjdENhcmQoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2hvd0NvbnRyaWJ1dG9yTGlzdCgpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3cgY29udGFjdCBjYXJkIG1vZGFsIGZvciBpbnN0aXR1dGlvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2hvd0NvbnRhY3RDYXJkKCkge1xyXG4gIGNvbnN0IG1ldGFkYXRhID0gcHJvZmlsZVN0YXRlLnByb2ZpbGVEYXRhIHx8IHt9O1xyXG4gIGNvbnN0IHsgbmFtZSwgbGFiZWwgfSA9IGV4dHJhY3RMYWJlbChwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUpO1xyXG4gIGNvbnN0IGNvbnRhY3QgPSBtZXRhZGF0YS5jb250YWN0IHx8IHt9O1xyXG5cclxuICBjb25zdCBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtbW9kYWwtb3ZlcmxheVwiKTtcclxuICBjb25zdCBtb2RhbFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC10aXRsZVwiKTtcclxuICBjb25zdCBtb2RhbENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNvbnRlbnRcIik7XHJcblxyXG4gIGlmICghbW9kYWxPdmVybGF5IHx8ICFtb2RhbFRpdGxlIHx8ICFtb2RhbENvbnRlbnQpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJNb2RhbCBlbGVtZW50cyBub3QgZm91bmRcIik7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gXCJDb250YWN0IEluZm9ybWF0aW9uXCI7XHJcblxyXG4gIGNvbnN0IGF2YXRhclVybCA9IG1ldGFkYXRhLmF2YXRhciB8fCBcIi4vaW1hZ2VzL2RlZmF1bHQtYXZhdGFyLndlYnBcIjtcclxuXHJcbiAgbW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBcclxuICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWNhcmRcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtY2FyZC1oZWFkZXJcIj5cclxuICAgICAgICA8aW1nIHNyYz1cIiR7ZXNjYXBlSHRtbChhdmF0YXJVcmwpfVwiIGFsdD1cIiR7ZXNjYXBlSHRtbChuYW1lKX1cIiBjbGFzcz1cImNvbnRhY3QtY2FyZC1hdmF0YXJcIiBsb2FkaW5nPVwibGF6eVwiIGRlY29kaW5nPVwiYXN5bmNcIiAvPlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1jYXJkLW5hbWVcIj4ke2VzY2FwZUh0bWwobmFtZSl9PC9kaXY+XHJcbiAgICAgICAgICAke2xhYmVsID8gYDxkaXYgY2xhc3M9XCJjb250YWN0LWNhcmQtbGFiZWxcIj4ke2VzY2FwZUh0bWwobGFiZWwpfTwvZGl2PmAgOiBcIlwifVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgJHtjb250YWN0LmVtYWlsID8gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8taXRlbVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWN0LWluZm8taWNvblwiPvCfk6c8L3NwYW4+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWxhYmVsXCI+RW1haWw8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby12YWx1ZVwiPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9XCJtYWlsdG86JHtlc2NhcGVIdG1sKGNvbnRhY3QuZW1haWwpfVwiPiR7ZXNjYXBlSHRtbChjb250YWN0LmVtYWlsKX08L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGAgOiBcIlwifVxyXG4gICAgICAke2NvbnRhY3QucGhvbmUgPyBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby1pdGVtXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtaW5mby1pY29uXCI+8J+TsTwvc3Bhbj5cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tbGFiZWxcIj5QaG9uZTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLXZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cInRlbDoke2VzY2FwZUh0bWwoY29udGFjdC5waG9uZS5yZXBsYWNlKC9cXHMvZywgJycpKX1cIj4ke2VzY2FwZUh0bWwoY29udGFjdC5waG9uZSl9PC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgIDogXCJcIn1cclxuICAgICAgJHtjb250YWN0LmFkZHJlc3MgPyBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby1pdGVtXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtaW5mby1pY29uXCI+8J+TjTwvc3Bhbj5cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tbGFiZWxcIj5BZGRyZXNzPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tdmFsdWVcIj4ke2VzY2FwZUh0bWwoY29udGFjdC5hZGRyZXNzKX08L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgIDogXCJcIn1cclxuICAgICAgJHtjb250YWN0LndlYnNpdGUgPyBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby1pdGVtXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtaW5mby1pY29uXCI+8J+MkDwvc3Bhbj5cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tbGFiZWxcIj5XZWJzaXRlPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tdmFsdWVcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPVwiJHtlc2NhcGVIdG1sKGNvbnRhY3Qud2Vic2l0ZSl9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiPiR7ZXNjYXBlSHRtbChjb250YWN0LndlYnNpdGUpfTwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYCA6IFwiXCJ9XHJcbiAgICAgICR7IWNvbnRhY3QuZW1haWwgJiYgIWNvbnRhY3QucGhvbmUgJiYgIWNvbnRhY3QuYWRkcmVzcyAmJiAhY29udGFjdC53ZWJzaXRlID8gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8taXRlbVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWN0LWluZm8taWNvblwiPuKEue+4jzwvc3Bhbj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tdmFsdWVcIj5ObyBjb250YWN0IGluZm9ybWF0aW9uIGF2YWlsYWJsZTwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgIDogXCJcIn1cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcblxyXG4gIG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG59XHJcblxyXG4vKipcclxuICogU2hvdyBjb250cmlidXRvciBsaXN0IG1vZGFsIGZvciBqdXJpc2RpY3Rpb25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dDb250cmlidXRvckxpc3QoKSB7XHJcbiAgY29uc3QgeyBuYW1lLCBsYWJlbCB9ID0gZXh0cmFjdExhYmVsKHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZSk7XHJcblxyXG4gIGNvbnN0IG1vZGFsT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1tb2RhbC1vdmVybGF5XCIpO1xyXG4gIGNvbnN0IG1vZGFsVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLXRpdGxlXCIpO1xyXG4gIGNvbnN0IG1vZGFsQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWwtY29udGVudFwiKTtcclxuXHJcbiAgaWYgKCFtb2RhbE92ZXJsYXkgfHwgIW1vZGFsVGl0bGUgfHwgIW1vZGFsQ29udGVudCkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIk1vZGFsIGVsZW1lbnRzIG5vdCBmb3VuZFwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIG1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBcIkNvbnRyaWJ1dG9yc1wiO1xyXG5cclxuICAvLyBHZXQgdW5pcXVlIGluc3RpdHV0aW9ucyB0aGF0IGhhdmUgZG9jdW1lbnRzIGluIHRoaXMganVyaXNkaWN0aW9uXHJcbiAgY29uc3QgY29udHJpYnV0b3JzID0gZ2V0SnVyaXNkaWN0aW9uQ29udHJpYnV0b3JzKHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZSk7XHJcblxyXG4gIGlmIChjb250cmlidXRvcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICBtb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWl0ZW1cIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImNvbnRhY3QtaW5mby1pY29uXCI+4oS577iPPC9zcGFuPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tdmFsdWVcIj5ObyBjb250cmlidXRvcnMgZm91bmQ8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBjb250cmlidXRvckl0ZW1zID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgIGNvbnRyaWJ1dG9ycy5tYXAoYXN5bmMgKGNvbnRyaWJ1dG9yKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBnZXRJbnN0aXR1dGlvbk1ldGFkYXRhKGNvbnRyaWJ1dG9yLm5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGF2YXRhclVybCA9IG1ldGFkYXRhPy5hdmF0YXIgfHwgXCIuL2ltYWdlcy9kZWZhdWx0LWF2YXRhci53ZWJwXCI7XHJcbiAgICAgICAgY29uc3QgeyBuYW1lOiBpbnN0TmFtZSwgbGFiZWw6IGluc3RMYWJlbCB9ID0gZXh0cmFjdExhYmVsKGNvbnRyaWJ1dG9yLm5hbWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyaWJ1dG9yLWl0ZW1cIj5cclxuICAgICAgICAgICAgPGltZyBzcmM9XCIke2VzY2FwZUh0bWwoYXZhdGFyVXJsKX1cIiBhbHQ9XCIke2VzY2FwZUh0bWwoaW5zdE5hbWUpfVwiIGNsYXNzPVwiY29udHJpYnV0b3ItYXZhdGFyXCIgbG9hZGluZz1cImxhenlcIiBkZWNvZGluZz1cImFzeW5jXCIgLz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyaWJ1dG9yLWluZm9cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJpYnV0b3ItbmFtZVwiPiR7ZXNjYXBlSHRtbChpbnN0TmFtZSl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyaWJ1dG9yLWNvdW50XCI+JHtjb250cmlidXRvci5jb3VudH0gY29udHJpYnV0aW9uJHtjb250cmlidXRvci5jb3VudCAhPT0gMSA/ICdzJyA6ICcnfTwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGEgaHJlZj1cIj9pbnN0aXR1dGlvbj0ke2VuY29kZVVSSUNvbXBvbmVudChjb250cmlidXRvci5uYW1lKX1cIiBjbGFzcz1cImNvbnRyaWJ1dG9yLWxpbmtcIj5WaWV3PC9hPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgbW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRyaWJ1dG9yLWxpc3RcIj5cclxuICAgICAgICAke2NvbnRyaWJ1dG9ySXRlbXMuam9pbihcIlwiKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG4gIH1cclxuXHJcbiAgbW9kYWxPdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY29udHJpYnV0b3JzIChpbnN0aXR1dGlvbnMpIGZvciBhIGp1cmlzZGljdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganVyaXNkaWN0aW9uTmFtZSAtIEp1cmlzZGljdGlvbiBuYW1lXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgeyBuYW1lLCBjb3VudCB9IG9iamVjdHNcclxuICovXHJcbmZ1bmN0aW9uIGdldEp1cmlzZGljdGlvbkNvbnRyaWJ1dG9ycyhqdXJpc2RpY3Rpb25OYW1lKSB7XHJcbiAgY29uc3QgY29udHJpYnV0b3JNYXAgPSBuZXcgTWFwKCk7XHJcblxyXG4gIHByb2ZpbGVTdGF0ZS5kb2N1bWVudHMuZm9yRWFjaCgoZG9jKSA9PiB7XHJcbiAgICBpZiAoZG9jLmp1cmlzZGljdGlvbiA9PT0ganVyaXNkaWN0aW9uTmFtZSkge1xyXG4gICAgICBjb25zdCBpbnN0aXR1dGlvbiA9IGRvYy5pbnN0aXR1dGlvbjtcclxuICAgICAgY29udHJpYnV0b3JNYXAuc2V0KGluc3RpdHV0aW9uLCAoY29udHJpYnV0b3JNYXAuZ2V0KGluc3RpdHV0aW9uKSB8fCAwKSArIDEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gQXJyYXkuZnJvbShjb250cmlidXRvck1hcC5lbnRyaWVzKCkpXHJcbiAgICAubWFwKChbbmFtZSwgY291bnRdKSA9PiAoeyBuYW1lLCBjb3VudCB9KSlcclxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbG9zZSB0aGUgbW9kYWxcclxuICovXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XHJcbiAgY29uc3QgbW9kYWxPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLW1vZGFsLW92ZXJsYXlcIik7XHJcbiAgaWYgKG1vZGFsT3ZlcmxheSkge1xyXG4gICAgbW9kYWxPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBtb2RhbCBldmVudCBsaXN0ZW5lcnNcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVNb2RhbExpc3RlbmVycygpIHtcclxuICBjb25zdCBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtbW9kYWwtb3ZlcmxheVwiKTtcclxuICBjb25zdCBtb2RhbENsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC1jbG9zZVwiKTtcclxuXHJcbiAgLy8gQ2xvc2UgYnV0dG9uXHJcbiAgaWYgKG1vZGFsQ2xvc2UpIHtcclxuICAgIG1vZGFsQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTW9kYWwpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xpY2sgb3V0c2lkZSBtb2RhbCB0byBjbG9zZVxyXG4gIGlmIChtb2RhbE92ZXJsYXkpIHtcclxuICAgIG1vZGFsT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbE92ZXJsYXkpIHtcclxuICAgICAgICBjbG9zZU1vZGFsKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRXNjYXBlIGtleSB0byBjbG9zZVxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEZlZWQgQ2Fyb3VzZWwgUmVuZGVyaW5nIChtb3ZlZCBmcm9tIGZlZWQuanMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBSZW5kZXIgZmVlZCBjYXJvdXNlbCBpbiB0aGUgbGlicmFyeSBkb2N1bWVudCBsaXN0IGFyZWFcclxuICogQ2FsbGVkIHdoZW4gdGhlIFwiRmVlZFwiIGZpbHRlciBwaWxsIGlzIGFjdGl2ZSBpbiBwcm9maWxlIG1vZGVcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IHRvIHJlbmRlciBjYXJvdXNlbHMgaW50b1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlckZlZWRDYXJvdXNlbChjb250YWluZXIpIHtcclxuICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICBjb25zdCBmZWVkRG9jcyA9IGF3YWl0IGdldEZlZWREb2N1bWVudHMoXHJcbiAgICBwcm9maWxlU3RhdGUucHJvZmlsZVR5cGUsXHJcbiAgICBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUsXHJcbiAgKTtcclxuXHJcbiAgaWYgKGZlZWREb2NzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyXCIgc3R5bGU9XCJwYWRkaW5nOiAycmVtOyBvcGFjaXR5OiAwLjY7XCI+Tm8gZmVlZCBpdGVtcyBmb3VuZC48L3A+YDtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIEdyb3VwIGZlZWQgZG9jcyBieSBpbnN0aXR1dGlvbiAoZm9yIGp1cmlzZGljdGlvbiBwcm9maWxlKSBvciByZW5kZXIgYXMgc2luZ2xlIGNhcm91c2VsIChmb3IgaW5zdGl0dXRpb24gcHJvZmlsZSlcclxuICBsZXQgY2Fyb3VzZWxHcm91cHM7XHJcbiAgaWYgKHByb2ZpbGVTdGF0ZS5wcm9maWxlVHlwZSA9PT0gXCJqdXJpc2RpY3Rpb25cIikge1xyXG4gICAgLy8gR3JvdXAgYnkgaW5zdGl0dXRpb24g4oCUIGVhY2ggaW5zdGl0dXRpb24gZ2V0cyBpdHMgb3duIGNhcm91c2VsXHJcbiAgICBjb25zdCBncm91cE1hcCA9IG5ldyBNYXAoKTtcclxuICAgIGZlZWREb2NzLmZvckVhY2goKGRvYykgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSBkb2MuaW5zdGl0dXRpb247XHJcbiAgICAgIGlmICghZ3JvdXBNYXAuaGFzKGtleSkpIGdyb3VwTWFwLnNldChrZXksIFtdKTtcclxuICAgICAgZ3JvdXBNYXAuZ2V0KGtleSkucHVzaChkb2MpO1xyXG4gICAgfSk7XHJcbiAgICBjYXJvdXNlbEdyb3VwcyA9IEFycmF5LmZyb20oZ3JvdXBNYXAuZW50cmllcygpKS5tYXAoKFtpbnN0aXR1dGlvbiwgZG9jc10pID0+ICh7XHJcbiAgICAgIHRpdGxlOiBkb2NzWzBdPy50aXRsZSB8fCBpbnN0aXR1dGlvbi5yZXBsYWNlKC9cXHMqXFxbLio/XFxdXFxzKi9nLCBcIlwiKS50cmltKCksXHJcbiAgICAgIHNvdXJjZUxhYmVsOiBgUG9zdGVkIGJ5ICR7aW5zdGl0dXRpb24ucmVwbGFjZSgvXFxzKlxcWy4qP1xcXVxccyovZywgXCJcIikudHJpbSgpfWAsXHJcbiAgICAgIGRvY3MsXHJcbiAgICB9KSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIEluc3RpdHV0aW9uIHByb2ZpbGUg4oCUIHNpbmdsZSBjYXJvdXNlbCB3aXRoIGFsbCBmZWVkIGRvY3NcclxuICAgIGNvbnN0IGp1cmlzZGljdGlvbkxhYmVsID0gZmVlZERvY3NbMF0/Lmp1cmlzZGljdGlvbj8ucmVwbGFjZSgvXFxzKlxcWy4qP1xcXVxccyovZywgXCJcIikudHJpbSgpIHx8IFwiXCI7XHJcbiAgICBjYXJvdXNlbEdyb3VwcyA9IFt7XHJcbiAgICAgIHRpdGxlOiBmZWVkRG9jc1swXT8udGl0bGUgfHwgXCJGZWVkXCIsXHJcbiAgICAgIHNvdXJjZUxhYmVsOiBgUG9zdGVkIGluICR7anVyaXNkaWN0aW9uTGFiZWx9YCxcclxuICAgICAgZG9jczogZmVlZERvY3MsXHJcbiAgICB9XTtcclxuICB9XHJcblxyXG4gIC8vIFJlbmRlciBhbGwgY2Fyb3VzZWwgZ3JvdXBzXHJcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgY2Fyb3VzZWxHcm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcclxuICAgIGNvbnN0IGNhcm91c2VsSWQgPSBgY2Fyb3VzZWwtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG5cclxuICAgIGNvbnN0IHNsaWRlcyA9IGdyb3VwLmRvY3MubWFwKChmZWVkRG9jLCBpKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcHRpb24gPSBmZWVkRG9jLmxpbmtlZERvY3VtZW50Py50aXRsZSB8fCBmZWVkRG9jLnRpdGxlIHx8IFwiVW50aXRsZWRcIjtcclxuICAgICAgY29uc3QgZG9jTGluayA9IGZlZWREb2MubGlua2VkRG9jdW1lbnQ/LmZpbGVuYW1lIHx8IFwiI1wiO1xyXG4gICAgICBjb25zdCBpbWFnZVVybCA9IGZlZWREb2MuY2Fyb3VzZWw/LmltYWdlIHx8IFwiXCI7XHJcbiAgICAgIHJldHVybiB7IGNhcHRpb24sIGRvY0xpbmssIGltYWdlVXJsLCBpbmRleDogaSB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgY2Fyb3VzZWxIVE1MID0gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZmVlZC1jYXJvdXNlbFwiIGlkPVwiJHtjYXJvdXNlbElkfVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1oZWFkZXJcIj5cclxuICAgICAgICAgIDxoMyBjbGFzcz1cImNhcm91c2VsLXRpdGxlXCI+JHtlc2NhcGVIdG1sKGdyb3VwLnRpdGxlKX08L2gzPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC10cmFja1wiIGlkPVwiJHtjYXJvdXNlbElkfS10cmFja1wiPlxyXG4gICAgICAgICAgICAke3NsaWRlc1xyXG4gICAgICAgICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAgICAgICAoc2xpZGUpID0+IGBcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtc2xpZGVcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtlc2NhcGVIdG1sKHNsaWRlLmltYWdlVXJsKX1cIiBhbHQ9XCIke2VzY2FwZUh0bWwoc2xpZGUuY2FwdGlvbil9XCIgbG9hZGluZz1cIiR7c2xpZGUuaW5kZXggPT09IDAgPyBcImVhZ2VyXCIgOiBcImxhenlcIn1cIiBkZWNvZGluZz1cImFzeW5jXCIgZmV0Y2hwcmlvcml0eT1cIiR7c2xpZGUuaW5kZXggPT09IDAgPyBcImhpZ2hcIiA6IFwiYXV0b1wifVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcm91c2VsLWNhcHRpb25cIj5cclxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7ZXNjYXBlSHRtbChzbGlkZS5kb2NMaW5rKX1cIiBjbGFzcz1cImNhcm91c2VsLWNhcHRpb24tbGlua1wiPiR7ZXNjYXBlSHRtbChzbGlkZS5jYXB0aW9uKX08L2E+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYCxcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjYXJvdXNlbC1uYXYgcHJldlwiIGFyaWEtbGFiZWw9XCJQcmV2aW91cyBzbGlkZVwiPuKAuTwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNhcm91c2VsLW5hdiBuZXh0XCIgYXJpYS1sYWJlbD1cIk5leHQgc2xpZGVcIj7igLo8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtZm9vdGVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtaW5kaWNhdG9yc1wiPlxyXG4gICAgICAgICAgICAke3NsaWRlc1xyXG4gICAgICAgICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAgICAgICAoc2xpZGUpID0+IGBcclxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2Fyb3VzZWwtaW5kaWNhdG9yICR7c2xpZGUuaW5kZXggPT09IDAgPyBcImFjdGl2ZVwiIDogXCJcIn1cIiBkYXRhLWluZGV4PVwiJHtzbGlkZS5pbmRleH1cIiBhcmlhLWxhYmVsPVwiR28gdG8gc2xpZGUgJHtzbGlkZS5pbmRleCArIDF9XCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgIGAsXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhcm91c2VsLXNvdXJjZVwiPiR7ZXNjYXBlSHRtbChncm91cC5zb3VyY2VMYWJlbCl9PC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBjYXJvdXNlbEhUTUwpO1xyXG4gICAgaW5pdENhcm91c2VsTmF2aWdhdGlvbihjYXJvdXNlbElkLCBzbGlkZXMubGVuZ3RoKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgY2Fyb3VzZWwgbmF2aWdhdGlvbiAocHJldi9uZXh0LCBpbmRpY2F0b3JzLCBhdXRvcGxheSwgdG91Y2gpXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYXJvdXNlbElkIC0gVGhlIGNhcm91c2VsIGVsZW1lbnQgSURcclxuICogQHBhcmFtIHtudW1iZXJ9IHNsaWRlQ291bnQgLSBOdW1iZXIgb2Ygc2xpZGVzXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0Q2Fyb3VzZWxOYXZpZ2F0aW9uKGNhcm91c2VsSWQsIHNsaWRlQ291bnQpIHtcclxuICBjb25zdCBjYXJvdXNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhcm91c2VsSWQpO1xyXG4gIGlmICghY2Fyb3VzZWwpIHJldHVybjtcclxuXHJcbiAgY29uc3QgdHJhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtjYXJvdXNlbElkfS10cmFja2ApO1xyXG4gIGNvbnN0IHByZXZCdG4gPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiLmNhcm91c2VsLW5hdi5wcmV2XCIpO1xyXG4gIGNvbnN0IG5leHRCdG4gPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yKFwiLmNhcm91c2VsLW5hdi5uZXh0XCIpO1xyXG4gIGNvbnN0IGluZGljYXRvcnMgPSBjYXJvdXNlbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcm91c2VsLWluZGljYXRvclwiKTtcclxuXHJcbiAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XHJcbiAgbGV0IGF1dG9QbGF5SW50ZXJ2YWw7XHJcblxyXG4gIGZ1bmN0aW9uIGdvVG9TbGlkZShpbmRleCkge1xyXG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBzbGlkZUNvdW50IC0gMTtcclxuICAgIGlmIChpbmRleCA+PSBzbGlkZUNvdW50KSBpbmRleCA9IDA7XHJcbiAgICBjdXJyZW50SW5kZXggPSBpbmRleDtcclxuICAgIHRyYWNrLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke2N1cnJlbnRJbmRleCAqIDEwMH0lKWA7XHJcblxyXG4gICAgaW5kaWNhdG9ycy5mb3JFYWNoKChpbmRpY2F0b3IsIGkpID0+IHtcclxuICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIiwgaSA9PT0gY3VycmVudEluZGV4KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbmV4dFNsaWRlKCkge1xyXG4gICAgZ29Ub1NsaWRlKGN1cnJlbnRJbmRleCArIDEpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcHJldlNsaWRlKCkge1xyXG4gICAgZ29Ub1NsaWRlKGN1cnJlbnRJbmRleCAtIDEpO1xyXG4gIH1cclxuXHJcbiAgcHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcHJldlNsaWRlKCk7XHJcbiAgICByZXNldEF1dG9QbGF5KCk7XHJcbiAgfSk7XHJcblxyXG4gIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIG5leHRTbGlkZSgpO1xyXG4gICAgcmVzZXRBdXRvUGxheSgpO1xyXG4gIH0pO1xyXG5cclxuICBpbmRpY2F0b3JzLmZvckVhY2goKGluZGljYXRvciwgaW5kZXgpID0+IHtcclxuICAgIGluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBnb1RvU2xpZGUoaW5kZXgpO1xyXG4gICAgICByZXNldEF1dG9QbGF5KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gc3RhcnRBdXRvUGxheSgpIHtcclxuICAgIGF1dG9QbGF5SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChuZXh0U2xpZGUsIDUwMDApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3RvcEF1dG9QbGF5KCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbChhdXRvUGxheUludGVydmFsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlc2V0QXV0b1BsYXkoKSB7XHJcbiAgICBzdG9wQXV0b1BsYXkoKTtcclxuICAgIHN0YXJ0QXV0b1BsYXkoKTtcclxuICB9XHJcblxyXG4gIHN0YXJ0QXV0b1BsYXkoKTtcclxuXHJcbiAgY2Fyb3VzZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgc3RvcEF1dG9QbGF5KTtcclxuICBjYXJvdXNlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBzdGFydEF1dG9QbGF5KTtcclxuXHJcbiAgLy8gVG91Y2ggc3VwcG9ydFxyXG4gIGxldCB0b3VjaFN0YXJ0WCA9IDA7XHJcbiAgbGV0IHRvdWNoRW5kWCA9IDA7XHJcblxyXG4gIGNhcm91c2VsLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICBcInRvdWNoc3RhcnRcIixcclxuICAgIChlKSA9PiB7XHJcbiAgICAgIHRvdWNoU3RhcnRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5YO1xyXG4gICAgfSxcclxuICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxyXG4gICk7XHJcblxyXG4gIGNhcm91c2VsLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICBcInRvdWNoZW5kXCIsXHJcbiAgICAoZSkgPT4ge1xyXG4gICAgICB0b3VjaEVuZFggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnNjcmVlblg7XHJcbiAgICAgIGNvbnN0IGRpZmYgPSB0b3VjaFN0YXJ0WCAtIHRvdWNoRW5kWDtcclxuICAgICAgaWYgKE1hdGguYWJzKGRpZmYpID4gNTApIHtcclxuICAgICAgICBpZiAoZGlmZiA+IDApIHtcclxuICAgICAgICAgIG5leHRTbGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwcmV2U2xpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzZXRBdXRvUGxheSgpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgeyBwYXNzaXZlOiB0cnVlIH0sXHJcbiAgKTtcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBtb2RhbCBsaXN0ZW5lcnMgd2hlbiBtb2R1bGUgbG9hZHNcclxuaW5pdGlhbGl6ZU1vZGFsTGlzdGVuZXJzKCk7IiwiLyoqXHJcbiAqIExpYnJhcnkgVUkgTW9kdWxlXHJcbiAqIEhhbmRsZXMgcmVuZGVyaW5nIGFuZCBpbnRlcmFjdGlvbiBmb3IgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldERvY3VtZW50cyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHBhcnNlUXVlcnlQYXJhbXMsXHJcbiAgcGFyc2VIYXNoUGFyYW1zLFxyXG4gIHNvcnREb2N1bWVudHMsXHJcbiAgZmlsdGVyRG9jdW1lbnRzLFxyXG4gIGVzY2FwZUh0bWwsXHJcbiAgc2hvd0Vycm9yLFxyXG59IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7IGdldEZpbHRlcmVkRG9jdW1lbnRzLCBkZXRlY3RQcm9maWxlTW9kZSB9IGZyb20gXCIuL3Byb2ZpbGUtdWkuanNcIjtcclxuXHJcbi8vIEN1cnJlbnQgc29ydCBzdGF0ZVxyXG5sZXQgY3VycmVudFNvcnQgPSBcIm5hbWVcIjtcclxubGV0IGN1cnJlbnREb2N1bWVudHMgPSBbXTtcclxubGV0IGlzUHJvZmlsZU1vZGUgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBsaWJyYXJ5IHJvdyBlbGVtZW50XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkb2MgLSBEb2N1bWVudCBvYmplY3RcclxuICogQHJldHVybnMge0hUTUxFbGVtZW50fSBSb3cgZWxlbWVudFxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTGlicmFyeVJvdyhkb2MpIHtcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IGRldGVjdFByb2ZpbGVNb2RlKCk7XHJcbiAgY29uc3QgaXNJbnN0aXR1dGlvblByb2ZpbGUgPSBwcm9maWxlSW5mbz8udHlwZSA9PT0gXCJpbnN0aXR1dGlvblwiO1xyXG4gIGNvbnN0IGlzSnVyaXNkaWN0aW9uUHJvZmlsZSA9IHByb2ZpbGVJbmZvPy50eXBlID09PSBcImp1cmlzZGljdGlvblwiO1xyXG4gIGNvbnN0IGlzUHJvZmlsZU1vZGUgPSBpc0luc3RpdHV0aW9uUHJvZmlsZSB8fCBpc0p1cmlzZGljdGlvblByb2ZpbGU7XHJcblxyXG4gIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gIC8vIFVzZSAyLWNvbHVtbiBsYXlvdXQgZm9yIHByb2ZpbGUgbW9kZSwgMy1jb2x1bW4gZm9yIG5vbi1wcm9maWxlXHJcbiAgY29uc3QgZ3JpZENsYXNzID0gaXNQcm9maWxlTW9kZVxyXG4gICAgPyBcImxpYnJhcnktZ3JpZC1wcm9maWxlXCJcclxuICAgIDogXCJsaWJyYXJ5LWdyaWQtZGVmYXVsdFwiO1xyXG5cclxuICByb3cuY2xhc3NOYW1lID0gYGxpYnJhcnktcm93ICR7Z3JpZENsYXNzfSBnYXAtMyBpdGVtcy1zdGFydCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcHktMmA7XHJcblxyXG4gIHJvdy5kYXRhc2V0Lm5hbWUgPSBkb2MudGl0bGU7XHJcbiAgcm93LmRhdGFzZXQudmVyc2lvbiA9IGRvYy52ZXJzaW9uO1xyXG4gIHJvdy5kYXRhc2V0LmRhdGUgPSBkb2MuZGF0ZTtcclxuICByb3cuZGF0YXNldC5pdGVtID0gZG9jLml0ZW07XHJcbiAgcm93LmRhdGFzZXQuaW5zdGl0dXRpb24gPSBkb2MuaW5zdGl0dXRpb247XHJcbiAgcm93LmRhdGFzZXQuanVyaXNkaWN0aW9uID0gZG9jLmp1cmlzZGljdGlvbjtcclxuXHJcbiAgLy8gVGl0bGUgY2VsbCB3aXRoIGxpbmtcclxuICBjb25zdCB0aXRsZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICB0aXRsZUNlbGwuY2xhc3NOYW1lID1cclxuICAgIFwib3ZlcmZsb3ctaGlkZGVuIHRleHQtZWxsaXBzaXMgd2hpdGVzcGFjZS1ub3dyYXAgbWluLXctMFwiO1xyXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBsaW5rLmhyZWYgPSBkb2MuZmlsZW5hbWU7XHJcbiAgbGluay50ZXh0Q29udGVudCA9IGRvYy50aXRsZTtcclxuICBsaW5rLmNsYXNzTmFtZSA9IFwiYmxvY2sgb3ZlcmZsb3ctaGlkZGVuIHRleHQtZWxsaXBzaXMgd2hpdGVzcGFjZS1ub3dyYXBcIjtcclxuICB0aXRsZUNlbGwuYXBwZW5kQ2hpbGQobGluayk7XHJcblxyXG4gIC8vIE1ldGFkYXRhIGNlbGwgLSBjb25kaXRpb25hbGx5IHJlbmRlcmVkIGJhc2VkIG9uIHByb2ZpbGUgbW9kZVxyXG4gIGNvbnN0IG1ldGFkYXRhQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cclxuICBpZiAoaXNJbnN0aXR1dGlvblByb2ZpbGUpIHtcclxuICAgIC8vIEluc3RpdHV0aW9uIFByb2ZpbGU6IFNob3cgXCJQb3N0ZWQgaW4ge0p1cmlzZGljdGlvbiBOYW1lfVwiICh3aXRob3V0IFt0eXBlXSkgLSBjbGlja2FibGVcclxuICAgIG1ldGFkYXRhQ2VsbC5jbGFzc05hbWUgPVxyXG4gICAgICBcImxpYnJhcnktbWV0YWRhdGEgdGV4dC1yaWdodCB3aGl0ZXNwYWNlLW5vd3JhcCBvdmVyZmxvdy1oaWRkZW4gdGV4dC1zbSB0ZXh0LWVsbGlwc2lzIHNocmluay0wXCI7XHJcbiAgICBjb25zdCBqdXJpc2RpY3Rpb25OYW1lID0gKGRvYy5qdXJpc2RpY3Rpb24gfHwgXCJcIikucmVwbGFjZSgvXFxzKlxcWy4qP1xcXVxccyovZywgXCJcIik7XHJcbiAgICBjb25zdCBqdXJpc2RpY3Rpb25MaW5rID0gZG9jLmp1cmlzZGljdGlvbiA/IGA/anVyaXNkaWN0aW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvYy5qdXJpc2RpY3Rpb24pfWAgOiBcIiNcIjtcclxuICAgIG1ldGFkYXRhQ2VsbC5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzbTpoaWRkZW5cIj5Qb3N0ZWQgaW4gPC9zcGFuPjxhIGhyZWY9XCIke2VzY2FwZUh0bWwoanVyaXNkaWN0aW9uTGluayl9XCIgY2xhc3M9XCJsaWJyYXJ5LXByb2ZpbGUtbGlua1wiPiR7ZXNjYXBlSHRtbChqdXJpc2RpY3Rpb25OYW1lKX08L2E+YDtcclxuICB9IGVsc2UgaWYgKGlzSnVyaXNkaWN0aW9uUHJvZmlsZSkge1xyXG4gICAgLy8gSnVyaXNkaWN0aW9uIFByb2ZpbGU6IFNob3cgXCJQb3N0ZWQgYnkge0luc3RpdHV0aW9uIE5hbWV9XCIgKHdpdGhvdXQgW3R5cGVdKSAtIGNsaWNrYWJsZVxyXG4gICAgbWV0YWRhdGFDZWxsLmNsYXNzTmFtZSA9XHJcbiAgICAgIFwibGlicmFyeS1tZXRhZGF0YSB0ZXh0LXJpZ2h0IHdoaXRlc3BhY2Utbm93cmFwIG92ZXJmbG93LWhpZGRlbiB0ZXh0LXNtIHRleHQtZWxsaXBzaXMgc2hyaW5rLTBcIjtcclxuICAgIGNvbnN0IGluc3RpdHV0aW9uTmFtZSA9IChkb2MuaW5zdGl0dXRpb24gfHwgXCJcIikucmVwbGFjZSgvXFxzKlxcWy4qP1xcXVxccyovZywgXCJcIik7XHJcbiAgICBjb25zdCBpbnN0aXR1dGlvbkxpbmsgPSBkb2MuaW5zdGl0dXRpb24gPyBgP2luc3RpdHV0aW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvYy5pbnN0aXR1dGlvbil9YCA6IFwiI1wiO1xyXG4gICAgbWV0YWRhdGFDZWxsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNtOmhpZGRlblwiPlBvc3RlZCBieSA8L3NwYW4+PGEgaHJlZj1cIiR7ZXNjYXBlSHRtbChpbnN0aXR1dGlvbkxpbmspfVwiIGNsYXNzPVwibGlicmFyeS1wcm9maWxlLWxpbmtcIj4ke2VzY2FwZUh0bWwoaW5zdGl0dXRpb25OYW1lKX08L2E+YDtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTm9uLXByb2ZpbGUgbW9kZTogU2hvdyB2ZXJzaW9uIGFuZCBkYXRlIChkZWZhdWx0IGJlaGF2aW9yKVxyXG4gICAgY29uc3QgdmVyc2lvbkNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIHZlcnNpb25DZWxsLmNsYXNzTmFtZSA9IFwibGlicmFyeS12ZXJzaW9uIHRleHQtY2VudGVyIHRleHQtc20gICB0YWJ1bGFyLW51bXNcIjtcclxuICAgIHZlcnNpb25DZWxsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNtOmhpZGRlbiB0ZXh0LXNtXCI+VmVyc2lvbiA8L3NwYW4+JHtkb2MudmVyc2lvbn1gO1xyXG5cclxuICAgIGNvbnN0IGRhdGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBkYXRlQ2VsbC5jbGFzc05hbWUgPSBcImxpYnJhcnktZGF0ZSB0ZXh0LXJpZ2h0IHdoaXRlc3BhY2Utbm93cmFwXCI7XHJcbiAgICBkYXRlQ2VsbC50ZXh0Q29udGVudCA9IGRvYy5kYXRlRm9ybWF0dGVkO1xyXG5cclxuICAgIHJvdy5hcHBlbmRDaGlsZCh0aXRsZUNlbGwpO1xyXG4gICAgcm93LmFwcGVuZENoaWxkKHZlcnNpb25DZWxsKTtcclxuICAgIHJvdy5hcHBlbmRDaGlsZChkYXRlQ2VsbCk7XHJcblxyXG4gICAgcmV0dXJuIHJvdztcclxuICB9XHJcblxyXG4gIC8vIEZvciBwcm9maWxlIG1vZGUsIG9ubHkgYXBwZW5kIHRpdGxlIGFuZCBtZXRhZGF0YSBjZWxsc1xyXG4gIHJvdy5hcHBlbmRDaGlsZCh0aXRsZUNlbGwpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChtZXRhZGF0YUNlbGwpO1xyXG5cclxuICByZXR1cm4gcm93O1xyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVyIHRoZSBsaWJyYXJ5IHRhYmxlXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGRvY3VtZW50cyAtIEFycmF5IG9mIGRvY3VtZW50IG9iamVjdHNcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckxpYnJhcnlUYWJsZShkb2N1bWVudHMpIHtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpYnJhcnlcIik7XHJcbiAgaWYgKCFjb250YWluZXIpIHtcclxuICAgIGNvbnNvbGUud2FybihcIkxpYnJhcnkgY29udGFpbmVyIG5vdCBmb3VuZFwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIERldGVjdCBwcm9maWxlIG1vZGUgZm9yIGhlYWRlclxyXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gZGV0ZWN0UHJvZmlsZU1vZGUoKTtcclxuICBjb25zdCBpc0luc3RpdHV0aW9uUHJvZmlsZSA9IHByb2ZpbGVJbmZvPy50eXBlID09PSBcImluc3RpdHV0aW9uXCI7XHJcbiAgY29uc3QgaXNKdXJpc2RpY3Rpb25Qcm9maWxlID0gcHJvZmlsZUluZm8/LnR5cGUgPT09IFwianVyaXNkaWN0aW9uXCI7XHJcbiAgY29uc3QgaXNQcm9maWxlTW9kZSA9IGlzSW5zdGl0dXRpb25Qcm9maWxlIHx8IGlzSnVyaXNkaWN0aW9uUHJvZmlsZTtcclxuXHJcbiAgLy8gQ2xlYXIgY29udGFpbmVyXHJcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gIC8vIEJ1aWxkIGhlYWRlciBiYXNlZCBvbiBwcm9maWxlIG1vZGVcclxuICBsZXQgaGVhZGVySFRNTCA9IFwiXCI7XHJcblxyXG4gIGlmIChpc1Byb2ZpbGVNb2RlKSB7XHJcbiAgICBjb25zdCBncmlkQ2xhc3MgPSBcImxpYnJhcnktZ3JpZC1wcm9maWxlXCI7XHJcblxyXG4gICAgaWYgKGlzSW5zdGl0dXRpb25Qcm9maWxlKSB7XHJcbiAgICAgIGhlYWRlckhUTUwgPSBgXHJcbjxkaXYgY2xhc3M9XCJsaWJyYXJ5LXJvdyBsaWJyYXJ5LWhlYWRlciAke2dyaWRDbGFzc30gZ2FwLTMgaXRlbXMtYmFzZWxpbmUgdGV4dC1sZWZ0IGZvbnQtYm9sZCBib3JkZXItYiBib3JkZXItYmxhY2sgcGItMSBtYi0zXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJvdmVyZmxvdy1oaWRkZW4gdGV4dC1lbGxpcHNpcyB3aGl0ZXNwYWNlLW5vd3JhcFwiPlRpdGxlPC9zcGFuPlxyXG4gIDxzcGFuIGNsYXNzPVwidGV4dC1yaWdodCB3aGl0ZXNwYWNlLW5vd3JhcFwiPlBvc3RlZCBpbjwvc3Bhbj5cclxuPC9kaXY+YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlckhUTUwgPSBgXHJcbjxkaXYgY2xhc3M9XCJsaWJyYXJ5LXJvdyBsaWJyYXJ5LWhlYWRlciAke2dyaWRDbGFzc30gZ2FwLTMgaXRlbXMtYmFzZWxpbmUgdGV4dC1sZWZ0IGZvbnQtYm9sZCBib3JkZXItYiBib3JkZXItYmxhY2sgcGItMSBtYi0zXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJvdmVyZmxvdy1oaWRkZW4gdGV4dC1lbGxpcHNpcyB3aGl0ZXNwYWNlLW5vd3JhcFwiPlRpdGxlPC9zcGFuPlxyXG4gIDxzcGFuIGNsYXNzPVwidGV4dC1yaWdodCB3aGl0ZXNwYWNlLW5vd3JhcFwiPlBvc3RlZCBieTwvc3Bhbj5cclxuPC9kaXY+YDtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTm9uLXByb2ZpbGUgbW9kZSBoZWFkZXJcclxuICAgIGNvbnN0IGdyaWRDbGFzcyA9IFwibGlicmFyeS1ncmlkLWRlZmF1bHRcIjtcclxuICAgIGhlYWRlckhUTUwgPSBgXHJcbjxkaXYgY2xhc3M9XCJsaWJyYXJ5LXJvdyBsaWJyYXJ5LWhlYWRlciAke2dyaWRDbGFzc30gZ2FwLTQgaXRlbXMtc3RhcnQgdGV4dC1sZWZ0IGZvbnQtYm9sZCBib3JkZXItYiBib3JkZXItYmxhY2sgcGItMSBtYi0zXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJvdmVyZmxvdy1oaWRkZW4gdGV4dC1lbGxpcHNpcyB3aGl0ZXNwYWNlLW5vd3JhcFwiPlRpdGxlPC9zcGFuPlxyXG4gIDxzcGFuIGNsYXNzPVwidGV4dC1jZW50ZXIgdGFidWxhci1udW1zXCI+VmVyc2lvbjwvc3Bhbj5cclxuICA8c3BhbiBjbGFzcz1cInRleHQtcmlnaHQgd2hpdGVzcGFjZS1ub3dyYXBcIj5VcGRhdGVkIERhdGU8L3NwYW4+XHJcbjwvZGl2PmA7XHJcbiAgfVxyXG5cclxuICBjb250YWluZXIuaW5uZXJIVE1MID0gaGVhZGVySFRNTDtcclxuXHJcbiAgLy8gQWRkIGRvY3VtZW50IHJvd3NcclxuICBkb2N1bWVudHMuZm9yRWFjaCgoZG9jKSA9PiB7XHJcbiAgICBjb25zdCByb3cgPSBjcmVhdGVMaWJyYXJ5Um93KGRvYyk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTtcclxuICB9KTtcclxufVxyXG4vKipcclxuICogVXBkYXRlIHRoZSBjb250ZXh0IGRpc3BsYXkgYmFzZWQgb24gYWN0aXZlIGZpbHRlcnNcclxuICogQHBhcmFtIHtPYmplY3R9IGZpbHRlcnMgLSBBY3RpdmUgZmlsdGVyc1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ29udGV4dChmaWx0ZXJzKSB7XHJcbiAgY29uc3QgY29udGV4dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpYnJhcnktY29udGV4dFwiKTtcclxuICBpZiAoIWNvbnRleHRFbGVtZW50KSByZXR1cm47XHJcblxyXG4gIGNvbnN0IGNvbnRleHQgPSBbXTtcclxuXHJcbiAgaWYgKGZpbHRlcnMuaXRlbSkgY29udGV4dC5wdXNoKGZpbHRlcnMuaXRlbSk7XHJcbiAgaWYgKGZpbHRlcnMuaW5zdGl0dXRpb24pIGNvbnRleHQucHVzaChmaWx0ZXJzLmluc3RpdHV0aW9uKTtcclxuICBpZiAoZmlsdGVycy5qdXJpc2RpY3Rpb24pIGNvbnRleHQucHVzaChmaWx0ZXJzLmp1cmlzZGljdGlvbik7XHJcblxyXG4gIGlmIChjb250ZXh0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgY29udGV4dC5wdXNoKFwiQWxsXCIpO1xyXG4gIH1cclxuXHJcbiAgY29udGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZXh0LmpvaW4oXCIgwrcgXCIpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGFjdGl2ZSBzdGF0ZSBvZiBzb3J0IGJ1dHRvbnNcclxuICogQHBhcmFtIHtzdHJpbmd9IHNvcnRUeXBlIC0gQ3VycmVudCBzb3J0IHR5cGVcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVNvcnRCdXR0b25zKHNvcnRUeXBlKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zb3J0LWNvbnRyb2xzIGJ1dHRvblwiKS5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgaWYgKGJ0bi5kYXRhc2V0LnNvcnQgPT09IHNvcnRUeXBlKSB7XHJcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU29ydCB0aGUgbGlicmFyeSBieSB0aGUgc3BlY2lmaWVkIHR5cGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBTb3J0IHR5cGUgKG5hbWUsIHZlcnNpb24sIGRhdGUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc29ydExpYnJhcnkodHlwZSkge1xyXG4gIGN1cnJlbnRTb3J0ID0gdHlwZTtcclxuICBjdXJyZW50RG9jdW1lbnRzID0gc29ydERvY3VtZW50cyhjdXJyZW50RG9jdW1lbnRzLCB0eXBlKTtcclxuICByZW5kZXJMaWJyYXJ5VGFibGUoY3VycmVudERvY3VtZW50cyk7XHJcbiAgdXBkYXRlU29ydEJ1dHRvbnModHlwZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgYm9keSBjbGFzcyBiYXNlZCBvbiBwcm9maWxlIG1vZGVcclxuICogQHBhcmFtIHtib29sZWFufSBoYXNQcm9maWxlIC0gV2hldGhlciBwcm9maWxlIG1vZGUgaXMgYWN0aXZlXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVCb2R5UHJvZmlsZUNsYXNzKGhhc1Byb2ZpbGUpIHtcclxuICBpZiAoaGFzUHJvZmlsZSkge1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaGFzLXByb2ZpbGVcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImhhcy1wcm9maWxlXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKiBAcGFyYW0ge09iamVjdH0gdXJsRmlsdGVycyAtIFVSTC1kZXJpdmVkIGZpbHRlcnMgdG8gdXNlIGZvciBjb250ZXh0IGRpc3BsYXlcclxuICogQHBhcmFtIHtPYmplY3R9IHByb2ZpbGVJbmZvIC0gUHJvZmlsZSBtb2RlIGluZm9cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplTGlicmFyeSh1cmxGaWx0ZXJzID0ge30sIHByb2ZpbGVJbmZvID0gbnVsbCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBwcm9maWxlIG1vZGVcclxuICAgIGlzUHJvZmlsZU1vZGUgPSAhIXByb2ZpbGVJbmZvIHx8ICEhZGV0ZWN0UHJvZmlsZU1vZGUoKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgYm9keSBjbGFzcyBmb3IgVUkgbW9kZSBzdHlsaW5nXHJcbiAgICB1cGRhdGVCb2R5UHJvZmlsZUNsYXNzKGlzUHJvZmlsZU1vZGUpO1xyXG5cclxuICAgIC8vIEhpZGUgc29ydCBjb250cm9scyBpbiBwcm9maWxlIG1vZGVcclxuICAgIGNvbnN0IHNvcnRDb250cm9scyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc29ydC1jb250cm9scy13cmFwcGVyXCIpO1xyXG4gICAgaWYgKHNvcnRDb250cm9scykge1xyXG4gICAgICBpZiAoaXNQcm9maWxlTW9kZSkge1xyXG4gICAgICAgIHNvcnRDb250cm9scy5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNvcnRDb250cm9scy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGlkZSBjb250ZXh0IGRpc3BsYXkgaW4gcHJvZmlsZSBtb2RlXHJcbiAgICBjb25zdCBjb250ZXh0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlicmFyeS1jb250ZXh0XCIpO1xyXG4gICAgaWYgKGNvbnRleHRFbGVtZW50KSB7XHJcbiAgICAgIGlmIChpc1Byb2ZpbGVNb2RlKSB7XHJcbiAgICAgICAgY29udGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb250ZXh0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNlIHByb3ZpZGVkIFVSTCBmaWx0ZXJzIGZvciBjb250ZXh0IGRpc3BsYXlcclxuICAgIC8vIE9ubHkgbG9hZCBhbmQgZmlsdGVyIGRvY3VtZW50cyBpZiBub3QgYWxyZWFkeSBzZXQgKGUuZy4sIGJ5IHByb2ZpbGUgbW9kZSBpbiBtYWluLmpzKVxyXG4gICAgaWYgKGN1cnJlbnREb2N1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIExvYWQgYWxsIGRvY3VtZW50c1xyXG4gICAgICBjb25zdCBhbGxEb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHMoKTtcclxuXHJcbiAgICAgIC8vIEZpbHRlciBkb2N1bWVudHNcclxuICAgICAgY3VycmVudERvY3VtZW50cyA9IGZpbHRlckRvY3VtZW50cyhhbGxEb2N1bWVudHMsIHVybEZpbHRlcnMpO1xyXG5cclxuICAgICAgLy8gU29ydCBieSBkZWZhdWx0XHJcbiAgICAgIGN1cnJlbnREb2N1bWVudHMgPSBzb3J0RG9jdW1lbnRzKGN1cnJlbnREb2N1bWVudHMsIGN1cnJlbnRTb3J0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW5kZXJcclxuICAgIHJlbmRlckxpYnJhcnlUYWJsZShjdXJyZW50RG9jdW1lbnRzKTtcclxuICAgIHVwZGF0ZUNvbnRleHQodXJsRmlsdGVycyk7XHJcbiAgICB1cGRhdGVTb3J0QnV0dG9ucyhjdXJyZW50U29ydCk7XHJcblxyXG4gICAgLy8gU2V0dXAgc29ydCBidXR0b24gaGFuZGxlcnMgKG9ubHkgaW4gbm9uLXByb2ZpbGUgbW9kZSlcclxuICAgIGlmICghaXNQcm9maWxlTW9kZSkge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNvcnQtY29udHJvbHMgYnV0dG9uXCIpLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc29ydFR5cGUgPSBidG4uZGF0YXNldC5zb3J0O1xyXG4gICAgICAgICAgaWYgKHNvcnRUeXBlKSB7XHJcbiAgICAgICAgICAgIHNvcnRMaWJyYXJ5KHNvcnRUeXBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBsaWJyYXJ5OlwiLCBlcnJvcik7XHJcbiAgICBzaG93RXJyb3IoXCJVbmFibGUgdG8gbG9hZCBkb2N1bWVudCBsaWJyYXJ5LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgZG9jdW1lbnRzIGZyb20gZXh0ZXJuYWwgZmlsdGVyIChlLmcuLCBwcm9maWxlIFVJKVxyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBGaWx0ZXJlZCBkb2N1bWVudHMgdG8gZGlzcGxheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERvY3VtZW50c0ZpbHRlcihkb2N1bWVudHMpIHtcclxuICBjdXJyZW50RG9jdW1lbnRzID0gc29ydERvY3VtZW50cyhkb2N1bWVudHMsIGN1cnJlbnRTb3J0KTtcclxuICByZW5kZXJMaWJyYXJ5VGFibGUoY3VycmVudERvY3VtZW50cyk7XHJcbiAgdXBkYXRlU29ydEJ1dHRvbnMoY3VycmVudFNvcnQpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGN1cnJlbnQgZG9jdW1lbnRzIChmb3IgcHJvZmlsZSBVSSBpbnRlZ3JhdGlvbilcclxuICogQHJldHVybnMge0FycmF5fSBDdXJyZW50IGRvY3VtZW50cyBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnREb2N1bWVudHMoKSB7XHJcbiAgcmV0dXJuIGN1cnJlbnREb2N1bWVudHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgY3VycmVudCBkb2N1bWVudHMgZGlyZWN0bHlcclxuICogQHBhcmFtIHtBcnJheX0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIHNldFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnREb2N1bWVudHMoZG9jdW1lbnRzKSB7XHJcbiAgY3VycmVudERvY3VtZW50cyA9IGRvY3VtZW50cztcclxufVxyXG4iLCIvKipcclxuICogTGlicmFyeSBQYWdlIE1haW4gRW50cnkgUG9pbnRcclxuICogSW5pdGlhbGl6ZXMgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKiBPcHRpbWl6ZWQgdG8gcHJlbG9hZCBkYXRhIGFuZCByZWR1Y2UgbmV0d29yayByZXF1ZXN0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbGl6ZUxpYnJhcnksXHJcbiAgc2V0RG9jdW1lbnRzRmlsdGVyLFxyXG4gIGdldEN1cnJlbnREb2N1bWVudHMsXHJcbiAgc2V0Q3VycmVudERvY3VtZW50cyxcclxufSBmcm9tIFwiLi9saWJyYXJ5LXVpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbGl6ZVByb2ZpbGVVSSxcclxuICBnZXRGaWx0ZXJlZERvY3VtZW50cyxcclxuICBkZXRlY3RQcm9maWxlTW9kZSxcclxuICBnZXRDdXJyZW50RmlsdGVyLFxyXG4gIHJlbmRlckZlZWRDYXJvdXNlbCxcclxufSBmcm9tIFwiLi9wcm9maWxlLXVpLmpzXCI7XHJcbmltcG9ydCB7IHByZWxvYWRBbGxDb25maWdzLCBnZXREb2N1bWVudHMgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcclxuaW1wb3J0IHtcclxuICBwYXJzZVF1ZXJ5UGFyYW1zLFxyXG4gIHBhcnNlSGFzaFBhcmFtcyxcclxuICBmaWx0ZXJEb2N1bWVudHMsXHJcbiAgc29ydERvY3VtZW50cyxcclxufSBmcm9tIFwiLi91dGlscy5qc1wiO1xyXG5cclxuLy8gRGFyayBNb2RlIFRvZ2dsZSBGdW5jdGlvbmFsaXR5XHJcbmNvbnN0IERBUktfTU9ERV9LRVkgPSAnZGFya01vZGUnO1xyXG5cclxuZnVuY3Rpb24gaW5pdERhcmtNb2RlKCkge1xyXG4gIGNvbnN0IGFkbWluU2VhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbi1zZWFsJyk7XHJcbiAgaWYgKCFhZG1pblNlYWwpIHJldHVybjtcclxuXHJcbiAgLy8gQ2hlY2sgZm9yIHNhdmVkIHByZWZlcmVuY2Ugb3Igc3lzdGVtIHByZWZlcmVuY2VcclxuICBjb25zdCBzYXZlZE1vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShEQVJLX01PREVfS0VZKTtcclxuICBjb25zdCBwcmVmZXJzRGFyayA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykubWF0Y2hlcztcclxuICBcclxuICAvLyBBcHBseSBkYXJrIG1vZGUgaWYgc2F2ZWQgcHJlZmVyZW5jZSBpcyAndHJ1ZScgb3IgaWYgbm8gcHJlZmVyZW5jZSBhbmQgc3lzdGVtIHByZWZlcnMgZGFya1xyXG4gIGlmIChzYXZlZE1vZGUgPT09ICd0cnVlJyB8fCAoIXNhdmVkTW9kZSAmJiBwcmVmZXJzRGFyaykpIHtcclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrJyk7XHJcbiAgfVxyXG5cclxuICAvLyBUb2dnbGUgZGFyayBtb2RlIG9uIGNsaWNrXHJcbiAgYWRtaW5TZWFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2RhcmsnKTtcclxuICAgIGNvbnN0IGlzRGFyayA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmsnKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKERBUktfTU9ERV9LRVksIGlzRGFyayk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgd2hlbiBET00gaXMgcmVhZHlcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFzeW5jICgpID0+IHtcclxuICAvLyBJbml0aWFsaXplIGRhcmsgbW9kZVxyXG4gIGluaXREYXJrTW9kZSgpO1xyXG4gIC8vIFByZWxvYWQgY29uZmlnc1xyXG4gIGF3YWl0IHByZWxvYWRBbGxDb25maWdzKCk7XHJcblxyXG4gIC8vIExvYWQgYWxsIGRvY3VtZW50cyBvbmNlXHJcbiAgY29uc3QgYWxsRG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcblxyXG4gIC8vIFBhcnNlIFVSTCBmaWx0ZXJzIChxdWVyeSBmaXJzdCwgZmFsbGJhY2sgdG8gaGFzaClcclxuICBsZXQgdXJsRmlsdGVycyA9IHBhcnNlUXVlcnlQYXJhbXMoKTtcclxuICBpZiAoIXVybEZpbHRlcnMuaW5zdGl0dXRpb24gJiYgIXVybEZpbHRlcnMuanVyaXNkaWN0aW9uICYmICF1cmxGaWx0ZXJzLml0ZW0pIHtcclxuICAgIHVybEZpbHRlcnMgPSBwYXJzZUhhc2hQYXJhbXMoKTtcclxuICB9XHJcblxyXG4gIC8vIERldGVjdCBwcm9maWxlIG1vZGVcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IGRldGVjdFByb2ZpbGVNb2RlKCk7XHJcblxyXG4gIC8vIDHvuI/ig6MgQXBwbHkgVVJMIGZpbHRlcnMgRklSU1QgKGl0ZW0gLyBpbnN0aXR1dGlvbiAvIGp1cmlzZGljdGlvbilcclxuICBjb25zdCB1cmxGaWx0ZXJlZERvY3MgPSBmaWx0ZXJEb2N1bWVudHMoYWxsRG9jdW1lbnRzLCB1cmxGaWx0ZXJzKTtcclxuICBsZXQgZG9jcyA9IHVybEZpbHRlcmVkRG9jcztcclxuXHJcbiAgaWYgKHByb2ZpbGVJbmZvKSB7XHJcbiAgICAvLyAy77iP4oOjIEluaXRpYWxpemUgcHJvZmlsZSBVSVxyXG4gICAgYXdhaXQgaW5pdGlhbGl6ZVByb2ZpbGVVSShhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXIgPSBnZXRDdXJyZW50RmlsdGVyKCk7XHJcblxyXG4gICAgICAvLyBJZiBGZWVkIGZpbHRlciBpcyBhY3RpdmUsIHJlbmRlciBjYXJvdXNlbCBpbnN0ZWFkIG9mIGRvY3VtZW50IGxpc3RcclxuICAgICAgaWYgKGN1cnJlbnRGaWx0ZXIudG9Mb3dlckNhc2UoKSA9PT0gJ2ZlZWQnKSB7XHJcbiAgICAgICAgY29uc3QgbGlicmFyeUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaWJyYXJ5Jyk7XHJcbiAgICAgICAgaWYgKGxpYnJhcnlDb250YWluZXIpIHtcclxuICAgICAgICAgIGF3YWl0IHJlbmRlckZlZWRDYXJvdXNlbChsaWJyYXJ5Q29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBwcm9maWxlRG9jcyA9IGdldEZpbHRlcmVkRG9jdW1lbnRzKCk7XHJcblxyXG4gICAgICAvLyBNZXJnZSBwcm9maWxlIGZpbHRlcnMgV0lUSCBVUkwgZmlsdGVycyAodXNlIHVybEZpbHRlcmVkRG9jcywgbm90IG11dGF0ZWQgZG9jcylcclxuICAgICAgY29uc3QgcHJvZmlsZUlkcyA9IG5ldyBTZXQocHJvZmlsZURvY3MubWFwKGRvYyA9PiBkb2MuaWQpKTtcclxuICAgICAgY29uc3QgbWVyZ2VkRG9jcyA9IHVybEZpbHRlcmVkRG9jcy5maWx0ZXIoZG9jID0+IHByb2ZpbGVJZHMuaGFzKGRvYy5pZCkpO1xyXG5cclxuICAgICAgc2V0RG9jdW1lbnRzRmlsdGVyKG1lcmdlZERvY3MpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQXBwbHkgaW5pdGlhbCBwcm9maWxlIGZpbHRlclxyXG4gICAgY29uc3QgaW5pdGlhbEZpbHRlciA9IGdldEN1cnJlbnRGaWx0ZXIoKTtcclxuICAgIGNvbnN0IHByb2ZpbGVEb2NzID0gZ2V0RmlsdGVyZWREb2N1bWVudHMoKTtcclxuICAgIGNvbnN0IHByb2ZpbGVJZHMgPSBuZXcgU2V0KHByb2ZpbGVEb2NzLm1hcChkb2MgPT4gZG9jLmlkKSk7XHJcbiAgICBkb2NzID0gdXJsRmlsdGVyZWREb2NzLmZpbHRlcihkb2MgPT4gcHJvZmlsZUlkcy5oYXMoZG9jLmlkKSk7XHJcbiAgfVxyXG5cclxuICAvLyAz77iP4oOjIEZpbmFsIHNvcnQgKyByZW5kZXJcclxuICBkb2NzID0gc29ydERvY3VtZW50cyhkb2NzLCAnbmFtZScpO1xyXG4gIHNldEN1cnJlbnREb2N1bWVudHMoZG9jcyk7XHJcbiAgYXdhaXQgaW5pdGlhbGl6ZUxpYnJhcnkodXJsRmlsdGVycywgcHJvZmlsZUluZm8pO1xyXG5cclxuICAvLyA077iP4oOjIElmIEZlZWQgaXMgdGhlIGRlZmF1bHQgZmlsdGVyIGluIHByb2ZpbGUgbW9kZSwgcmVuZGVyIGNhcm91c2VsIG92ZXIgdGhlIHRhYmxlXHJcbiAgaWYgKHByb2ZpbGVJbmZvKSB7XHJcbiAgICBjb25zdCBpbml0aWFsRmlsdGVyID0gZ2V0Q3VycmVudEZpbHRlcigpO1xyXG4gICAgaWYgKGluaXRpYWxGaWx0ZXIudG9Mb3dlckNhc2UoKSA9PT0gJ2ZlZWQnKSB7XHJcbiAgICAgIGNvbnN0IGxpYnJhcnlDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlicmFyeScpO1xyXG4gICAgICBpZiAobGlicmFyeUNvbnRhaW5lcikge1xyXG4gICAgICAgIGF3YWl0IHJlbmRlckZlZWRDYXJvdXNlbChsaWJyYXJ5Q29udGFpbmVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcbiJdLCJuYW1lcyI6WyJDQUNIRV9WRVJTSU9OIiwiY29uZmlnQ2FjaGUiLCJpbnN0aXR1dGlvbkNvbmZpZ0NhY2hlIiwianVyaXNkaWN0aW9uQ29uZmlnQ2FjaGUiLCJzcXVpcmNsZUljb25zQ29uZmlnQ2FjaGUiLCJjYWNoZVRpbWVzdGFtcHMiLCJkb2N1bWVudHMiLCJpbnN0aXR1dGlvbnMiLCJqdXJpc2RpY3Rpb25zIiwic3F1aXJjbGVJY29ucyIsImlzQ2FjaGVWYWxpZCIsImNhY2hlVHlwZSIsIm5vdyIsIkRhdGUiLCJ1cGRhdGVDYWNoZVRpbWVzdGFtcCIsImFzeW5jIiwiZmV0Y2hXaXRoQ2FjaGUiLCJ1cmwiLCJ1c2VDYWNoZUJ1c3RpbmciLCJjYWNoZUJ1c3RlciIsImZldGNoIiwiY2FjaGUiLCJoZWFkZXJzIiwiQWNjZXB0IiwibG9hZERvY3VtZW50c0NvbmZpZyIsInJlc3BvbnNlIiwib2siLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjb25maWciLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibG9hZEluc3RpdHV0aW9uQ29uZmlnIiwibG9hZEp1cmlzZGljdGlvbkNvbmZpZyIsImdldEluc3RpdHV0aW9uTWV0YWRhdGEiLCJpbnN0aXR1dGlvbk5hbWUiLCJnZXREb2N1bWVudHMiLCJmaWx0ZXIiLCJkb2MiLCJ2aXNpYmxlIiwibG9hZFNxdWlyY2xlSWNvbnNDb25maWciLCJpY29ucyIsImNsZWFyQ29uZmlnQ2FjaGUiLCJnZXRGZWVkRG9jdW1lbnRzIiwicHJvZmlsZVR5cGUiLCJwcm9maWxlTmFtZSIsImZlZWREb2NzIiwiaXRlbSIsImluc3RpdHV0aW9uIiwianVyaXNkaWN0aW9uIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImZlZWREb2MiLCJsaW5rZWREb2MiLCJjYXJvdXNlbCIsImxpbmtlZF9kb2N1bWVudF9pZCIsImRvY3VtZW50SWQiLCJmaW5kIiwiaWQiLCJnZXREb2N1bWVudEJ5SWQiLCJsaW5rZWREb2N1bWVudCIsInBhcnNlUXVlcnlQYXJhbXMiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsImdldCIsInBhcnNlSGFzaFBhcmFtcyIsImhhc2giLCJzbGljZSIsInNvcnREb2N1bWVudHMiLCJzb3J0QnkiLCJzb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJ0aXRsZSIsImxvY2FsZUNvbXBhcmUiLCJ2ZXJzaW9uRGlmZiIsInZlcnNpb24iLCJkYXRlIiwiZmlsdGVyRG9jdW1lbnRzIiwiZmlsdGVycyIsInRvTG93ZXJDYXNlIiwiZXNjYXBlSHRtbCIsInRleHQiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImlubmVySFRNTCIsImdldENhY2hlVmVyc2lvbiIsInNldENhY2hlVmVyc2lvbiIsInByb2ZpbGVTdGF0ZSIsImN1cnJlbnRGaWx0ZXIiLCJwcm9maWxlRGF0YSIsImF2YWlsYWJsZVR5cGVzIiwib25GaWx0ZXJDaGFuZ2VDYWxsYmFjayIsImV4dHJhY3RMYWJlbCIsIm5hbWUiLCJtYXRjaCIsInRyaW0iLCJsYWJlbCIsImRldGVjdFByb2ZpbGVNb2RlIiwidHlwZSIsImluaXRpYWxpemVQcm9maWxlVUkiLCJvbkZpbHRlckNoYW5nZSIsInByb2ZpbGVJbmZvIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJoaWRlUHJvZmlsZUNvbnRhaW5lciIsImFsbERvY3VtZW50cyIsIlNldCIsImluY2x1ZGVzIiwianVyaXNkaWN0aW9uTmFtZSIsImdldEp1cmlzZGljdGlvbk1ldGFkYXRhIiwicmVtb3ZlIiwic2hvd1Byb2ZpbGVDb250YWluZXIiLCJtZXRhZGF0YSIsImNvdmVyVXJsIiwiY292ZXIiLCJhdmF0YXJVcmwiLCJhdmF0YXIiLCJiaW8iLCJjb3VudFRleHQiLCJjb3VudCIsImxlbmd0aCIsImNvdW50SW5zdGl0dXRpb25Eb2N1bWVudHMiLCJzaXplIiwiY291bnRKdXJpc2RpY3Rpb25Db250cmlidXRvcnMiLCJidXR0b25UZXh0IiwiYWN0aW9uQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUFjdGlvbkJ1dHRvbkNsaWNrIiwicmVuZGVyUHJvZmlsZSIsInR5cGVzIiwiZmVlZCIsImJvb2siLCJndWlkZWxpbmUiLCJwb2xpY3kiLCJkZWNpc2lvbiIsInZlcmRpY3QiLCJub3RlIiwiZ2V0VHlwZUljb24iLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImpvaW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ0biIsInRvZ2dsZSIsImRhdGFzZXQiLCJzZXRGaWx0ZXIiLCJyZW5kZXJGaWx0ZXJQaWxscyIsImdldEN1cnJlbnRGaWx0ZXIiLCJnZXRGaWx0ZXJlZERvY3VtZW50cyIsImNvbnRhY3QiLCJtb2RhbE92ZXJsYXkiLCJtb2RhbFRpdGxlIiwibW9kYWxDb250ZW50IiwiZW1haWwiLCJwaG9uZSIsInJlcGxhY2UiLCJhZGRyZXNzIiwid2Vic2l0ZSIsInNob3dDb250YWN0Q2FyZCIsImNvbnRyaWJ1dG9ycyIsImNvbnRyaWJ1dG9yTWFwIiwiTWFwIiwic2V0IiwiQXJyYXkiLCJmcm9tIiwiZW50cmllcyIsImdldEp1cmlzZGljdGlvbkNvbnRyaWJ1dG9ycyIsImNvbnRyaWJ1dG9ySXRlbXMiLCJjb250cmlidXRvciIsImluc3ROYW1lIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2hvd0NvbnRyaWJ1dG9yTGlzdCIsImNsb3NlTW9kYWwiLCJyZW5kZXJGZWVkQ2Fyb3VzZWwiLCJjYXJvdXNlbEdyb3VwcyIsImdyb3VwTWFwIiwia2V5IiwiaGFzIiwicHVzaCIsImRvY3MiLCJzb3VyY2VMYWJlbCIsImp1cmlzZGljdGlvbkxhYmVsIiwiZ3JvdXAiLCJjYXJvdXNlbElkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwic2xpZGVzIiwiaSIsImNhcHRpb24iLCJkb2NMaW5rIiwiZmlsZW5hbWUiLCJpbWFnZVVybCIsImltYWdlIiwiaW5kZXgiLCJjYXJvdXNlbEhUTUwiLCJzbGlkZSIsImluc2VydEFkamFjZW50SFRNTCIsInNsaWRlQ291bnQiLCJ0cmFjayIsInByZXZCdG4iLCJxdWVyeVNlbGVjdG9yIiwibmV4dEJ0biIsImluZGljYXRvcnMiLCJhdXRvUGxheUludGVydmFsIiwiY3VycmVudEluZGV4IiwiZ29Ub1NsaWRlIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJpbmRpY2F0b3IiLCJuZXh0U2xpZGUiLCJwcmV2U2xpZGUiLCJzdGFydEF1dG9QbGF5Iiwic2V0SW50ZXJ2YWwiLCJzdG9wQXV0b1BsYXkiLCJjbGVhckludGVydmFsIiwicmVzZXRBdXRvUGxheSIsInRvdWNoU3RhcnRYIiwidG91Y2hFbmRYIiwiZSIsImNoYW5nZWRUb3VjaGVzIiwic2NyZWVuWCIsInBhc3NpdmUiLCJkaWZmIiwiYWJzIiwiaW5pdENhcm91c2VsTmF2aWdhdGlvbiIsIm1vZGFsQ2xvc2UiLCJ0YXJnZXQiLCJpbml0aWFsaXplTW9kYWxMaXN0ZW5lcnMiLCJjdXJyZW50U29ydCIsImN1cnJlbnREb2N1bWVudHMiLCJpc1Byb2ZpbGVNb2RlIiwicmVuZGVyTGlicmFyeVRhYmxlIiwid2FybiIsImlzSW5zdGl0dXRpb25Qcm9maWxlIiwiaGVhZGVySFRNTCIsImdyaWRDbGFzcyIsInJvdyIsImlzSnVyaXNkaWN0aW9uUHJvZmlsZSIsImNsYXNzTmFtZSIsInRpdGxlQ2VsbCIsImxpbmsiLCJocmVmIiwiYXBwZW5kQ2hpbGQiLCJtZXRhZGF0YUNlbGwiLCJqdXJpc2RpY3Rpb25MaW5rIiwidmVyc2lvbkNlbGwiLCJkYXRlQ2VsbCIsImRhdGVGb3JtYXR0ZWQiLCJpbnN0aXR1dGlvbkxpbmsiLCJjcmVhdGVMaWJyYXJ5Um93IiwidXBkYXRlU29ydEJ1dHRvbnMiLCJzb3J0VHlwZSIsImluaXRpYWxpemVMaWJyYXJ5IiwidXJsRmlsdGVycyIsImJvZHkiLCJzb3J0Q29udHJvbHMiLCJjb250ZXh0RWxlbWVudCIsImNvbnRleHQiLCJ1cGRhdGVDb250ZXh0IiwibWVzc2FnZSIsImVycm9yRGl2IiwiY3NzVGV4dCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJzZXRUaW1lb3V0Iiwic2hvd0Vycm9yIiwiREFSS19NT0RFX0tFWSIsImFkbWluU2VhbCIsInNhdmVkTW9kZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwcmVmZXJzRGFyayIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiZG9jdW1lbnRFbGVtZW50IiwiaXNEYXJrIiwiY29udGFpbnMiLCJzZXRJdGVtIiwiaW5pdERhcmtNb2RlIiwicHJlbG9hZEFsbENvbmZpZ3MiLCJ1cmxGaWx0ZXJlZERvY3MiLCJsaWJyYXJ5Q29udGFpbmVyIiwicHJvZmlsZURvY3MiLCJwcm9maWxlSWRzIiwibWVyZ2VkRG9jcyJdLCJtYXBwaW5ncyI6IkFBUUEsTUFBTUEsRUFBZ0IsUUFFdEIsSUFBSUMsRUFBYyxLQUNkQyxFQUF5QixLQUN6QkMsRUFBMEIsS0FDMUJDLEVBQTJCLEtBSS9CLElBQUlDLEVBQWtCLENBQ3BCQyxVQUFXLEVBQ1hDLGFBQWMsRUFDZEMsY0FBZSxFQUNmQyxjQUFlLEdBUWpCLFNBQVNDLEVBQWFDLEdBQ3BCLE1BQU1DLEVBQU1DLEtBQUtELE1BQ2pCLE9BQU9QLEVBQWdCTSxJQUFlQyxFQUFNUCxFQUFnQk0sR0FmNUMsR0FnQmxCLENBTUEsU0FBU0csRUFBcUJILEdBQzVCTixFQUFnQk0sR0FBYUUsS0FBS0QsS0FDcEMsQ0FRQUcsZUFBZUMsRUFBZUMsRUFBS0MsR0FBa0IsR0FFbkQsTUFBTUMsRUFBY0QsRUFDaEIsTUFBTWxCLE9BQW1CYSxLQUFLRCxRQUM5QixNQUFNQyxLQUFLRCxRQUVmLE9BQU9RLE1BQU1ILEVBQU1FLEVBQWEsQ0FDOUJFLE1BQU8sV0FDUEMsUUFBUyxDQUNQQyxPQUFVLHFCQUdoQixDQU1PUixlQUFlUyxJQUNwQixHQUFJdkIsR0FBZVMsRUFBYSxhQUM5QixPQUFPVCxFQUdULElBQ0UsTUFBTXdCLFFBQWlCVCxFQUFlLGdDQUN0QyxJQUFLUyxFQUFTQyxHQUNaLE1BQU0sSUFBSUMsTUFBTSwwQkFBMEJGLEVBQVNHLFVBQVVILEVBQVNJLGNBR3hFLE1BQU1DLFFBQWVMLEVBQVNNLE9BRzlCLE9BRkE5QixFQUFjNkIsRUFDZGhCLEVBQXFCLGFBQ2RnQixDQUNULENBQUUsTUFBT0UsR0FFUCxNQURBQyxRQUFRRCxNQUFNLGtDQUFtQ0EsR0FDM0NBLENBQ1IsQ0FDRixDQU1PakIsZUFBZW1CLElBQ3BCLEdBQUloQyxHQUEwQlEsRUFBYSxn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
