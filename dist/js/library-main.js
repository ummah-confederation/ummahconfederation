const t="1.0.0";let n=null,e=null,i=null,o=null;let a={documents:0,institutions:0,jurisdictions:0,squircleIcons:0};function s(t){const n=Date.now();return a[t]&&n-a[t]<3e5}function r(t){a[t]=Date.now()}async function c(n,e=!0){const i=e?`?v=${t}&t=${Date.now()}`:`?t=${Date.now()}`;return fetch(n+i,{cache:"no-store",headers:{Accept:"application/json"}})}async function l(){if(n&&s("documents"))return n;try{const t=await c("config/documents-config.json");if(!t.ok)throw new Error(`Failed to load config: ${t.status} ${t.statusText}`);const e=await t.json();return n=e,r("documents"),e}catch(t){throw console.error("Error loading documents config:",t),t}}async function d(){if(e&&s("institutions"))return e;try{const t=await c("config/institution-config.json");if(!t.ok)throw new Error(`Failed to load institution config: ${t.status} ${t.statusText}`);const n=await t.json();return e=n,r("institutions"),n}catch(t){return console.error("Error loading institution config:",t),{institutions:{}}}}async function u(){if(i&&s("jurisdictions"))return i;try{const t=await c("config/jurisdiction-config.json");if(!t.ok)throw new Error(`Failed to load jurisdiction config: ${t.status} ${t.statusText}`);const n=await t.json();return i=n,r("jurisdictions"),n}catch(t){return console.error("Error loading jurisdiction config:",t),{jurisdictions:{}}}}async function m(t){const n=await d();return n.institutions?.[t]||null}async function f(){return(await l()).documents.filter(t=>!1!==t.visible)}async function p(){if(o&&s("squircleIcons"))return o;try{const t=await c("config/squircle-icons-config.json");if(!t.ok)throw new Error(`Failed to load squircle icons config: ${t.status} ${t.statusText}`);const n=await t.json();return o=n,r("squircleIcons"),n}catch(t){return console.error("Error loading squircle icons config:",t),{icons:{}}}}function v(){n=null,e=null,i=null,o=null,a={documents:0,institutions:0,jurisdictions:0,squircleIcons:0}}function w(){const t=new URLSearchParams(window.location.search);return{item:t.get("item"),institution:t.get("institution"),jurisdiction:t.get("jurisdiction")}}function b(){const t=window.location.hash.slice(1);if(!t)return{item:null,institution:null,jurisdiction:null};const n=new URLSearchParams(t);return{item:n.get("item"),institution:n.get("institution"),jurisdiction:n.get("jurisdiction")}}function y(t,n){const e=[...t];switch(n){case"name":return e.sort((t,n)=>t.title.localeCompare(n.title));case"version":return e.sort((t,n)=>{const e=n.version-t.version;return 0!==e?e:new Date(n.date)-new Date(t.date)});case"date":return e.sort((t,n)=>new Date(n.date)-new Date(t.date));default:return e}}function h(t,n){return t.filter(t=>(!n.item||t.item.toLowerCase()===n.item.toLowerCase())&&((!n.institution||t.institution.toLowerCase()===n.institution.toLowerCase())&&(!n.jurisdiction||t.jurisdiction.toLowerCase()===n.jurisdiction.toLowerCase())))}function g(t){const n=document.createElement("div");return n.textContent=t,n.innerHTML}"undefined"!=typeof window&&(window.clearConfigCache=v,window.getCacheVersion=function(){return t},window.setCacheVersion=function(t){v()});const $={profileType:null,profileName:null,currentFilter:"all",documents:[],profileData:null,availableTypes:[]};let E=null;function j(t){const n=t.match(/^(.+?)\s*\[(.*?)\]\s*$/);return n?{name:n[1].trim(),label:n[2].trim()}:{name:t.trim(),label:""}}function L(){let t=w();return t.institution||t.jurisdiction||(t=b()),t.institution?{type:"institution",name:t.institution}:t.jurisdiction?{type:"jurisdiction",name:t.jurisdiction}:null}async function C(t){E=t;const n=L();if(!n)return void function(){const t=document.getElementById("profile-container");t&&t.classList.add("hidden")}();$.profileType=n.type,$.profileName=n.name;const e=await f();var i;$.documents=e.filter(t=>"institution"===$.profileType?t.institution===$.profileName:t.jurisdiction===$.profileName),$.availableTypes=(i=$.documents,["all",...[...new Set(i.map(t=>t.item))].sort((t,n)=>t.localeCompare(n))]),"institution"===$.profileType?$.profileData=await m($.profileName):$.profileData=await async function(t){const n=await u();return n.jurisdictions?.[t]||null}($.profileName),function(){!function(){const t=document.getElementById("profile-container");t&&t.classList.remove("hidden")}();const t=document.getElementById("profile-header");if(!t)return;const{name:n,label:e}=j($.profileName),i=$.profileData||{},o=i.cover||"./images/default-cover.jpg",a=i.avatar||"./images/default-avatar.webp",s=i.bio||"";let r="";if("institution"===$.profileType){const t=function(t,n){return t.filter(t=>t.institution===n).length}($.documents,$.profileName);r=`${t} Contributions`}else{const t=function(t,n){return new Set(t.filter(t=>t.jurisdiction===n).map(t=>t.institution)).size}($.documents,$.profileName);r=`${t} Contributors`}const c="institution"===$.profileType?"Contact":"Contributors";t.innerHTML=`\n    <div class="profile-cover">\n      <img src="${g(o)}" alt="Cover" loading="lazy" decoding="async" />\n    </div>\n    <div class="profile-info">\n      <div class="profile-header-row">\n        <div class="profile-avatar">\n          <img src="${g(a)}" alt="${g(n)}" loading="eager" fetchpriority="high" />\n        </div>\n        <div class="profile-actions">\n          <button class="profile-button" id="profile-action-btn">${g(c)}</button>\n        </div>\n      </div>\n      <div class="profile-details-section">\n        <h1 class="profile-name">${g(n)}</h1>\n        ${e?`<span class="profile-label">${g(e)}</span>`:""}\n        <span class="profile-count">${g(r)}</span>\n        ${s?`<p class="profile-bio">${g(s)}</p>`:""}\n      </div>\n    </div>\n  `;const l=document.getElementById("profile-action-btn");l&&l.addEventListener("click",T)}(),function(){const t=document.getElementById("profile-filters");if(!t)return;const n=$.availableTypes;t.innerHTML=`\n    <div class="filter-pills-container">\n      ${n.map(t=>{return`\n        <button \n          class="filter-pill ${t===$.currentFilter?"active":""}" \n          data-type="${g(t)}"\n        >\n          <span class="filter-pill-icon">\n            ${function(t){return{all:"üìÇ",book:"üìö",guideline:"üíé",policy:"üìã",decision:"‚ÑπÔ∏è",verdict:"‚öñÔ∏è",note:"üìé"}[t.toLowerCase()]||"üìÑ"}(t)}\n          </span>\n          <span class="filter-pill-label">${g((n=t,n.charAt(0).toUpperCase()+n.slice(1)))}</span>\n        </button>\n      `;var n}).join("")}\n    </div>\n  `,t.querySelectorAll(".filter-pill").forEach(t=>{t.addEventListener("click",()=>{!function(t){$.currentFilter=t,document.querySelectorAll(".filter-pill").forEach(n=>{n.classList.toggle("active",n.dataset.type===t)}),E&&E(t)}(t.dataset.type)})})}()}function x(){return"all"===$.currentFilter?$.documents:$.documents.filter(t=>t.item.toLowerCase()===$.currentFilter.toLowerCase())}function T(){"institution"===$.profileType?async function(){const t=$.profileData||{},{name:n,label:e}=j($.profileName),i=t.contact||{},o=document.getElementById("profile-modal-overlay"),a=document.getElementById("modal-title"),s=document.getElementById("modal-content");if(!o||!a||!s)return void console.error("Modal elements not found");a.textContent="Contact Information";const r=t.avatar||"./images/default-avatar.webp";s.innerHTML=`\n    <div class="contact-card">\n      <div class="contact-card-header">\n        <img src="${g(r)}" alt="${g(n)}" class="contact-card-avatar" loading="lazy" decoding="async" />\n        <div>\n          <div class="contact-card-name">${g(n)}</div>\n          ${e?`<div class="contact-card-label">${g(e)}</div>`:""}\n        </div>\n      </div>\n      ${i.email?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üìß</span>\n          <div>\n            <div class="contact-info-label">Email</div>\n            <div class="contact-info-value">\n              <a href="mailto:${g(i.email)}">${g(i.email)}</a>\n            </div>\n          </div>\n        </div>\n      `:""}\n      ${i.phone?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üì±</span>\n          <div>\n            <div class="contact-info-label">Phone</div>\n            <div class="contact-info-value">\n              <a href="tel:${g(i.phone.replace(/\s/g,""))}">${g(i.phone)}</a>\n            </div>\n          </div>\n        </div>\n      `:""}\n      ${i.address?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üìç</span>\n          <div>\n            <div class="contact-info-label">Address</div>\n            <div class="contact-info-value">${g(i.address)}</div>\n          </div>\n        </div>\n      `:""}\n      ${i.website?`\n        <div class="contact-info-item">\n          <span class="contact-info-icon">üåê</span>\n          <div>\n            <div class="contact-info-label">Website</div>\n            <div class="contact-info-value">\n              <a href="${g(i.website)}" target="_blank" rel="noopener noreferrer">${g(i.website)}</a>\n            </div>\n          </div>\n        </div>\n      `:""}\n      ${i.email||i.phone||i.address||i.website?"":'\n        <div class="contact-info-item">\n          <span class="contact-info-icon">‚ÑπÔ∏è</span>\n          <div class="contact-info-value">No contact information available</div>\n        </div>\n      '}\n    </div>\n  `,o.classList.add("active")}():async function(){j($.profileName);const t=document.getElementById("profile-modal-overlay"),n=document.getElementById("modal-title"),e=document.getElementById("modal-content");if(!t||!n||!e)return void console.error("Modal elements not found");n.textContent="Contributors";const i=function(t){const n=new Map;return $.documents.forEach(e=>{if(e.jurisdiction===t){const t=e.institution;n.set(t,(n.get(t)||0)+1)}}),Array.from(n.entries()).map(([t,n])=>({name:t,count:n})).sort((t,n)=>n.count-t.count)}($.profileName);if(0===i.length)e.innerHTML='\n      <div class="contact-info-item">\n        <span class="contact-info-icon">‚ÑπÔ∏è</span>\n        <div class="contact-info-value">No contributors found</div>\n      </div>\n    ';else{const t=await Promise.all(i.map(async t=>{const n=await m(t.name),e=n?.avatar||"./images/default-avatar.webp",{name:i}=j(t.name);return`\n          <div class="contributor-item">\n            <img src="${g(e)}" alt="${g(i)}" class="contributor-avatar" loading="lazy" decoding="async" />\n            <div class="contributor-info">\n              <div class="contributor-name">${g(i)}</div>\n              <div class="contributor-count">${t.count} contribution${1!==t.count?"s":""}</div>\n            </div>\n            <a href="?institution=${encodeURIComponent(t.name)}" class="contributor-link">View</a>\n          </div>\n        `}));e.innerHTML=`\n      <div class="contributor-list">\n        ${t.join("")}\n      </div>\n    `}t.classList.add("active")}()}function k(){const t=document.getElementById("profile-modal-overlay");t&&t.classList.remove("active")}!function(){const t=document.getElementById("profile-modal-overlay"),n=document.getElementById("modal-close");n&&n.addEventListener("click",k),t&&t.addEventListener("click",n=>{n.target===t&&k()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&k()})}();let I="name",N=[],B=!1;function M(t){const n=document.getElementById("library");if(!n)return void console.warn("Library container not found");const e=L(),i="institution"===e?.type,o=i||"jurisdiction"===e?.type;n.innerHTML="";let a="";if(o){const t="library-grid-profile";a=i?`\n<div class="library-row library-header ${t} gap-3 items-baseline text-left font-bold border-b border-black pb-1 mb-3">\n  <span class="overflow-hidden text-ellipsis whitespace-nowrap">Title</span>\n  <span class="text-right whitespace-nowrap">Posted in</span>\n</div>`:`\n<div class="library-row library-header ${t} gap-3 items-baseline text-left font-bold border-b border-black pb-1 mb-3">\n  <span class="overflow-hidden text-ellipsis whitespace-nowrap">Title</span>\n  <span class="text-right whitespace-nowrap">Posted by</span>\n</div>`}else{a=`\n<div class="library-row library-header ${"library-grid-default"} gap-4 items-start text-left font-bold border-b border-black pb-1 mb-3">\n  <span class="overflow-hidden text-ellipsis whitespace-nowrap">Title</span>\n  <span class="text-center tabular-nums">Version</span>\n  <span class="text-right whitespace-nowrap">Updated Date</span>\n</div>`}n.innerHTML=a,t.forEach(t=>{const e=function(t){const n=L(),e="institution"===n?.type,i="jurisdiction"===n?.type,o=e||i,a=document.createElement("div"),s=o?"library-grid-profile":"library-grid-default";a.className=`library-row ${s} gap-3 items-start border-b border-gray-200 py-2`,a.dataset.name=t.title,a.dataset.version=t.version,a.dataset.date=t.date,a.dataset.item=t.item,a.dataset.institution=t.institution,a.dataset.jurisdiction=t.jurisdiction;const r=document.createElement("span");r.className="overflow-hidden text-ellipsis whitespace-nowrap min-w-0";const c=document.createElement("a");c.href=t.filename,c.textContent=t.title,c.className="block overflow-hidden text-ellipsis whitespace-nowrap",r.appendChild(c);const l=document.createElement("span");if(e){l.className="library-metadata text-right whitespace-nowrap overflow-hidden text-sm text-ellipsis shrink-0";const n=(t.jurisdiction||"").replace(/\s*\[.*?\]\s*/g,""),e=t.jurisdiction?`?jurisdiction=${encodeURIComponent(t.jurisdiction)}`:"#";l.innerHTML=`<span class="sm:hidden">Posted in </span><a href="${g(e)}" class="library-profile-link">${g(n)}</a>`}else{if(!i){const n=document.createElement("span");n.className="library-version text-center text-sm   tabular-nums",n.innerHTML=`<span class="sm:hidden text-sm">Version </span>${t.version}`;const e=document.createElement("span");return e.className="library-date text-right whitespace-nowrap",e.textContent=t.dateFormatted,a.appendChild(r),a.appendChild(n),a.appendChild(e),a}{l.className="library-metadata text-right whitespace-nowrap overflow-hidden text-sm text-ellipsis shrink-0";const n=(t.institution||"").replace(/\s*\[.*?\]\s*/g,""),e=t.institution?`?institution=${encodeURIComponent(t.institution)}`:"#";l.innerHTML=`<span class="sm:hidden">Posted by </span><a href="${g(e)}" class="library-profile-link">${g(n)}</a>`}}return a.appendChild(r),a.appendChild(l),a}(t);n.appendChild(e)})}function D(t){document.querySelectorAll(".sort-controls button").forEach(n=>{n.classList.remove("active"),n.dataset.sort===t&&n.classList.add("active")})}async function q(t={},n=null){try{B=!!n||!!L(),B?document.body.classList.add("has-profile"):document.body.classList.remove("has-profile");const e=document.querySelector(".sort-controls-wrapper");e&&(B?e.classList.add("hidden"):e.classList.remove("hidden"));const i=document.getElementById("library-context");if(i&&(B?i.classList.add("hidden"):i.classList.remove("hidden")),0===N.length){const n=await f();N=h(n,t),N=y(N,I)}M(N),function(t){const n=document.getElementById("library-context");if(!n)return;const e=[];t.item&&e.push(t.item),t.institution&&e.push(t.institution),t.jurisdiction&&e.push(t.jurisdiction),0===e.length&&e.push("All"),n.textContent=e.join(" ¬∑ ")}(t),D(I),B||document.querySelectorAll(".sort-controls button").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.sort;var e;n&&(I=e=n,N=y(N,e),M(N),D(e))})})}catch(t){console.error("Failed to initialize library:",t),function(t){console.error(t);const n=document.createElement("div");n.className="error-message",n.style.cssText="\n    background: #fee;\n    border: 1px solid #fcc;\n    color: #c00;\n    padding: 1rem;\n    margin: 1rem;\n    border-radius: 4px;\n    text-align: center;\n  ",n.textContent=t,document.body.insertBefore(n,document.body.firstChild),setTimeout(()=>{n.remove()},5e3)}("Unable to load document library. Please try again later.")}}const S="darkMode";document.addEventListener("DOMContentLoaded",async()=>{!function(){const t=document.querySelector(".admin-seal");if(!t)return;const n=localStorage.getItem(S),e=window.matchMedia("(prefers-color-scheme: dark)").matches;("true"===n||!n&&e)&&document.documentElement.classList.add("dark"),t.addEventListener("click",()=>{document.documentElement.classList.toggle("dark");const t=document.documentElement.classList.contains("dark");localStorage.setItem(S,t)})}(),await async function(){const[t,n,e,i]=await Promise.all([l(),d(),u(),p()]);return{documents:t,institutions:n,jurisdictions:e,squircleIcons:i}}();const t=await f();let n=w();n.institution||n.jurisdiction||n.item||(n=b());const e=L();let i=t;if(i=h(i,n),e){await C(()=>{const t=x(),n=new Set(t.map(t=>t.id)),e=i.filter(t=>n.has(t.id));N=y(e,I),M(N),D(I)});const t=x(),n=new Set(t.map(t=>t.id));i=i.filter(t=>n.has(t.id))}i=y(i,"name"),N=i,q(n,e)});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlicmFyeS1tYWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9qcy9jb25maWcuanMiLCIuLi8uLi9qcy91dGlscy5qcyIsIi4uLy4uL2pzL3Byb2ZpbGUtdWkuanMiLCIuLi8uLi9qcy9saWJyYXJ5LXVpLmpzIiwiLi4vLi4vanMvbGlicmFyeS1tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb25maWd1cmF0aW9uIE1vZHVsZVxyXG4gKiBMb2FkcyBhbmQgcHJvdmlkZXMgYWNjZXNzIHRvIGRvY3VtZW50cy1jb25maWcuanNvbiwgaW5zdGl0dXRpb24tY29uZmlnLmpzb24sIGFuZCBqdXJpc2RpY3Rpb24tY29uZmlnLmpzb25cclxuICogT3B0aW1pemVkIHdpdGggYWdncmVzc2l2ZSBjYWNoaW5nIHRvIHJlZHVjZSBuZXR3b3JrIHJlcXVlc3RzXHJcbiAqIEluY2x1ZGVzIGNhY2hlLWJ1c3RpbmcgZm9yIGRldmVsb3BtZW50XHJcbiAqL1xyXG5cclxuLy8gQ2FjaGUgdmVyc2lvbiAtIGluY3JlbWVudCB0aGlzIHdoZW4gY29uZmlnIGZpbGVzIGNoYW5nZSB0byBidXN0IGNhY2hlXHJcbmNvbnN0IENBQ0hFX1ZFUlNJT04gPSAnMS4wLjAnO1xyXG5cclxubGV0IGNvbmZpZ0NhY2hlID0gbnVsbDtcclxubGV0IGluc3RpdHV0aW9uQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG5sZXQganVyaXNkaWN0aW9uQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG5sZXQgc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlID0gbnVsbDtcclxuXHJcbi8vIENhY2hlIHRpbWVzdGFtcHMgZm9yIFRUTC1iYXNlZCBpbnZhbGlkYXRpb25cclxuY29uc3QgQ0FDSEVfVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXHJcbmxldCBjYWNoZVRpbWVzdGFtcHMgPSB7XHJcbiAgZG9jdW1lbnRzOiAwLFxyXG4gIGluc3RpdHV0aW9uczogMCxcclxuICBqdXJpc2RpY3Rpb25zOiAwLFxyXG4gIHNxdWlyY2xlSWNvbnM6IDBcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBjYWNoZSBpcyBzdGlsbCB2YWxpZCBiYXNlZCBvbiBUVExcclxuICogQHBhcmFtIHtzdHJpbmd9IGNhY2hlVHlwZSAtIFR5cGUgb2YgY2FjaGUgdG8gY2hlY2tcclxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgY2FjaGUgaXMgdmFsaWRcclxuICovXHJcbmZ1bmN0aW9uIGlzQ2FjaGVWYWxpZChjYWNoZVR5cGUpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIHJldHVybiBjYWNoZVRpbWVzdGFtcHNbY2FjaGVUeXBlXSAmJiAobm93IC0gY2FjaGVUaW1lc3RhbXBzW2NhY2hlVHlwZV0gPCBDQUNIRV9UVEwpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGNhY2hlIHRpbWVzdGFtcFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVUeXBlIC0gVHlwZSBvZiBjYWNoZSB0byB1cGRhdGVcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUNhY2hlVGltZXN0YW1wKGNhY2hlVHlwZSkge1xyXG4gIGNhY2hlVGltZXN0YW1wc1tjYWNoZVR5cGVdID0gRGF0ZS5ub3coKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIHdpdGggY2FjaGluZyBhbmQgY2FjaGUtYnVzdGluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVVJMIHRvIGZldGNoXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlQ2FjaGVCdXN0aW5nIC0gV2hldGhlciB0byBhZGQgY2FjaGUtYnVzdGluZyBxdWVyeSBwYXJhbVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59IEZldGNoIHJlc3BvbnNlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhDYWNoZSh1cmwsIHVzZUNhY2hlQnVzdGluZyA9IHRydWUpIHtcclxuICAvLyBBZGQgY2FjaGUtYnVzdGluZyBxdWVyeSBwYXJhbSBiYXNlZCBvbiB2ZXJzaW9uIGFuZCB0aW1lc3RhbXBcclxuICBjb25zdCBjYWNoZUJ1c3RlciA9IHVzZUNhY2hlQnVzdGluZyBcclxuICAgID8gYD92PSR7Q0FDSEVfVkVSU0lPTn0mdD0ke0RhdGUubm93KCl9YCBcclxuICAgIDogYD90PSR7RGF0ZS5ub3coKX1gO1xyXG4gIFxyXG4gIHJldHVybiBmZXRjaCh1cmwgKyBjYWNoZUJ1c3Rlciwge1xyXG4gICAgY2FjaGU6ICduby1zdG9yZScsIC8vIFVzZSBuby1zdG9yZSB0byBsZXQgY2FjaGUtYnVzdGluZyBxdWVyeSBwYXJhbSBjb250cm9sIGNhY2hpbmdcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUgZG9jdW1lbnRzIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZERvY3VtZW50c0NvbmZpZygpIHtcclxuICBpZiAoY29uZmlnQ2FjaGUgJiYgaXNDYWNoZVZhbGlkKCdkb2N1bWVudHMnKSkge1xyXG4gICAgcmV0dXJuIGNvbmZpZ0NhY2hlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoQ2FjaGUoJ2NvbmZpZy9kb2N1bWVudHMtY29uZmlnLmpzb24nKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBjb25maWc6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uZmlnQ2FjaGUgPSBjb25maWc7XHJcbiAgICB1cGRhdGVDYWNoZVRpbWVzdGFtcCgnZG9jdW1lbnRzJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGRvY3VtZW50cyBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUgaW5zdGl0dXRpb24gY29uZmlndXJhdGlvbiBmcm9tIEpTT04gZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgaW5zdGl0dXRpb24gY29uZmlndXJhdGlvbiBvYmplY3RcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW5zdGl0dXRpb25Db25maWcoKSB7XHJcbiAgaWYgKGluc3RpdHV0aW9uQ29uZmlnQ2FjaGUgJiYgaXNDYWNoZVZhbGlkKCdpbnN0aXR1dGlvbnMnKSkge1xyXG4gICAgcmV0dXJuIGluc3RpdHV0aW9uQ29uZmlnQ2FjaGU7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhDYWNoZSgnY29uZmlnL2luc3RpdHV0aW9uLWNvbmZpZy5qc29uJyk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgaW5zdGl0dXRpb24gY29uZmlnOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGluc3RpdHV0aW9uQ29uZmlnQ2FjaGUgPSBjb25maWc7XHJcbiAgICB1cGRhdGVDYWNoZVRpbWVzdGFtcCgnaW5zdGl0dXRpb25zJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGluc3RpdHV0aW9uIGNvbmZpZzonLCBlcnJvcik7XHJcbiAgICAvLyBSZXR1cm4gZW1wdHkgY29uZmlnIG9uIGVycm9yIHRvIHByZXZlbnQgYnJlYWtpbmcgdGhlIFVJXHJcbiAgICByZXR1cm4geyBpbnN0aXR1dGlvbnM6IHt9IH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUganVyaXNkaWN0aW9uIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gVGhlIGp1cmlzZGljdGlvbiBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRKdXJpc2RpY3Rpb25Db25maWcoKSB7XHJcbiAgaWYgKGp1cmlzZGljdGlvbkNvbmZpZ0NhY2hlICYmIGlzQ2FjaGVWYWxpZCgnanVyaXNkaWN0aW9ucycpKSB7XHJcbiAgICByZXR1cm4ganVyaXNkaWN0aW9uQ29uZmlnQ2FjaGU7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhDYWNoZSgnY29uZmlnL2p1cmlzZGljdGlvbi1jb25maWcuanNvbicpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGp1cmlzZGljdGlvbiBjb25maWc6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgXHJcbiAgICBqdXJpc2RpY3Rpb25Db25maWdDYWNoZSA9IGNvbmZpZztcclxuICAgIHVwZGF0ZUNhY2hlVGltZXN0YW1wKCdqdXJpc2RpY3Rpb25zJyk7XHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGp1cmlzZGljdGlvbiBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgLy8gUmV0dXJuIGVtcHR5IGNvbmZpZyBvbiBlcnJvciB0byBwcmV2ZW50IGJyZWFraW5nIHRoZSBVSVxyXG4gICAgcmV0dXJuIHsganVyaXNkaWN0aW9uczoge30gfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgaW5zdGl0dXRpb24gbWV0YWRhdGEgYnkgZnVsbCBpbnN0aXR1dGlvbiBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnN0aXR1dGlvbk5hbWUgLSBUaGUgZnVsbCBpbnN0aXR1dGlvbiBuYW1lIChlLmcuLCBcIlVtbWFoIENhYmluZXQgW05vbi1Qcm9maXQg4oCiIFByaXZhdGVdXCIpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGluc3RpdHV0aW9uIG1ldGFkYXRhIG9yIG51bGwgaWYgbm90IGZvdW5kXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGl0dXRpb25NZXRhZGF0YShpbnN0aXR1dGlvbk5hbWUpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkSW5zdGl0dXRpb25Db25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmluc3RpdHV0aW9ucz8uW2luc3RpdHV0aW9uTmFtZV0gfHwgbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBqdXJpc2RpY3Rpb24gbWV0YWRhdGEgYnkgZnVsbCBqdXJpc2RpY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganVyaXNkaWN0aW9uTmFtZSAtIFRoZSBmdWxsIGp1cmlzZGljdGlvbiBuYW1lIChlLmcuLCBcIkJvcm5lbyBbUmVnaW9uXVwiKVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBqdXJpc2RpY3Rpb24gbWV0YWRhdGEgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRKdXJpc2RpY3Rpb25NZXRhZGF0YShqdXJpc2RpY3Rpb25OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZEp1cmlzZGljdGlvbkNvbmZpZygpO1xyXG4gIHJldHVybiBjb25maWcuanVyaXNkaWN0aW9ucz8uW2p1cmlzZGljdGlvbk5hbWVdIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIHZpc2libGUgZG9jdW1lbnRzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gQXJyYXkgb2YgZG9jdW1lbnQgb2JqZWN0c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50cygpIHtcclxuICBjb25zdCBjb25maWcgPSBhd2FpdCBsb2FkRG9jdW1lbnRzQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5kb2N1bWVudHMuZmlsdGVyKGRvYyA9PiBkb2MudmlzaWJsZSAhPT0gZmFsc2UpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVuaXF1ZSBpdGVtcyBmcm9tIGFsbCBkb2N1bWVudHNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXk+fSBTb3J0ZWQgYXJyYXkgb2YgdW5pcXVlIGl0ZW1zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SXRlbXMoKSB7XHJcbiAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcbiAgY29uc3QgaXRlbXMgPSBuZXcgU2V0KGRvY3VtZW50cy5tYXAoZG9jID0+IGRvYy5pdGVtKSk7XHJcbiAgcmV0dXJuIFsuLi5pdGVtc10uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1bmlxdWUgaW5zdGl0dXRpb25zIGZyb20gYWxsIGRvY3VtZW50c1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IFNvcnRlZCBhcnJheSBvZiB1bmlxdWUgaW5zdGl0dXRpb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGl0dXRpb25zKCkge1xyXG4gIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGdldERvY3VtZW50cygpO1xyXG4gIGNvbnN0IGluc3RpdHV0aW9ucyA9IG5ldyBTZXQoZG9jdW1lbnRzLm1hcChkb2MgPT4gZG9jLmluc3RpdHV0aW9uKSk7XHJcbiAgcmV0dXJuIFsuLi5pbnN0aXR1dGlvbnNdLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdW5pcXVlIGp1cmlzZGljdGlvbnMgZnJvbSBhbGwgZG9jdW1lbnRzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gU29ydGVkIGFycmF5IG9mIHVuaXF1ZSBqdXJpc2RpY3Rpb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SnVyaXNkaWN0aW9ucygpIHtcclxuICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHMoKTtcclxuICBjb25zdCBqdXJpc2RpY3Rpb25zID0gbmV3IFNldChkb2N1bWVudHMubWFwKGRvYyA9PiBkb2MuanVyaXNkaWN0aW9uKSk7XHJcbiAgcmV0dXJuIFsuLi5qdXJpc2RpY3Rpb25zXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZCB0aGUgc3F1aXJjbGUgaWNvbnMgY29uZmlndXJhdGlvbiBmcm9tIEpTT04gZmlsZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgc3F1aXJjbGUgaWNvbnMgY29uZmlndXJhdGlvbiBvYmplY3RcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkU3F1aXJjbGVJY29uc0NvbmZpZygpIHtcclxuICBpZiAoc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlICYmIGlzQ2FjaGVWYWxpZCgnc3F1aXJjbGVJY29ucycpKSB7XHJcbiAgICByZXR1cm4gc3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoQ2FjaGUoJ2NvbmZpZy9zcXVpcmNsZS1pY29ucy1jb25maWcuanNvbicpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHNxdWlyY2xlIGljb25zIGNvbmZpZzogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb25maWcgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBzcXVpcmNsZUljb25zQ29uZmlnQ2FjaGUgPSBjb25maWc7XHJcbiAgICB1cGRhdGVDYWNoZVRpbWVzdGFtcCgnc3F1aXJjbGVJY29ucycpO1xyXG4gICAgcmV0dXJuIGNvbmZpZztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBzcXVpcmNsZSBpY29ucyBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgLy8gUmV0dXJuIGVtcHR5IGNvbmZpZyBvbiBlcnJvciB0byBwcmV2ZW50IGJyZWFraW5nIHRoZSBVSVxyXG4gICAgcmV0dXJuIHsgaWNvbnM6IHt9IH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHNxdWlyY2xlIGljb24gbWV0YWRhdGEgYnkgaXRlbSBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtTmFtZSAtIFRoZSBpdGVtIG5hbWUgKGUuZy4sIFwiQm9va1wiLCBcIlBvbGljeVwiLCBcIkRlY2lzaW9uXCIpXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGljb24gbWV0YWRhdGEgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTcXVpcmNsZUljb25NZXRhZGF0YShpdGVtTmFtZSkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWRTcXVpcmNsZUljb25zQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5pY29ucz8uW2l0ZW1OYW1lXSB8fCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogUHJlbG9hZCBhbGwgY29uZmlndXJhdGlvbnMgYXQgb25jZVxyXG4gKiBVc2VmdWwgZm9yIGluaXRpYWwgcGFnZSBsb2FkIHRvIGJhdGNoIHJlcXVlc3RzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IE9iamVjdCBjb250YWluaW5nIGFsbCBjb25maWdzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlbG9hZEFsbENvbmZpZ3MoKSB7XHJcbiAgY29uc3QgW2RvY3VtZW50cywgaW5zdGl0dXRpb25zLCBqdXJpc2RpY3Rpb25zLCBzcXVpcmNsZUljb25zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGxvYWREb2N1bWVudHNDb25maWcoKSxcclxuICAgIGxvYWRJbnN0aXR1dGlvbkNvbmZpZygpLFxyXG4gICAgbG9hZEp1cmlzZGljdGlvbkNvbmZpZygpLFxyXG4gICAgbG9hZFNxdWlyY2xlSWNvbnNDb25maWcoKVxyXG4gIF0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZG9jdW1lbnRzLFxyXG4gICAgaW5zdGl0dXRpb25zLFxyXG4gICAganVyaXNkaWN0aW9ucyxcclxuICAgIHNxdWlyY2xlSWNvbnNcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBjdXJyZW50IGNhY2hlIHZlcnNpb25cclxuICogQHJldHVybnMge3N0cmluZ30gQ3VycmVudCBjYWNoZSB2ZXJzaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVWZXJzaW9uKCkge1xyXG4gIHJldHVybiBDQUNIRV9WRVJTSU9OO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGEgbmV3IGNhY2hlIHZlcnNpb24gdG8gYnVzdCBhbGwgY2FjaGVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJzaW9uIC0gTmV3IHZlcnNpb24gc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q2FjaGVWZXJzaW9uKHZlcnNpb24pIHtcclxuICAvLyBDbGVhciBhbGwgY2FjaGVzIHdoZW4gdmVyc2lvbiBjaGFuZ2VzXHJcbiAgY2xlYXJDb25maWdDYWNoZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgdGhlIGNvbmZpZyBjYWNoZSAodXNlZnVsIGZvciB0ZXN0aW5nIG9yIGhvdC1yZWxvYWQpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJDb25maWdDYWNoZSgpIHtcclxuICBjb25maWdDYWNoZSA9IG51bGw7XHJcbiAgaW5zdGl0dXRpb25Db25maWdDYWNoZSA9IG51bGw7XHJcbiAganVyaXNkaWN0aW9uQ29uZmlnQ2FjaGUgPSBudWxsO1xyXG4gIHNxdWlyY2xlSWNvbnNDb25maWdDYWNoZSA9IG51bGw7XHJcbiAgY2FjaGVUaW1lc3RhbXBzID0ge1xyXG4gICAgZG9jdW1lbnRzOiAwLFxyXG4gICAgaW5zdGl0dXRpb25zOiAwLFxyXG4gICAganVyaXNkaWN0aW9uczogMCxcclxuICAgIHNxdWlyY2xlSWNvbnM6IDBcclxuICB9O1xyXG59XHJcblxyXG4vLyBFeHBvc2UgY2FjaGUgdXRpbGl0aWVzIGdsb2JhbGx5IGZvciBkZXZlbG9wbWVudCAoY2FuIGJlIGNhbGxlZCBmcm9tIGJyb3dzZXIgY29uc29sZSlcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgd2luZG93LmNsZWFyQ29uZmlnQ2FjaGUgPSBjbGVhckNvbmZpZ0NhY2hlO1xyXG4gIHdpbmRvdy5nZXRDYWNoZVZlcnNpb24gPSBnZXRDYWNoZVZlcnNpb247XHJcbiAgd2luZG93LnNldENhY2hlVmVyc2lvbiA9IHNldENhY2hlVmVyc2lvbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBpbnN0aXR1dGlvbiBmZWVkIGNvbmZpZ3VyYXRpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IGluc3RpdHV0aW9uTmFtZSAtIFRoZSBmdWxsIGluc3RpdHV0aW9uIG5hbWVcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBUaGUgZmVlZCBjb25maWcgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnN0aXR1dGlvbkZlZWRDb25maWcoaW5zdGl0dXRpb25OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZEluc3RpdHV0aW9uQ29uZmlnKCk7XHJcbiAgcmV0dXJuIGNvbmZpZy5pbnN0aXR1dGlvbnM/LltpbnN0aXR1dGlvbk5hbWVdPy5mZWVkX2NvbmZpZyB8fCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGp1cmlzZGljdGlvbiBmZWVkIGNvbmZpZ3VyYXRpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IGp1cmlzZGljdGlvbk5hbWUgLSBUaGUgZnVsbCBqdXJpc2RpY3Rpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFRoZSBmZWVkIGNvbmZpZyBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEp1cmlzZGljdGlvbkZlZWRDb25maWcoanVyaXNkaWN0aW9uTmFtZSkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGxvYWRKdXJpc2RpY3Rpb25Db25maWcoKTtcclxuICByZXR1cm4gY29uZmlnLmp1cmlzZGljdGlvbnM/LltqdXJpc2RpY3Rpb25OYW1lXT8uZmVlZF9jb25maWcgfHwgbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgY2Fyb3VzZWxzIGZvciBhIGp1cmlzZGljdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30ganVyaXNkaWN0aW9uTmFtZSAtIFRoZSBmdWxsIGp1cmlzZGljdGlvbiBuYW1lXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gQXJyYXkgb2YgY2Fyb3VzZWwgb2JqZWN0c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEp1cmlzZGljdGlvbkNhcm91c2VscyhqdXJpc2RpY3Rpb25OYW1lKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZEluc3RpdHV0aW9uQ29uZmlnKCk7XHJcbiAgY29uc3QgY2Fyb3VzZWxzID0gW107XHJcblxyXG4gIGZvciAoY29uc3QgW2luc3ROYW1lLCBpbnN0RGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoY29uZmlnLmluc3RpdHV0aW9ucyB8fCB7fSkpIHtcclxuICAgIGNvbnN0IGNhcm91c2VsID0gaW5zdERhdGEuZmVlZF9jb25maWc/LmNhcm91c2VsO1xyXG4gICAgaWYgKGNhcm91c2VsICYmIGNhcm91c2VsLnBvc3RfdG9fanVyaXNkaWN0aW9ucz8uaW5jbHVkZXMoanVyaXNkaWN0aW9uTmFtZSkpIHtcclxuICAgICAgLy8gRmV0Y2ggZG9jdW1lbnQgZGF0YSBmb3IgZWFjaCBpbWFnZVxyXG4gICAgICBjb25zdCBpbWFnZXNXaXRoRG9jcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAgIGNhcm91c2VsLmltYWdlcy5tYXAoYXN5bmMgKGltZykgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZG9jID0gaW1nLmRvY3VtZW50X2lkID8gYXdhaXQgZ2V0RG9jdW1lbnRCeUlkKGltZy5kb2N1bWVudF9pZCkgOiBudWxsO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4uaW1nLFxyXG4gICAgICAgICAgICBkb2N1bWVudDogZG9jXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjYXJvdXNlbHMucHVzaCh7XHJcbiAgICAgICAgaW5zdGl0dXRpb246IGluc3ROYW1lLFxyXG4gICAgICAgIC4uLmNhcm91c2VsLFxyXG4gICAgICAgIGltYWdlczogaW1hZ2VzV2l0aERvY3NcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2Fyb3VzZWxzO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGRvY3VtZW50IGJ5IElEXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50IElEXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gVGhlIGRvY3VtZW50IG9iamVjdCBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50QnlJZChkb2N1bWVudElkKSB7XHJcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgbG9hZERvY3VtZW50c0NvbmZpZygpO1xyXG4gIGNvbnN0IGRvYyA9IGNvbmZpZy5kb2N1bWVudHMuZmluZChkb2MgPT4gZG9jLmlkID09PSBkb2N1bWVudElkKSB8fCBudWxsO1xyXG4gIHJldHVybiBkb2M7XHJcbn1cclxuIiwiLyoqXHJcbiAqIFV0aWxpdHkgRnVuY3Rpb25zXHJcbiAqIFNoYXJlZCBoZWxwZXIgZnVuY3Rpb25zIGZvciB0aGUgZG9jdW1lbnQgbWFuYWdlbWVudCBzeXN0ZW1cclxuICovXHJcblxyXG4vKipcclxuICogUGFyc2UgVVJMIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgZmlsdGVyIHBhcmFtZXRlcnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5UGFyYW1zKCkge1xyXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGl0ZW06IHBhcmFtcy5nZXQoJ2l0ZW0nKSxcclxuICAgIGluc3RpdHV0aW9uOiBwYXJhbXMuZ2V0KCdpbnN0aXR1dGlvbicpLFxyXG4gICAganVyaXNkaWN0aW9uOiBwYXJhbXMuZ2V0KCdqdXJpc2RpY3Rpb24nKVxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBoYXNoLWJhc2VkIFVSTCBwYXJhbWV0ZXJzIChmb3IgY2xpZW50LXNpZGUgcm91dGluZyBjb21wYXRpYmlsaXR5KVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBmaWx0ZXIgcGFyYW1ldGVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSGFzaFBhcmFtcygpIHtcclxuICBjb25zdCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSk7IC8vIFJlbW92ZSAjXHJcbiAgaWYgKCFoYXNoKSByZXR1cm4geyBpdGVtOiBudWxsLCBpbnN0aXR1dGlvbjogbnVsbCwganVyaXNkaWN0aW9uOiBudWxsIH07XHJcbiAgXHJcbiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoKTtcclxuICByZXR1cm4ge1xyXG4gICAgaXRlbTogcGFyYW1zLmdldCgnaXRlbScpLFxyXG4gICAgaW5zdGl0dXRpb246IHBhcmFtcy5nZXQoJ2luc3RpdHV0aW9uJyksXHJcbiAgICBqdXJpc2RpY3Rpb246IHBhcmFtcy5nZXQoJ2p1cmlzZGljdGlvbicpXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIGEgZmlsdGVyIFVSTCBmb3IgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEZpbHRlciB0eXBlIChpdGVtLCBpbnN0aXR1dGlvbiwganVyaXNkaWN0aW9uKVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBGaWx0ZXIgdmFsdWVcclxuICogQHBhcmFtIHtib29sZWFufSBpc0FsbCAtIFdoZXRoZXIgdGhpcyBpcyB0aGUgXCJBbGxcIiBvcHRpb24gKG5vIGZpbHRlcilcclxuICogQHJldHVybnMge3N0cmluZ30gVVJMIHdpdGggcXVlcnkgcGFyYW1ldGVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRmlsdGVyVXJsKHR5cGUsIHZhbHVlLCBpc0FsbCA9IGZhbHNlKSB7XHJcbiAgaWYgKGlzQWxsKSB7XHJcbiAgICByZXR1cm4gJ2xpYnJhcnkuaHRtbCc7XHJcbiAgfVxyXG4gIHJldHVybiBgbGlicmFyeS5odG1sPyR7dHlwZX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgYSBkYXRlIHN0cmluZyBmb3IgZGlzcGxheVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZGF0ZVN0cmluZyAtIElTTyBkYXRlIHN0cmluZ1xyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgZGF0ZSBzdHJpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGVTdHJpbmcpIHtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIGNvbnN0IG1vbnRoID0gZGF0ZS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IG1vbnRoOiAnc2hvcnQnIH0pO1xyXG4gIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIGNvbnN0IG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcblxyXG4gIHJldHVybiBgJHtkYXl9ICR7bW9udGh9ICR7eWVhcn0gfCAke2hvdXJzfToke21pbnV0ZXN9YDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNvcnQgZG9jdW1lbnRzIGJ5IGZpZWxkXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGRvY3VtZW50cyAtIEFycmF5IG9mIGRvY3VtZW50IG9iamVjdHNcclxuICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIEZpZWxkIHRvIHNvcnQgYnkgKG5hbWUsIHZlcnNpb24sIGRhdGUpXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gU29ydGVkIGFycmF5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc29ydERvY3VtZW50cyhkb2N1bWVudHMsIHNvcnRCeSkge1xyXG4gIGNvbnN0IHNvcnRlZCA9IFsuLi5kb2N1bWVudHNdO1xyXG5cclxuICBzd2l0Y2ggKHNvcnRCeSkge1xyXG4gICAgY2FzZSAnbmFtZSc6XHJcbiAgICAgIHJldHVybiBzb3J0ZWQuc29ydCgoYSwgYikgPT4gYS50aXRsZS5sb2NhbGVDb21wYXJlKGIudGl0bGUpKTtcclxuXHJcbiAgICBjYXNlICd2ZXJzaW9uJzpcclxuICAgICAgcmV0dXJuIHNvcnRlZC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmVyc2lvbkRpZmYgPSBiLnZlcnNpb24gLSBhLnZlcnNpb247XHJcbiAgICAgICAgaWYgKHZlcnNpb25EaWZmICE9PSAwKSByZXR1cm4gdmVyc2lvbkRpZmY7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGIuZGF0ZSkgLSBuZXcgRGF0ZShhLmRhdGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICBjYXNlICdkYXRlJzpcclxuICAgICAgcmV0dXJuIHNvcnRlZC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmRhdGUpIC0gbmV3IERhdGUoYS5kYXRlKSk7XHJcblxyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIHNvcnRlZDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGaWx0ZXIgZG9jdW1lbnRzIGJhc2VkIG9uIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICogQHBhcmFtIHtBcnJheX0gZG9jdW1lbnRzIC0gQXJyYXkgb2YgZG9jdW1lbnQgb2JqZWN0c1xyXG4gKiBAcGFyYW0ge09iamVjdH0gZmlsdGVycyAtIEZpbHRlciBjcml0ZXJpYVxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IEZpbHRlcmVkIGFycmF5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyRG9jdW1lbnRzKGRvY3VtZW50cywgZmlsdGVycykge1xyXG4gIHJldHVybiBkb2N1bWVudHMuZmlsdGVyKGRvYyA9PiB7XHJcbiAgICBpZiAoZmlsdGVycy5pdGVtICYmIGRvYy5pdGVtLnRvTG93ZXJDYXNlKCkgIT09IGZpbHRlcnMuaXRlbS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJzLmluc3RpdHV0aW9uICYmIGRvYy5pbnN0aXR1dGlvbi50b0xvd2VyQ2FzZSgpICE9PSBmaWx0ZXJzLmluc3RpdHV0aW9uLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMuanVyaXNkaWN0aW9uICYmIGRvYy5qdXJpc2RpY3Rpb24udG9Mb3dlckNhc2UoKSAhPT0gZmlsdGVycy5qdXJpc2RpY3Rpb24udG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEVzY2FwZSBIVE1MIHRvIHByZXZlbnQgWFNTXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGV4dCB0byBlc2NhcGVcclxuICogQHJldHVybnMge3N0cmluZ30gRXNjYXBlZCB0ZXh0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlSHRtbCh0ZXh0KSB7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LnRleHRDb250ZW50ID0gdGV4dDtcclxuICByZXR1cm4gZGl2LmlubmVySFRNTDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3cgZXJyb3IgbWVzc2FnZSB0byB1c2VyXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gRXJyb3IgbWVzc2FnZSB0byBkaXNwbGF5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yKG1lc3NhZ2UpIHtcclxuICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG5cclxuICAvLyBDcmVhdGUgZXJyb3IgZWxlbWVudFxyXG4gIGNvbnN0IGVycm9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZXJyb3JEaXYuY2xhc3NOYW1lID0gJ2Vycm9yLW1lc3NhZ2UnO1xyXG4gIGVycm9yRGl2LnN0eWxlLmNzc1RleHQgPSBgXHJcbiAgICBiYWNrZ3JvdW5kOiAjZmVlO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2ZjYztcclxuICAgIGNvbG9yOiAjYzAwO1xyXG4gICAgcGFkZGluZzogMXJlbTtcclxuICAgIG1hcmdpbjogMXJlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBgO1xyXG4gIGVycm9yRGl2LnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuXHJcbiAgLy8gSW5zZXJ0IGF0IHRvcCBvZiBib2R5XHJcbiAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoZXJyb3JEaXYsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XHJcblxyXG4gIC8vIEF1dG8tcmVtb3ZlIGFmdGVyIDUgc2Vjb25kc1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgZXJyb3JEaXYucmVtb3ZlKCk7XHJcbiAgfSwgNTAwMCk7XHJcbn1cclxuIiwiLyoqXHJcbiAqIFByb2ZpbGUgVUkgTW9kdWxlXHJcbiAqIEhhbmRsZXMgcmVuZGVyaW5nIGFuZCBpbnRlcmFjdGlvbiBmb3Igc29jaWFsIG1lZGlhLXN0eWxlIHByb2ZpbGUgdmlld3NcclxuICogVXNlZCBvbiBsaWJyYXJ5Lmh0bWwgd2hlbiBpbnN0aXR1dGlvbiBvciBqdXJpc2RpY3Rpb24gZmlsdGVyIGlzIGFjdGl2ZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgZ2V0SW5zdGl0dXRpb25NZXRhZGF0YSxcclxuICBnZXRKdXJpc2RpY3Rpb25NZXRhZGF0YSxcclxuICBnZXREb2N1bWVudHMsXHJcbn0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XHJcbmltcG9ydCB7IHBhcnNlUXVlcnlQYXJhbXMsIHBhcnNlSGFzaFBhcmFtcywgZXNjYXBlSHRtbCB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcblxyXG4vLyBQcm9maWxlIHN0YXRlXHJcbmNvbnN0IHByb2ZpbGVTdGF0ZSA9IHtcclxuICBwcm9maWxlVHlwZTogbnVsbCwgLy8gJ2luc3RpdHV0aW9uJyBvciAnanVyaXNkaWN0aW9uJ1xyXG4gIHByb2ZpbGVOYW1lOiBudWxsLCAvLyBpbnN0aXR1dGlvbiBvciBqdXJpc2RpY3Rpb24gbmFtZVxyXG4gIGN1cnJlbnRGaWx0ZXI6IFwiYWxsXCIsIC8vICdhbGwnLCAnQm9vaycsICdQb2xpY3knLCAnRGVjaXNpb24nLCBldGMuXHJcbiAgZG9jdW1lbnRzOiBbXSxcclxuICBwcm9maWxlRGF0YTogbnVsbCxcclxuICBhdmFpbGFibGVUeXBlczogW10sXHJcbn07XHJcblxyXG4vLyBDYWxsYmFjayBmb3IgZmlsdGVyIGNoYW5nZXNcclxubGV0IG9uRmlsdGVyQ2hhbmdlQ2FsbGJhY2sgPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIEV4dHJhY3QgbGFiZWwgZnJvbSBicmFja2V0ZWQgc3VmZml4IGluIG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBGdWxsIG5hbWUgd2l0aCBicmFja2V0ZWQgbGFiZWxcclxuICogQHJldHVybnMge09iamVjdH0geyBuYW1lOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfVxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdExhYmVsKG5hbWUpIHtcclxuICBjb25zdCBtYXRjaCA9IG5hbWUubWF0Y2goL14oLis/KVxccypcXFsoLio/KVxcXVxccyokLyk7XHJcbiAgaWYgKG1hdGNoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiBtYXRjaFsxXS50cmltKCksXHJcbiAgICAgIGxhYmVsOiBtYXRjaFsyXS50cmltKCksXHJcbiAgICB9O1xyXG4gIH1cclxuICByZXR1cm4geyBuYW1lOiBuYW1lLnRyaW0oKSwgbGFiZWw6IFwiXCIgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvdW50IGRvY3VtZW50cyBmb3IgYW4gaW5zdGl0dXRpb25cclxuICogQHBhcmFtIHtBcnJheX0gZG9jdW1lbnRzIC0gQWxsIGRvY3VtZW50c1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5zdGl0dXRpb25OYW1lIC0gSW5zdGl0dXRpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBEb2N1bWVudCBjb3VudFxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRJbnN0aXR1dGlvbkRvY3VtZW50cyhkb2N1bWVudHMsIGluc3RpdHV0aW9uTmFtZSkge1xyXG4gIHJldHVybiBkb2N1bWVudHMuZmlsdGVyKChkb2MpID0+IGRvYy5pbnN0aXR1dGlvbiA9PT0gaW5zdGl0dXRpb25OYW1lKS5sZW5ndGg7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb3VudCB1bmlxdWUgY29udHJpYnV0b3JzIChpbnN0aXR1dGlvbnMpIGZvciBhIGp1cmlzZGljdGlvblxyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBBbGwgZG9jdW1lbnRzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBqdXJpc2RpY3Rpb25OYW1lIC0gSnVyaXNkaWN0aW9uIG5hbWVcclxuICogQHJldHVybnMge251bWJlcn0gVW5pcXVlIGluc3RpdHV0aW9uIGNvdW50XHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEp1cmlzZGljdGlvbkNvbnRyaWJ1dG9ycyhkb2N1bWVudHMsIGp1cmlzZGljdGlvbk5hbWUpIHtcclxuICBjb25zdCBpbnN0aXR1dGlvbnMgPSBuZXcgU2V0KFxyXG4gICAgZG9jdW1lbnRzXHJcbiAgICAgIC5maWx0ZXIoKGRvYykgPT4gZG9jLmp1cmlzZGljdGlvbiA9PT0ganVyaXNkaWN0aW9uTmFtZSlcclxuICAgICAgLm1hcCgoZG9jKSA9PiBkb2MuaW5zdGl0dXRpb24pLFxyXG4gICk7XHJcbiAgcmV0dXJuIGluc3RpdHV0aW9ucy5zaXplO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVuaXF1ZSBkb2N1bWVudCB0eXBlcyBmcm9tIGRvY3VtZW50c1xyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBGaWx0ZXJlZCBkb2N1bWVudHNcclxuICogQHJldHVybnMge0FycmF5fSBTb3J0ZWQgYXJyYXkgb2YgdW5pcXVlIHR5cGVzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXREb2N1bWVudFR5cGVzKGRvY3VtZW50cykge1xyXG4gIGNvbnN0IHR5cGVzID0gbmV3IFNldChkb2N1bWVudHMubWFwKChkb2MpID0+IGRvYy5pdGVtKSk7XHJcbiAgcmV0dXJuIFtcImFsbFwiLCAuLi5bLi4udHlwZXNdLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSldO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgcHJvZmlsZSB2aWV3IHNob3VsZCBiZSBzaG93biBiYXNlZCBvbiBVUkwgcGFyYW1zXHJcbiAqIEByZXR1cm5zIHtPYmplY3R8bnVsbH0gUHJvZmlsZSBpbmZvIG9yIG51bGwgaWYgbm8gcHJvZmlsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdFByb2ZpbGVNb2RlKCkge1xyXG4gIC8vIFRyeSBxdWVyeSBwYXJhbXMgZmlyc3RcclxuICBsZXQgcGFyYW1zID0gcGFyc2VRdWVyeVBhcmFtcygpO1xyXG5cclxuICAvLyBJZiBubyBwYXJhbXMgaW4gcXVlcnksIHRyeSBoYXNoIHBhcmFtc1xyXG4gIGlmICghcGFyYW1zLmluc3RpdHV0aW9uICYmICFwYXJhbXMuanVyaXNkaWN0aW9uKSB7XHJcbiAgICBwYXJhbXMgPSBwYXJzZUhhc2hQYXJhbXMoKTtcclxuICB9XHJcblxyXG4gIGlmIChwYXJhbXMuaW5zdGl0dXRpb24pIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwiaW5zdGl0dXRpb25cIixcclxuICAgICAgbmFtZTogcGFyYW1zLmluc3RpdHV0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGlmIChwYXJhbXMuanVyaXNkaWN0aW9uKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBcImp1cmlzZGljdGlvblwiLFxyXG4gICAgICBuYW1lOiBwYXJhbXMuanVyaXNkaWN0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgcHJvZmlsZSBVSVxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZpbHRlckNoYW5nZSAtIENhbGxiYWNrIHdoZW4gZmlsdGVyIGNoYW5nZXNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplUHJvZmlsZVVJKG9uRmlsdGVyQ2hhbmdlKSB7XHJcbiAgb25GaWx0ZXJDaGFuZ2VDYWxsYmFjayA9IG9uRmlsdGVyQ2hhbmdlO1xyXG5cclxuICBjb25zdCBwcm9maWxlSW5mbyA9IGRldGVjdFByb2ZpbGVNb2RlKCk7XHJcbiAgaWYgKCFwcm9maWxlSW5mbykge1xyXG4gICAgLy8gTm8gcHJvZmlsZSBtb2RlLCBoaWRlIHByb2ZpbGUgY29udGFpbmVyXHJcbiAgICBoaWRlUHJvZmlsZUNvbnRhaW5lcigpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgcHJvZmlsZVN0YXRlLnByb2ZpbGVUeXBlID0gcHJvZmlsZUluZm8udHlwZTtcclxuICBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUgPSBwcm9maWxlSW5mby5uYW1lO1xyXG5cclxuICAvLyBMb2FkIGFsbCBkb2N1bWVudHMgdG8gY2FsY3VsYXRlIGNvdW50cyBhbmQgZ2V0IHR5cGVzXHJcbiAgY29uc3QgYWxsRG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcbiAgcHJvZmlsZVN0YXRlLmRvY3VtZW50cyA9IGFsbERvY3VtZW50cy5maWx0ZXIoKGRvYykgPT4ge1xyXG4gICAgaWYgKHByb2ZpbGVTdGF0ZS5wcm9maWxlVHlwZSA9PT0gXCJpbnN0aXR1dGlvblwiKSB7XHJcbiAgICAgIHJldHVybiBkb2MuaW5zdGl0dXRpb24gPT09IHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBkb2MuanVyaXNkaWN0aW9uID09PSBwcm9maWxlU3RhdGUucHJvZmlsZU5hbWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHByb2ZpbGVTdGF0ZS5hdmFpbGFibGVUeXBlcyA9IGdldERvY3VtZW50VHlwZXMocHJvZmlsZVN0YXRlLmRvY3VtZW50cyk7XHJcblxyXG4gIC8vIExvYWQgcHJvZmlsZSBtZXRhZGF0YVxyXG4gIGlmIChwcm9maWxlU3RhdGUucHJvZmlsZVR5cGUgPT09IFwiaW5zdGl0dXRpb25cIikge1xyXG4gICAgcHJvZmlsZVN0YXRlLnByb2ZpbGVEYXRhID0gYXdhaXQgZ2V0SW5zdGl0dXRpb25NZXRhZGF0YShcclxuICAgICAgcHJvZmlsZVN0YXRlLnByb2ZpbGVOYW1lLFxyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcHJvZmlsZVN0YXRlLnByb2ZpbGVEYXRhID0gYXdhaXQgZ2V0SnVyaXNkaWN0aW9uTWV0YWRhdGEoXHJcbiAgICAgIHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBSZW5kZXIgcHJvZmlsZVxyXG4gIHJlbmRlclByb2ZpbGUoKTtcclxuICByZW5kZXJGaWx0ZXJQaWxscygpO1xyXG59XHJcblxyXG4vKipcclxuICogSGlkZSB0aGUgcHJvZmlsZSBjb250YWluZXJcclxuICovXHJcbmZ1bmN0aW9uIGhpZGVQcm9maWxlQ29udGFpbmVyKCkge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1jb250YWluZXJcIik7XHJcbiAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2hvdyB0aGUgcHJvZmlsZSBjb250YWluZXJcclxuICovXHJcbmZ1bmN0aW9uIHNob3dQcm9maWxlQ29udGFpbmVyKCkge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1jb250YWluZXJcIik7XHJcbiAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVyIHRoZSBwcm9maWxlIGhlYWRlclxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyUHJvZmlsZSgpIHtcclxuICBzaG93UHJvZmlsZUNvbnRhaW5lcigpO1xyXG5cclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtaGVhZGVyXCIpO1xyXG4gIGlmICghY29udGFpbmVyKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IHsgbmFtZSwgbGFiZWwgfSA9IGV4dHJhY3RMYWJlbChwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUpO1xyXG4gIGNvbnN0IG1ldGFkYXRhID0gcHJvZmlsZVN0YXRlLnByb2ZpbGVEYXRhIHx8IHt9O1xyXG5cclxuICAvLyBHZXQgY292ZXIgYW5kIGF2YXRhciB3aXRoIGZhbGxiYWNrc1xyXG4gIGNvbnN0IGNvdmVyVXJsID0gbWV0YWRhdGEuY292ZXIgfHwgXCIuL2ltYWdlcy9kZWZhdWx0LWNvdmVyLmpwZ1wiO1xyXG4gIGNvbnN0IGF2YXRhclVybCA9IG1ldGFkYXRhLmF2YXRhciB8fCBcIi4vaW1hZ2VzL2RlZmF1bHQtYXZhdGFyLndlYnBcIjtcclxuICBjb25zdCBiaW8gPSBtZXRhZGF0YS5iaW8gfHwgXCJcIjtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIGNvdW50XHJcbiAgbGV0IGNvdW50VGV4dCA9IFwiXCI7XHJcbiAgaWYgKHByb2ZpbGVTdGF0ZS5wcm9maWxlVHlwZSA9PT0gXCJpbnN0aXR1dGlvblwiKSB7XHJcbiAgICBjb25zdCBjb3VudCA9IGNvdW50SW5zdGl0dXRpb25Eb2N1bWVudHMoXHJcbiAgICAgIHByb2ZpbGVTdGF0ZS5kb2N1bWVudHMsXHJcbiAgICAgIHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZSxcclxuICAgICk7XHJcbiAgICBjb3VudFRleHQgPSBgJHtjb3VudH0gQ29udHJpYnV0aW9uc2A7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGNvdW50ID0gY291bnRKdXJpc2RpY3Rpb25Db250cmlidXRvcnMoXHJcbiAgICAgIHByb2ZpbGVTdGF0ZS5kb2N1bWVudHMsXHJcbiAgICAgIHByb2ZpbGVTdGF0ZS5wcm9maWxlTmFtZSxcclxuICAgICk7XHJcbiAgICBjb3VudFRleHQgPSBgJHtjb3VudH0gQ29udHJpYnV0b3JzYDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGJ1dHRvblRleHQgPSBwcm9maWxlU3RhdGUucHJvZmlsZVR5cGUgPT09IFwiaW5zdGl0dXRpb25cIiA/IFwiQ29udGFjdFwiIDogXCJDb250cmlidXRvcnNcIjtcclxuXHJcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLWNvdmVyXCI+XHJcbiAgICAgIDxpbWcgc3JjPVwiJHtlc2NhcGVIdG1sKGNvdmVyVXJsKX1cIiBhbHQ9XCJDb3ZlclwiIGxvYWRpbmc9XCJsYXp5XCIgZGVjb2Rpbmc9XCJhc3luY1wiIC8+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLWluZm9cIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInByb2ZpbGUtaGVhZGVyLXJvd1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLWF2YXRhclwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIke2VzY2FwZUh0bWwoYXZhdGFyVXJsKX1cIiBhbHQ9XCIke2VzY2FwZUh0bWwobmFtZSl9XCIgbG9hZGluZz1cImVhZ2VyXCIgZmV0Y2hwcmlvcml0eT1cImhpZ2hcIiAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLWFjdGlvbnNcIj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwcm9maWxlLWJ1dHRvblwiIGlkPVwicHJvZmlsZS1hY3Rpb24tYnRuXCI+JHtlc2NhcGVIdG1sKGJ1dHRvblRleHQpfTwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInByb2ZpbGUtZGV0YWlscy1zZWN0aW9uXCI+XHJcbiAgICAgICAgPGgxIGNsYXNzPVwicHJvZmlsZS1uYW1lXCI+JHtlc2NhcGVIdG1sKG5hbWUpfTwvaDE+XHJcbiAgICAgICAgJHtsYWJlbCA/IGA8c3BhbiBjbGFzcz1cInByb2ZpbGUtbGFiZWxcIj4ke2VzY2FwZUh0bWwobGFiZWwpfTwvc3Bhbj5gIDogXCJcIn1cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInByb2ZpbGUtY291bnRcIj4ke2VzY2FwZUh0bWwoY291bnRUZXh0KX08L3NwYW4+XHJcbiAgICAgICAgJHtiaW8gPyBgPHAgY2xhc3M9XCJwcm9maWxlLWJpb1wiPiR7ZXNjYXBlSHRtbChiaW8pfTwvcD5gIDogXCJcIn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG5cclxuICAvLyBBZGQgY2xpY2sgaGFuZGxlciBmb3IgdGhlIGFjdGlvbiBidXR0b25cclxuICBjb25zdCBhY3Rpb25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtYWN0aW9uLWJ0blwiKTtcclxuICBpZiAoYWN0aW9uQnRuKSB7XHJcbiAgICBhY3Rpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUFjdGlvbkJ1dHRvbkNsaWNrKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW5kZXIgdGhlIGZpbHRlciBwaWxsc1xyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyRmlsdGVyUGlsbHMoKSB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWZpbHRlcnNcIik7XHJcbiAgaWYgKCFjb250YWluZXIpIHJldHVybjtcclxuXHJcbiAgY29uc3QgdHlwZXMgPSBwcm9maWxlU3RhdGUuYXZhaWxhYmxlVHlwZXM7XHJcblxyXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLXBpbGxzLWNvbnRhaW5lclwiPlxyXG4gICAgICAke3R5cGVzXHJcbiAgICAgICAgLm1hcChcclxuICAgICAgICAgICh0eXBlKSA9PiBgXHJcbiAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgIGNsYXNzPVwiZmlsdGVyLXBpbGwgJHt0eXBlID09PSBwcm9maWxlU3RhdGUuY3VycmVudEZpbHRlciA/IFwiYWN0aXZlXCIgOiBcIlwifVwiIFxyXG4gICAgICAgICAgZGF0YS10eXBlPVwiJHtlc2NhcGVIdG1sKHR5cGUpfVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWx0ZXItcGlsbC1pY29uXCI+XHJcbiAgICAgICAgICAgICR7Z2V0VHlwZUljb24odHlwZSl9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbHRlci1waWxsLWxhYmVsXCI+JHtlc2NhcGVIdG1sKGNhcGl0YWxpemVGaXJzdCh0eXBlKSl9PC9zcGFuPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICBgLFxyXG4gICAgICAgIClcclxuICAgICAgICAuam9pbihcIlwiKX1cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcblxyXG4gIC8vIEFkZCBjbGljayBoYW5kbGVyc1xyXG4gIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLmZpbHRlci1waWxsXCIpLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHR5cGUgPSBidG4uZGF0YXNldC50eXBlO1xyXG4gICAgICBzZXRGaWx0ZXIodHlwZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBpY29uIGZvciBkb2N1bWVudCB0eXBlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gRG9jdW1lbnQgdHlwZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBJY29uIEhUTUxcclxuICovXHJcbmZ1bmN0aW9uIGdldFR5cGVJY29uKHR5cGUpIHtcclxuICBjb25zdCBpY29ucyA9IHtcclxuICAgIGFsbDogXCLwn5OCXCIsXHJcbiAgICBib29rOiBcIvCfk5pcIixcclxuICAgIGd1aWRlbGluZTogXCLwn5KOXCIsXHJcbiAgICBwb2xpY3k6IFwi8J+Ti1wiLFxyXG4gICAgZGVjaXNpb246IFwi4oS577iPXCIsXHJcbiAgICB2ZXJkaWN0OiBcIuKalu+4j1wiLFxyXG4gICAgbm90ZTogXCLwn5OOXCIsXHJcbiAgfTtcclxuICByZXR1cm4gaWNvbnNbdHlwZS50b0xvd2VyQ2FzZSgpXSB8fCBcIvCfk4RcIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENhcGl0YWxpemUgZmlyc3QgbGV0dGVyXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBTdHJpbmcgdG8gY2FwaXRhbGl6ZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDYXBpdGFsaXplZCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHIpIHtcclxuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBjdXJyZW50IGZpbHRlclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEZpbHRlciB0eXBlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRGaWx0ZXIodHlwZSkge1xyXG4gIHByb2ZpbGVTdGF0ZS5jdXJyZW50RmlsdGVyID0gdHlwZTtcclxuXHJcbiAgLy8gVXBkYXRlIFVJXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXItcGlsbFwiKS5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIsIGJ0bi5kYXRhc2V0LnR5cGUgPT09IHR5cGUpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBOb3RpZnkgY2FsbGJhY2tcclxuICBpZiAob25GaWx0ZXJDaGFuZ2VDYWxsYmFjaykge1xyXG4gICAgb25GaWx0ZXJDaGFuZ2VDYWxsYmFjayh0eXBlKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGN1cnJlbnQgZmlsdGVyXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEN1cnJlbnQgZmlsdGVyIHR5cGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50RmlsdGVyKCkge1xyXG4gIHJldHVybiBwcm9maWxlU3RhdGUuY3VycmVudEZpbHRlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBmaWx0ZXJlZCBkb2N1bWVudHMgYmFzZWQgb24gY3VycmVudCBmaWx0ZXJcclxuICogQHJldHVybnMge0FycmF5fSBGaWx0ZXJlZCBkb2N1bWVudHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJlZERvY3VtZW50cygpIHtcclxuICBpZiAocHJvZmlsZVN0YXRlLmN1cnJlbnRGaWx0ZXIgPT09IFwiYWxsXCIpIHtcclxuICAgIHJldHVybiBwcm9maWxlU3RhdGUuZG9jdW1lbnRzO1xyXG4gIH1cclxuICByZXR1cm4gcHJvZmlsZVN0YXRlLmRvY3VtZW50cy5maWx0ZXIoXHJcbiAgICAoZG9jKSA9PlxyXG4gICAgICBkb2MuaXRlbS50b0xvd2VyQ2FzZSgpID09PSBwcm9maWxlU3RhdGUuY3VycmVudEZpbHRlci50b0xvd2VyQ2FzZSgpLFxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHByb2ZpbGUgc3RhdGUgKGZvciBkZWJ1Z2dpbmcpXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEN1cnJlbnQgcHJvZmlsZSBzdGF0ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2ZpbGVTdGF0ZSgpIHtcclxuICByZXR1cm4geyAuLi5wcm9maWxlU3RhdGUgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZSBhY3Rpb24gYnV0dG9uIGNsaWNrXHJcbiAqIFNob3dzIGNvbnRhY3QgY2FyZCBmb3IgaW5zdGl0dXRpb25zIG9yIGNvbnRyaWJ1dG9yIGxpc3QgZm9yIGp1cmlzZGljdGlvbnNcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUFjdGlvbkJ1dHRvbkNsaWNrKCkge1xyXG4gIGlmIChwcm9maWxlU3RhdGUucHJvZmlsZVR5cGUgPT09IFwiaW5zdGl0dXRpb25cIikge1xyXG4gICAgc2hvd0NvbnRhY3RDYXJkKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNob3dDb250cmlidXRvckxpc3QoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93IGNvbnRhY3QgY2FyZCBtb2RhbCBmb3IgaW5zdGl0dXRpb25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dDb250YWN0Q2FyZCgpIHtcclxuICBjb25zdCBtZXRhZGF0YSA9IHByb2ZpbGVTdGF0ZS5wcm9maWxlRGF0YSB8fCB7fTtcclxuICBjb25zdCB7IG5hbWUsIGxhYmVsIH0gPSBleHRyYWN0TGFiZWwocHJvZmlsZVN0YXRlLnByb2ZpbGVOYW1lKTtcclxuICBjb25zdCBjb250YWN0ID0gbWV0YWRhdGEuY29udGFjdCB8fCB7fTtcclxuXHJcbiAgY29uc3QgbW9kYWxPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLW1vZGFsLW92ZXJsYXlcIik7XHJcbiAgY29uc3QgbW9kYWxUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWwtdGl0bGVcIik7XHJcbiAgY29uc3QgbW9kYWxDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC1jb250ZW50XCIpO1xyXG5cclxuICBpZiAoIW1vZGFsT3ZlcmxheSB8fCAhbW9kYWxUaXRsZSB8fCAhbW9kYWxDb250ZW50KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiTW9kYWwgZWxlbWVudHMgbm90IGZvdW5kXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IFwiQ29udGFjdCBJbmZvcm1hdGlvblwiO1xyXG5cclxuICBjb25zdCBhdmF0YXJVcmwgPSBtZXRhZGF0YS5hdmF0YXIgfHwgXCIuL2ltYWdlcy9kZWZhdWx0LWF2YXRhci53ZWJwXCI7XHJcblxyXG4gIG1vZGFsQ29udGVudC5pbm5lckhUTUwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1jYXJkXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWNhcmQtaGVhZGVyXCI+XHJcbiAgICAgICAgPGltZyBzcmM9XCIke2VzY2FwZUh0bWwoYXZhdGFyVXJsKX1cIiBhbHQ9XCIke2VzY2FwZUh0bWwobmFtZSl9XCIgY2xhc3M9XCJjb250YWN0LWNhcmQtYXZhdGFyXCIgbG9hZGluZz1cImxhenlcIiBkZWNvZGluZz1cImFzeW5jXCIgLz5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtY2FyZC1uYW1lXCI+JHtlc2NhcGVIdG1sKG5hbWUpfTwvZGl2PlxyXG4gICAgICAgICAgJHtsYWJlbCA/IGA8ZGl2IGNsYXNzPVwiY29udGFjdC1jYXJkLWxhYmVsXCI+JHtlc2NhcGVIdG1sKGxhYmVsKX08L2Rpdj5gIDogXCJcIn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgICR7Y29udGFjdC5lbWFpbCA/IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWl0ZW1cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFjdC1pbmZvLWljb25cIj7wn5OnPC9zcGFuPlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby1sYWJlbFwiPkVtYWlsPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8tdmFsdWVcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPVwibWFpbHRvOiR7ZXNjYXBlSHRtbChjb250YWN0LmVtYWlsKX1cIj4ke2VzY2FwZUh0bWwoY29udGFjdC5lbWFpbCl9PC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgIDogXCJcIn1cclxuICAgICAgJHtjb250YWN0LnBob25lID8gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8taXRlbVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWN0LWluZm8taWNvblwiPvCfk7E8L3NwYW4+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWxhYmVsXCI+UGhvbmU8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby12YWx1ZVwiPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9XCJ0ZWw6JHtlc2NhcGVIdG1sKGNvbnRhY3QucGhvbmUucmVwbGFjZSgvXFxzL2csICcnKSl9XCI+JHtlc2NhcGVIdG1sKGNvbnRhY3QucGhvbmUpfTwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYCA6IFwiXCJ9XHJcbiAgICAgICR7Y29udGFjdC5hZGRyZXNzID8gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8taXRlbVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWN0LWluZm8taWNvblwiPvCfk408L3NwYW4+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWxhYmVsXCI+QWRkcmVzczwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLXZhbHVlXCI+JHtlc2NhcGVIdG1sKGNvbnRhY3QuYWRkcmVzcyl9PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYCA6IFwiXCJ9XHJcbiAgICAgICR7Y29udGFjdC53ZWJzaXRlID8gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWN0LWluZm8taXRlbVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWN0LWluZm8taWNvblwiPvCfjJA8L3NwYW4+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWxhYmVsXCI+V2Vic2l0ZTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLXZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7ZXNjYXBlSHRtbChjb250YWN0LndlYnNpdGUpfVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIj4ke2VzY2FwZUh0bWwoY29udGFjdC53ZWJzaXRlKX08L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIGAgOiBcIlwifVxyXG4gICAgICAkeyFjb250YWN0LmVtYWlsICYmICFjb250YWN0LnBob25lICYmICFjb250YWN0LmFkZHJlc3MgJiYgIWNvbnRhY3Qud2Vic2l0ZSA/IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLWl0ZW1cIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGFjdC1pbmZvLWljb25cIj7ihLnvuI88L3NwYW4+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLXZhbHVlXCI+Tm8gY29udGFjdCBpbmZvcm1hdGlvbiBhdmFpbGFibGU8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgYCA6IFwiXCJ9XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG5cclxuICBtb2RhbE92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3cgY29udHJpYnV0b3IgbGlzdCBtb2RhbCBmb3IganVyaXNkaWN0aW9uXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaG93Q29udHJpYnV0b3JMaXN0KCkge1xyXG4gIGNvbnN0IHsgbmFtZSwgbGFiZWwgfSA9IGV4dHJhY3RMYWJlbChwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUpO1xyXG5cclxuICBjb25zdCBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtbW9kYWwtb3ZlcmxheVwiKTtcclxuICBjb25zdCBtb2RhbFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC10aXRsZVwiKTtcclxuICBjb25zdCBtb2RhbENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNvbnRlbnRcIik7XHJcblxyXG4gIGlmICghbW9kYWxPdmVybGF5IHx8ICFtb2RhbFRpdGxlIHx8ICFtb2RhbENvbnRlbnQpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJNb2RhbCBlbGVtZW50cyBub3QgZm91bmRcIik7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gXCJDb250cmlidXRvcnNcIjtcclxuXHJcbiAgLy8gR2V0IHVuaXF1ZSBpbnN0aXR1dGlvbnMgdGhhdCBoYXZlIGRvY3VtZW50cyBpbiB0aGlzIGp1cmlzZGljdGlvblxyXG4gIGNvbnN0IGNvbnRyaWJ1dG9ycyA9IGdldEp1cmlzZGljdGlvbkNvbnRyaWJ1dG9ycyhwcm9maWxlU3RhdGUucHJvZmlsZU5hbWUpO1xyXG5cclxuICBpZiAoY29udHJpYnV0b3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgbW9kYWxDb250ZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRhY3QtaW5mby1pdGVtXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250YWN0LWluZm8taWNvblwiPuKEue+4jzwvc3Bhbj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFjdC1pbmZvLXZhbHVlXCI+Tm8gY29udHJpYnV0b3JzIGZvdW5kPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgY29udHJpYnV0b3JJdGVtcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICBjb250cmlidXRvcnMubWFwKGFzeW5jIChjb250cmlidXRvcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgZ2V0SW5zdGl0dXRpb25NZXRhZGF0YShjb250cmlidXRvci5uYW1lKTtcclxuICAgICAgICBjb25zdCBhdmF0YXJVcmwgPSBtZXRhZGF0YT8uYXZhdGFyIHx8IFwiLi9pbWFnZXMvZGVmYXVsdC1hdmF0YXIud2VicFwiO1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZTogaW5zdE5hbWUsIGxhYmVsOiBpbnN0TGFiZWwgfSA9IGV4dHJhY3RMYWJlbChjb250cmlidXRvci5uYW1lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cmlidXRvci1pdGVtXCI+XHJcbiAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtlc2NhcGVIdG1sKGF2YXRhclVybCl9XCIgYWx0PVwiJHtlc2NhcGVIdG1sKGluc3ROYW1lKX1cIiBjbGFzcz1cImNvbnRyaWJ1dG9yLWF2YXRhclwiIGxvYWRpbmc9XCJsYXp5XCIgZGVjb2Rpbmc9XCJhc3luY1wiIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cmlidXRvci1pbmZvXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyaWJ1dG9yLW5hbWVcIj4ke2VzY2FwZUh0bWwoaW5zdE5hbWUpfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cmlidXRvci1jb3VudFwiPiR7Y29udHJpYnV0b3IuY291bnR9IGNvbnRyaWJ1dGlvbiR7Y29udHJpYnV0b3IuY291bnQgIT09IDEgPyAncycgOiAnJ308L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9XCI/aW5zdGl0dXRpb249JHtlbmNvZGVVUklDb21wb25lbnQoY29udHJpYnV0b3IubmFtZSl9XCIgY2xhc3M9XCJjb250cmlidXRvci1saW5rXCI+VmlldzwvYT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIG1vZGFsQ29udGVudC5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250cmlidXRvci1saXN0XCI+XHJcbiAgICAgICAgJHtjb250cmlidXRvckl0ZW1zLmpvaW4oXCJcIil9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGNvbnRyaWJ1dG9ycyAoaW5zdGl0dXRpb25zKSBmb3IgYSBqdXJpc2RpY3Rpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IGp1cmlzZGljdGlvbk5hbWUgLSBKdXJpc2RpY3Rpb24gbmFtZVxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIHsgbmFtZSwgY291bnQgfSBvYmplY3RzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRKdXJpc2RpY3Rpb25Db250cmlidXRvcnMoanVyaXNkaWN0aW9uTmFtZSkge1xyXG4gIGNvbnN0IGNvbnRyaWJ1dG9yTWFwID0gbmV3IE1hcCgpO1xyXG5cclxuICBwcm9maWxlU3RhdGUuZG9jdW1lbnRzLmZvckVhY2goKGRvYykgPT4ge1xyXG4gICAgaWYgKGRvYy5qdXJpc2RpY3Rpb24gPT09IGp1cmlzZGljdGlvbk5hbWUpIHtcclxuICAgICAgY29uc3QgaW5zdGl0dXRpb24gPSBkb2MuaW5zdGl0dXRpb247XHJcbiAgICAgIGNvbnRyaWJ1dG9yTWFwLnNldChpbnN0aXR1dGlvbiwgKGNvbnRyaWJ1dG9yTWFwLmdldChpbnN0aXR1dGlvbikgfHwgMCkgKyAxKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIEFycmF5LmZyb20oY29udHJpYnV0b3JNYXAuZW50cmllcygpKVxyXG4gICAgLm1hcCgoW25hbWUsIGNvdW50XSkgPT4gKHsgbmFtZSwgY291bnQgfSkpXHJcbiAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xvc2UgdGhlIG1vZGFsXHJcbiAqL1xyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xyXG4gIGNvbnN0IG1vZGFsT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1tb2RhbC1vdmVybGF5XCIpO1xyXG4gIGlmIChtb2RhbE92ZXJsYXkpIHtcclxuICAgIG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgbW9kYWwgZXZlbnQgbGlzdGVuZXJzXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplTW9kYWxMaXN0ZW5lcnMoKSB7XHJcbiAgY29uc3QgbW9kYWxPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLW1vZGFsLW92ZXJsYXlcIik7XHJcbiAgY29uc3QgbW9kYWxDbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWwtY2xvc2VcIik7XHJcblxyXG4gIC8vIENsb3NlIGJ1dHRvblxyXG4gIGlmIChtb2RhbENsb3NlKSB7XHJcbiAgICBtb2RhbENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsKTtcclxuICB9XHJcblxyXG4gIC8vIENsaWNrIG91dHNpZGUgbW9kYWwgdG8gY2xvc2VcclxuICBpZiAobW9kYWxPdmVybGF5KSB7XHJcbiAgICBtb2RhbE92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWxPdmVybGF5KSB7XHJcbiAgICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEVzY2FwZSBrZXkgdG8gY2xvc2VcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBtb2RhbCBsaXN0ZW5lcnMgd2hlbiBtb2R1bGUgbG9hZHNcclxuaW5pdGlhbGl6ZU1vZGFsTGlzdGVuZXJzKCk7IiwiLyoqXHJcbiAqIExpYnJhcnkgVUkgTW9kdWxlXHJcbiAqIEhhbmRsZXMgcmVuZGVyaW5nIGFuZCBpbnRlcmFjdGlvbiBmb3IgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldERvY3VtZW50cyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHBhcnNlUXVlcnlQYXJhbXMsXHJcbiAgcGFyc2VIYXNoUGFyYW1zLFxyXG4gIHNvcnREb2N1bWVudHMsXHJcbiAgZmlsdGVyRG9jdW1lbnRzLFxyXG4gIGVzY2FwZUh0bWwsXHJcbiAgc2hvd0Vycm9yLFxyXG59IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7IGdldEZpbHRlcmVkRG9jdW1lbnRzLCBkZXRlY3RQcm9maWxlTW9kZSB9IGZyb20gXCIuL3Byb2ZpbGUtdWkuanNcIjtcclxuXHJcbi8vIEN1cnJlbnQgc29ydCBzdGF0ZVxyXG5sZXQgY3VycmVudFNvcnQgPSBcIm5hbWVcIjtcclxubGV0IGN1cnJlbnREb2N1bWVudHMgPSBbXTtcclxubGV0IGlzUHJvZmlsZU1vZGUgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBsaWJyYXJ5IHJvdyBlbGVtZW50XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkb2MgLSBEb2N1bWVudCBvYmplY3RcclxuICogQHJldHVybnMge0hUTUxFbGVtZW50fSBSb3cgZWxlbWVudFxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTGlicmFyeVJvdyhkb2MpIHtcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IGRldGVjdFByb2ZpbGVNb2RlKCk7XHJcbiAgY29uc3QgaXNJbnN0aXR1dGlvblByb2ZpbGUgPSBwcm9maWxlSW5mbz8udHlwZSA9PT0gXCJpbnN0aXR1dGlvblwiO1xyXG4gIGNvbnN0IGlzSnVyaXNkaWN0aW9uUHJvZmlsZSA9IHByb2ZpbGVJbmZvPy50eXBlID09PSBcImp1cmlzZGljdGlvblwiO1xyXG4gIGNvbnN0IGlzUHJvZmlsZU1vZGUgPSBpc0luc3RpdHV0aW9uUHJvZmlsZSB8fCBpc0p1cmlzZGljdGlvblByb2ZpbGU7XHJcblxyXG4gIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gIC8vIFVzZSAyLWNvbHVtbiBsYXlvdXQgZm9yIHByb2ZpbGUgbW9kZSwgMy1jb2x1bW4gZm9yIG5vbi1wcm9maWxlXHJcbiAgY29uc3QgZ3JpZENsYXNzID0gaXNQcm9maWxlTW9kZVxyXG4gICAgPyBcImxpYnJhcnktZ3JpZC1wcm9maWxlXCJcclxuICAgIDogXCJsaWJyYXJ5LWdyaWQtZGVmYXVsdFwiO1xyXG5cclxuICByb3cuY2xhc3NOYW1lID0gYGxpYnJhcnktcm93ICR7Z3JpZENsYXNzfSBnYXAtMyBpdGVtcy1zdGFydCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcHktMmA7XHJcblxyXG4gIHJvdy5kYXRhc2V0Lm5hbWUgPSBkb2MudGl0bGU7XHJcbiAgcm93LmRhdGFzZXQudmVyc2lvbiA9IGRvYy52ZXJzaW9uO1xyXG4gIHJvdy5kYXRhc2V0LmRhdGUgPSBkb2MuZGF0ZTtcclxuICByb3cuZGF0YXNldC5pdGVtID0gZG9jLml0ZW07XHJcbiAgcm93LmRhdGFzZXQuaW5zdGl0dXRpb24gPSBkb2MuaW5zdGl0dXRpb247XHJcbiAgcm93LmRhdGFzZXQuanVyaXNkaWN0aW9uID0gZG9jLmp1cmlzZGljdGlvbjtcclxuXHJcbiAgLy8gVGl0bGUgY2VsbCB3aXRoIGxpbmtcclxuICBjb25zdCB0aXRsZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICB0aXRsZUNlbGwuY2xhc3NOYW1lID1cclxuICAgIFwib3ZlcmZsb3ctaGlkZGVuIHRleHQtZWxsaXBzaXMgd2hpdGVzcGFjZS1ub3dyYXAgbWluLXctMFwiO1xyXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBsaW5rLmhyZWYgPSBkb2MuZmlsZW5hbWU7XHJcbiAgbGluay50ZXh0Q29udGVudCA9IGRvYy50aXRsZTtcclxuICBsaW5rLmNsYXNzTmFtZSA9IFwiYmxvY2sgb3ZlcmZsb3ctaGlkZGVuIHRleHQtZWxsaXBzaXMgd2hpdGVzcGFjZS1ub3dyYXBcIjtcclxuICB0aXRsZUNlbGwuYXBwZW5kQ2hpbGQobGluayk7XHJcblxyXG4gIC8vIE1ldGFkYXRhIGNlbGwgLSBjb25kaXRpb25hbGx5IHJlbmRlcmVkIGJhc2VkIG9uIHByb2ZpbGUgbW9kZVxyXG4gIGNvbnN0IG1ldGFkYXRhQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cclxuICBpZiAoaXNJbnN0aXR1dGlvblByb2ZpbGUpIHtcclxuICAgIC8vIEluc3RpdHV0aW9uIFByb2ZpbGU6IFNob3cgXCJQb3N0ZWQgaW4ge0p1cmlzZGljdGlvbiBOYW1lfVwiICh3aXRob3V0IFt0eXBlXSkgLSBjbGlja2FibGVcclxuICAgIG1ldGFkYXRhQ2VsbC5jbGFzc05hbWUgPVxyXG4gICAgICBcImxpYnJhcnktbWV0YWRhdGEgdGV4dC1yaWdodCB3aGl0ZXNwYWNlLW5vd3JhcCBvdmVyZmxvdy1oaWRkZW4gdGV4dC1zbSB0ZXh0LWVsbGlwc2lzIHNocmluay0wXCI7XHJcbiAgICBjb25zdCBqdXJpc2RpY3Rpb25OYW1lID0gKGRvYy5qdXJpc2RpY3Rpb24gfHwgXCJcIikucmVwbGFjZSgvXFxzKlxcWy4qP1xcXVxccyovZywgXCJcIik7XHJcbiAgICBjb25zdCBqdXJpc2RpY3Rpb25MaW5rID0gZG9jLmp1cmlzZGljdGlvbiA/IGA/anVyaXNkaWN0aW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvYy5qdXJpc2RpY3Rpb24pfWAgOiBcIiNcIjtcclxuICAgIG1ldGFkYXRhQ2VsbC5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzbTpoaWRkZW5cIj5Qb3N0ZWQgaW4gPC9zcGFuPjxhIGhyZWY9XCIke2VzY2FwZUh0bWwoanVyaXNkaWN0aW9uTGluayl9XCIgY2xhc3M9XCJsaWJyYXJ5LXByb2ZpbGUtbGlua1wiPiR7ZXNjYXBlSHRtbChqdXJpc2RpY3Rpb25OYW1lKX08L2E+YDtcclxuICB9IGVsc2UgaWYgKGlzSnVyaXNkaWN0aW9uUHJvZmlsZSkge1xyXG4gICAgLy8gSnVyaXNkaWN0aW9uIFByb2ZpbGU6IFNob3cgXCJQb3N0ZWQgYnkge0luc3RpdHV0aW9uIE5hbWV9XCIgKHdpdGhvdXQgW3R5cGVdKSAtIGNsaWNrYWJsZVxyXG4gICAgbWV0YWRhdGFDZWxsLmNsYXNzTmFtZSA9XHJcbiAgICAgIFwibGlicmFyeS1tZXRhZGF0YSB0ZXh0LXJpZ2h0IHdoaXRlc3BhY2Utbm93cmFwIG92ZXJmbG93LWhpZGRlbiB0ZXh0LXNtIHRleHQtZWxsaXBzaXMgc2hyaW5rLTBcIjtcclxuICAgIGNvbnN0IGluc3RpdHV0aW9uTmFtZSA9IChkb2MuaW5zdGl0dXRpb24gfHwgXCJcIikucmVwbGFjZSgvXFxzKlxcWy4qP1xcXVxccyovZywgXCJcIik7XHJcbiAgICBjb25zdCBpbnN0aXR1dGlvbkxpbmsgPSBkb2MuaW5zdGl0dXRpb24gPyBgP2luc3RpdHV0aW9uPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvYy5pbnN0aXR1dGlvbil9YCA6IFwiI1wiO1xyXG4gICAgbWV0YWRhdGFDZWxsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNtOmhpZGRlblwiPlBvc3RlZCBieSA8L3NwYW4+PGEgaHJlZj1cIiR7ZXNjYXBlSHRtbChpbnN0aXR1dGlvbkxpbmspfVwiIGNsYXNzPVwibGlicmFyeS1wcm9maWxlLWxpbmtcIj4ke2VzY2FwZUh0bWwoaW5zdGl0dXRpb25OYW1lKX08L2E+YDtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTm9uLXByb2ZpbGUgbW9kZTogU2hvdyB2ZXJzaW9uIGFuZCBkYXRlIChkZWZhdWx0IGJlaGF2aW9yKVxyXG4gICAgY29uc3QgdmVyc2lvbkNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIHZlcnNpb25DZWxsLmNsYXNzTmFtZSA9IFwibGlicmFyeS12ZXJzaW9uIHRleHQtY2VudGVyIHRleHQtc20gICB0YWJ1bGFyLW51bXNcIjtcclxuICAgIHZlcnNpb25DZWxsLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNtOmhpZGRlbiB0ZXh0LXNtXCI+VmVyc2lvbiA8L3NwYW4+JHtkb2MudmVyc2lvbn1gO1xyXG5cclxuICAgIGNvbnN0IGRhdGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBkYXRlQ2VsbC5jbGFzc05hbWUgPSBcImxpYnJhcnktZGF0ZSB0ZXh0LXJpZ2h0IHdoaXRlc3BhY2Utbm93cmFwXCI7XHJcbiAgICBkYXRlQ2VsbC50ZXh0Q29udGVudCA9IGRvYy5kYXRlRm9ybWF0dGVkO1xyXG5cclxuICAgIHJvdy5hcHBlbmRDaGlsZCh0aXRsZUNlbGwpO1xyXG4gICAgcm93LmFwcGVuZENoaWxkKHZlcnNpb25DZWxsKTtcclxuICAgIHJvdy5hcHBlbmRDaGlsZChkYXRlQ2VsbCk7XHJcblxyXG4gICAgcmV0dXJuIHJvdztcclxuICB9XHJcblxyXG4gIC8vIEZvciBwcm9maWxlIG1vZGUsIG9ubHkgYXBwZW5kIHRpdGxlIGFuZCBtZXRhZGF0YSBjZWxsc1xyXG4gIHJvdy5hcHBlbmRDaGlsZCh0aXRsZUNlbGwpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChtZXRhZGF0YUNlbGwpO1xyXG5cclxuICByZXR1cm4gcm93O1xyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVyIHRoZSBsaWJyYXJ5IHRhYmxlXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGRvY3VtZW50cyAtIEFycmF5IG9mIGRvY3VtZW50IG9iamVjdHNcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckxpYnJhcnlUYWJsZShkb2N1bWVudHMpIHtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpYnJhcnlcIik7XHJcbiAgaWYgKCFjb250YWluZXIpIHtcclxuICAgIGNvbnNvbGUud2FybihcIkxpYnJhcnkgY29udGFpbmVyIG5vdCBmb3VuZFwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIERldGVjdCBwcm9maWxlIG1vZGUgZm9yIGhlYWRlclxyXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gZGV0ZWN0UHJvZmlsZU1vZGUoKTtcclxuICBjb25zdCBpc0luc3RpdHV0aW9uUHJvZmlsZSA9IHByb2ZpbGVJbmZvPy50eXBlID09PSBcImluc3RpdHV0aW9uXCI7XHJcbiAgY29uc3QgaXNKdXJpc2RpY3Rpb25Qcm9maWxlID0gcHJvZmlsZUluZm8/LnR5cGUgPT09IFwianVyaXNkaWN0aW9uXCI7XHJcbiAgY29uc3QgaXNQcm9maWxlTW9kZSA9IGlzSW5zdGl0dXRpb25Qcm9maWxlIHx8IGlzSnVyaXNkaWN0aW9uUHJvZmlsZTtcclxuXHJcbiAgLy8gQ2xlYXIgY29udGFpbmVyXHJcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gIC8vIEJ1aWxkIGhlYWRlciBiYXNlZCBvbiBwcm9maWxlIG1vZGVcclxuICBsZXQgaGVhZGVySFRNTCA9IFwiXCI7XHJcblxyXG4gIGlmIChpc1Byb2ZpbGVNb2RlKSB7XHJcbiAgICBjb25zdCBncmlkQ2xhc3MgPSBcImxpYnJhcnktZ3JpZC1wcm9maWxlXCI7XHJcblxyXG4gICAgaWYgKGlzSW5zdGl0dXRpb25Qcm9maWxlKSB7XHJcbiAgICAgIGhlYWRlckhUTUwgPSBgXHJcbjxkaXYgY2xhc3M9XCJsaWJyYXJ5LXJvdyBsaWJyYXJ5LWhlYWRlciAke2dyaWRDbGFzc30gZ2FwLTMgaXRlbXMtYmFzZWxpbmUgdGV4dC1sZWZ0IGZvbnQtYm9sZCBib3JkZXItYiBib3JkZXItYmxhY2sgcGItMSBtYi0zXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJvdmVyZmxvdy1oaWRkZW4gdGV4dC1lbGxpcHNpcyB3aGl0ZXNwYWNlLW5vd3JhcFwiPlRpdGxlPC9zcGFuPlxyXG4gIDxzcGFuIGNsYXNzPVwidGV4dC1yaWdodCB3aGl0ZXNwYWNlLW5vd3JhcFwiPlBvc3RlZCBpbjwvc3Bhbj5cclxuPC9kaXY+YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlckhUTUwgPSBgXHJcbjxkaXYgY2xhc3M9XCJsaWJyYXJ5LXJvdyBsaWJyYXJ5LWhlYWRlciAke2dyaWRDbGFzc30gZ2FwLTMgaXRlbXMtYmFzZWxpbmUgdGV4dC1sZWZ0IGZvbnQtYm9sZCBib3JkZXItYiBib3JkZXItYmxhY2sgcGItMSBtYi0zXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJvdmVyZmxvdy1oaWRkZW4gdGV4dC1lbGxpcHNpcyB3aGl0ZXNwYWNlLW5vd3JhcFwiPlRpdGxlPC9zcGFuPlxyXG4gIDxzcGFuIGNsYXNzPVwidGV4dC1yaWdodCB3aGl0ZXNwYWNlLW5vd3JhcFwiPlBvc3RlZCBieTwvc3Bhbj5cclxuPC9kaXY+YDtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTm9uLXByb2ZpbGUgbW9kZSBoZWFkZXJcclxuICAgIGNvbnN0IGdyaWRDbGFzcyA9IFwibGlicmFyeS1ncmlkLWRlZmF1bHRcIjtcclxuICAgIGhlYWRlckhUTUwgPSBgXHJcbjxkaXYgY2xhc3M9XCJsaWJyYXJ5LXJvdyBsaWJyYXJ5LWhlYWRlciAke2dyaWRDbGFzc30gZ2FwLTQgaXRlbXMtc3RhcnQgdGV4dC1sZWZ0IGZvbnQtYm9sZCBib3JkZXItYiBib3JkZXItYmxhY2sgcGItMSBtYi0zXCI+XHJcbiAgPHNwYW4gY2xhc3M9XCJvdmVyZmxvdy1oaWRkZW4gdGV4dC1lbGxpcHNpcyB3aGl0ZXNwYWNlLW5vd3JhcFwiPlRpdGxlPC9zcGFuPlxyXG4gIDxzcGFuIGNsYXNzPVwidGV4dC1jZW50ZXIgdGFidWxhci1udW1zXCI+VmVyc2lvbjwvc3Bhbj5cclxuICA8c3BhbiBjbGFzcz1cInRleHQtcmlnaHQgd2hpdGVzcGFjZS1ub3dyYXBcIj5VcGRhdGVkIERhdGU8L3NwYW4+XHJcbjwvZGl2PmA7XHJcbiAgfVxyXG5cclxuICBjb250YWluZXIuaW5uZXJIVE1MID0gaGVhZGVySFRNTDtcclxuXHJcbiAgLy8gQWRkIGRvY3VtZW50IHJvd3NcclxuICBkb2N1bWVudHMuZm9yRWFjaCgoZG9jKSA9PiB7XHJcbiAgICBjb25zdCByb3cgPSBjcmVhdGVMaWJyYXJ5Um93KGRvYyk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTtcclxuICB9KTtcclxufVxyXG4vKipcclxuICogVXBkYXRlIHRoZSBjb250ZXh0IGRpc3BsYXkgYmFzZWQgb24gYWN0aXZlIGZpbHRlcnNcclxuICogQHBhcmFtIHtPYmplY3R9IGZpbHRlcnMgLSBBY3RpdmUgZmlsdGVyc1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ29udGV4dChmaWx0ZXJzKSB7XHJcbiAgY29uc3QgY29udGV4dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpYnJhcnktY29udGV4dFwiKTtcclxuICBpZiAoIWNvbnRleHRFbGVtZW50KSByZXR1cm47XHJcblxyXG4gIGNvbnN0IGNvbnRleHQgPSBbXTtcclxuXHJcbiAgaWYgKGZpbHRlcnMuaXRlbSkgY29udGV4dC5wdXNoKGZpbHRlcnMuaXRlbSk7XHJcbiAgaWYgKGZpbHRlcnMuaW5zdGl0dXRpb24pIGNvbnRleHQucHVzaChmaWx0ZXJzLmluc3RpdHV0aW9uKTtcclxuICBpZiAoZmlsdGVycy5qdXJpc2RpY3Rpb24pIGNvbnRleHQucHVzaChmaWx0ZXJzLmp1cmlzZGljdGlvbik7XHJcblxyXG4gIGlmIChjb250ZXh0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgY29udGV4dC5wdXNoKFwiQWxsXCIpO1xyXG4gIH1cclxuXHJcbiAgY29udGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZXh0LmpvaW4oXCIgwrcgXCIpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGFjdGl2ZSBzdGF0ZSBvZiBzb3J0IGJ1dHRvbnNcclxuICogQHBhcmFtIHtzdHJpbmd9IHNvcnRUeXBlIC0gQ3VycmVudCBzb3J0IHR5cGVcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVNvcnRCdXR0b25zKHNvcnRUeXBlKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zb3J0LWNvbnRyb2xzIGJ1dHRvblwiKS5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgaWYgKGJ0bi5kYXRhc2V0LnNvcnQgPT09IHNvcnRUeXBlKSB7XHJcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU29ydCB0aGUgbGlicmFyeSBieSB0aGUgc3BlY2lmaWVkIHR5cGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBTb3J0IHR5cGUgKG5hbWUsIHZlcnNpb24sIGRhdGUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc29ydExpYnJhcnkodHlwZSkge1xyXG4gIGN1cnJlbnRTb3J0ID0gdHlwZTtcclxuICBjdXJyZW50RG9jdW1lbnRzID0gc29ydERvY3VtZW50cyhjdXJyZW50RG9jdW1lbnRzLCB0eXBlKTtcclxuICByZW5kZXJMaWJyYXJ5VGFibGUoY3VycmVudERvY3VtZW50cyk7XHJcbiAgdXBkYXRlU29ydEJ1dHRvbnModHlwZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgYm9keSBjbGFzcyBiYXNlZCBvbiBwcm9maWxlIG1vZGVcclxuICogQHBhcmFtIHtib29sZWFufSBoYXNQcm9maWxlIC0gV2hldGhlciBwcm9maWxlIG1vZGUgaXMgYWN0aXZlXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVCb2R5UHJvZmlsZUNsYXNzKGhhc1Byb2ZpbGUpIHtcclxuICBpZiAoaGFzUHJvZmlsZSkge1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaGFzLXByb2ZpbGVcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImhhcy1wcm9maWxlXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKiBAcGFyYW0ge09iamVjdH0gdXJsRmlsdGVycyAtIFVSTC1kZXJpdmVkIGZpbHRlcnMgdG8gdXNlIGZvciBjb250ZXh0IGRpc3BsYXlcclxuICogQHBhcmFtIHtPYmplY3R9IHByb2ZpbGVJbmZvIC0gUHJvZmlsZSBtb2RlIGluZm9cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplTGlicmFyeSh1cmxGaWx0ZXJzID0ge30sIHByb2ZpbGVJbmZvID0gbnVsbCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBwcm9maWxlIG1vZGVcclxuICAgIGlzUHJvZmlsZU1vZGUgPSAhIXByb2ZpbGVJbmZvIHx8ICEhZGV0ZWN0UHJvZmlsZU1vZGUoKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgYm9keSBjbGFzcyBmb3IgVUkgbW9kZSBzdHlsaW5nXHJcbiAgICB1cGRhdGVCb2R5UHJvZmlsZUNsYXNzKGlzUHJvZmlsZU1vZGUpO1xyXG5cclxuICAgIC8vIEhpZGUgc29ydCBjb250cm9scyBpbiBwcm9maWxlIG1vZGVcclxuICAgIGNvbnN0IHNvcnRDb250cm9scyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc29ydC1jb250cm9scy13cmFwcGVyXCIpO1xyXG4gICAgaWYgKHNvcnRDb250cm9scykge1xyXG4gICAgICBpZiAoaXNQcm9maWxlTW9kZSkge1xyXG4gICAgICAgIHNvcnRDb250cm9scy5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNvcnRDb250cm9scy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGlkZSBjb250ZXh0IGRpc3BsYXkgaW4gcHJvZmlsZSBtb2RlXHJcbiAgICBjb25zdCBjb250ZXh0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlicmFyeS1jb250ZXh0XCIpO1xyXG4gICAgaWYgKGNvbnRleHRFbGVtZW50KSB7XHJcbiAgICAgIGlmIChpc1Byb2ZpbGVNb2RlKSB7XHJcbiAgICAgICAgY29udGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb250ZXh0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNlIHByb3ZpZGVkIFVSTCBmaWx0ZXJzIGZvciBjb250ZXh0IGRpc3BsYXlcclxuICAgIC8vIE9ubHkgbG9hZCBhbmQgZmlsdGVyIGRvY3VtZW50cyBpZiBub3QgYWxyZWFkeSBzZXQgKGUuZy4sIGJ5IHByb2ZpbGUgbW9kZSBpbiBtYWluLmpzKVxyXG4gICAgaWYgKGN1cnJlbnREb2N1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIExvYWQgYWxsIGRvY3VtZW50c1xyXG4gICAgICBjb25zdCBhbGxEb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHMoKTtcclxuXHJcbiAgICAgIC8vIEZpbHRlciBkb2N1bWVudHNcclxuICAgICAgY3VycmVudERvY3VtZW50cyA9IGZpbHRlckRvY3VtZW50cyhhbGxEb2N1bWVudHMsIHVybEZpbHRlcnMpO1xyXG5cclxuICAgICAgLy8gU29ydCBieSBkZWZhdWx0XHJcbiAgICAgIGN1cnJlbnREb2N1bWVudHMgPSBzb3J0RG9jdW1lbnRzKGN1cnJlbnREb2N1bWVudHMsIGN1cnJlbnRTb3J0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW5kZXJcclxuICAgIHJlbmRlckxpYnJhcnlUYWJsZShjdXJyZW50RG9jdW1lbnRzKTtcclxuICAgIHVwZGF0ZUNvbnRleHQodXJsRmlsdGVycyk7XHJcbiAgICB1cGRhdGVTb3J0QnV0dG9ucyhjdXJyZW50U29ydCk7XHJcblxyXG4gICAgLy8gU2V0dXAgc29ydCBidXR0b24gaGFuZGxlcnMgKG9ubHkgaW4gbm9uLXByb2ZpbGUgbW9kZSlcclxuICAgIGlmICghaXNQcm9maWxlTW9kZSkge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNvcnQtY29udHJvbHMgYnV0dG9uXCIpLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc29ydFR5cGUgPSBidG4uZGF0YXNldC5zb3J0O1xyXG4gICAgICAgICAgaWYgKHNvcnRUeXBlKSB7XHJcbiAgICAgICAgICAgIHNvcnRMaWJyYXJ5KHNvcnRUeXBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBsaWJyYXJ5OlwiLCBlcnJvcik7XHJcbiAgICBzaG93RXJyb3IoXCJVbmFibGUgdG8gbG9hZCBkb2N1bWVudCBsaWJyYXJ5LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgZG9jdW1lbnRzIGZyb20gZXh0ZXJuYWwgZmlsdGVyIChlLmcuLCBwcm9maWxlIFVJKVxyXG4gKiBAcGFyYW0ge0FycmF5fSBkb2N1bWVudHMgLSBGaWx0ZXJlZCBkb2N1bWVudHMgdG8gZGlzcGxheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERvY3VtZW50c0ZpbHRlcihkb2N1bWVudHMpIHtcclxuICBjdXJyZW50RG9jdW1lbnRzID0gc29ydERvY3VtZW50cyhkb2N1bWVudHMsIGN1cnJlbnRTb3J0KTtcclxuICByZW5kZXJMaWJyYXJ5VGFibGUoY3VycmVudERvY3VtZW50cyk7XHJcbiAgdXBkYXRlU29ydEJ1dHRvbnMoY3VycmVudFNvcnQpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGN1cnJlbnQgZG9jdW1lbnRzIChmb3IgcHJvZmlsZSBVSSBpbnRlZ3JhdGlvbilcclxuICogQHJldHVybnMge0FycmF5fSBDdXJyZW50IGRvY3VtZW50cyBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnREb2N1bWVudHMoKSB7XHJcbiAgcmV0dXJuIGN1cnJlbnREb2N1bWVudHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgY3VycmVudCBkb2N1bWVudHMgZGlyZWN0bHlcclxuICogQHBhcmFtIHtBcnJheX0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIHNldFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnREb2N1bWVudHMoZG9jdW1lbnRzKSB7XHJcbiAgY3VycmVudERvY3VtZW50cyA9IGRvY3VtZW50cztcclxufVxyXG4iLCIvKipcclxuICogTGlicmFyeSBQYWdlIE1haW4gRW50cnkgUG9pbnRcclxuICogSW5pdGlhbGl6ZXMgdGhlIGxpYnJhcnkgcGFnZVxyXG4gKiBPcHRpbWl6ZWQgdG8gcHJlbG9hZCBkYXRhIGFuZCByZWR1Y2UgbmV0d29yayByZXF1ZXN0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbGl6ZUxpYnJhcnksXHJcbiAgc2V0RG9jdW1lbnRzRmlsdGVyLFxyXG4gIGdldEN1cnJlbnREb2N1bWVudHMsXHJcbiAgc2V0Q3VycmVudERvY3VtZW50cyxcclxufSBmcm9tIFwiLi9saWJyYXJ5LXVpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbGl6ZVByb2ZpbGVVSSxcclxuICBnZXRGaWx0ZXJlZERvY3VtZW50cyxcclxuICBkZXRlY3RQcm9maWxlTW9kZSxcclxufSBmcm9tIFwiLi9wcm9maWxlLXVpLmpzXCI7XHJcbmltcG9ydCB7IHByZWxvYWRBbGxDb25maWdzLCBnZXREb2N1bWVudHMgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcclxuaW1wb3J0IHtcclxuICBwYXJzZVF1ZXJ5UGFyYW1zLFxyXG4gIHBhcnNlSGFzaFBhcmFtcyxcclxuICBmaWx0ZXJEb2N1bWVudHMsXHJcbiAgc29ydERvY3VtZW50cyxcclxufSBmcm9tIFwiLi91dGlscy5qc1wiO1xyXG5cclxuLy8gRGFyayBNb2RlIFRvZ2dsZSBGdW5jdGlvbmFsaXR5XHJcbmNvbnN0IERBUktfTU9ERV9LRVkgPSAnZGFya01vZGUnO1xyXG5cclxuZnVuY3Rpb24gaW5pdERhcmtNb2RlKCkge1xyXG4gIGNvbnN0IGFkbWluU2VhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbi1zZWFsJyk7XHJcbiAgaWYgKCFhZG1pblNlYWwpIHJldHVybjtcclxuXHJcbiAgLy8gQ2hlY2sgZm9yIHNhdmVkIHByZWZlcmVuY2Ugb3Igc3lzdGVtIHByZWZlcmVuY2VcclxuICBjb25zdCBzYXZlZE1vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShEQVJLX01PREVfS0VZKTtcclxuICBjb25zdCBwcmVmZXJzRGFyayA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykubWF0Y2hlcztcclxuICBcclxuICAvLyBBcHBseSBkYXJrIG1vZGUgaWYgc2F2ZWQgcHJlZmVyZW5jZSBpcyAndHJ1ZScgb3IgaWYgbm8gcHJlZmVyZW5jZSBhbmQgc3lzdGVtIHByZWZlcnMgZGFya1xyXG4gIGlmIChzYXZlZE1vZGUgPT09ICd0cnVlJyB8fCAoIXNhdmVkTW9kZSAmJiBwcmVmZXJzRGFyaykpIHtcclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrJyk7XHJcbiAgfVxyXG5cclxuICAvLyBUb2dnbGUgZGFyayBtb2RlIG9uIGNsaWNrXHJcbiAgYWRtaW5TZWFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2RhcmsnKTtcclxuICAgIGNvbnN0IGlzRGFyayA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmsnKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKERBUktfTU9ERV9LRVksIGlzRGFyayk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgd2hlbiBET00gaXMgcmVhZHlcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFzeW5jICgpID0+IHtcclxuICAvLyBJbml0aWFsaXplIGRhcmsgbW9kZVxyXG4gIGluaXREYXJrTW9kZSgpO1xyXG4gIC8vIFByZWxvYWQgY29uZmlnc1xyXG4gIGF3YWl0IHByZWxvYWRBbGxDb25maWdzKCk7XHJcblxyXG4gIC8vIExvYWQgYWxsIGRvY3VtZW50cyBvbmNlXHJcbiAgY29uc3QgYWxsRG9jdW1lbnRzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKCk7XHJcblxyXG4gIC8vIFBhcnNlIFVSTCBmaWx0ZXJzIChxdWVyeSBmaXJzdCwgZmFsbGJhY2sgdG8gaGFzaClcclxuICBsZXQgdXJsRmlsdGVycyA9IHBhcnNlUXVlcnlQYXJhbXMoKTtcclxuICBpZiAoIXVybEZpbHRlcnMuaW5zdGl0dXRpb24gJiYgIXVybEZpbHRlcnMuanVyaXNkaWN0aW9uICYmICF1cmxGaWx0ZXJzLml0ZW0pIHtcclxuICAgIHVybEZpbHRlcnMgPSBwYXJzZUhhc2hQYXJhbXMoKTtcclxuICB9XHJcblxyXG4gIC8vIERldGVjdCBwcm9maWxlIG1vZGVcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IGRldGVjdFByb2ZpbGVNb2RlKCk7XHJcblxyXG4gIGxldCBkb2NzID0gYWxsRG9jdW1lbnRzO1xyXG5cclxuICAvLyAx77iP4oOjIEFwcGx5IFVSTCBmaWx0ZXJzIEZJUlNUIChpdGVtIC8gaW5zdGl0dXRpb24gLyBqdXJpc2RpY3Rpb24pXHJcbiAgZG9jcyA9IGZpbHRlckRvY3VtZW50cyhkb2NzLCB1cmxGaWx0ZXJzKTtcclxuXHJcbiAgaWYgKHByb2ZpbGVJbmZvKSB7XHJcbiAgICAvLyAy77iP4oOjIEluaXRpYWxpemUgcHJvZmlsZSBVSVxyXG4gICAgYXdhaXQgaW5pdGlhbGl6ZVByb2ZpbGVVSSgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb2ZpbGVEb2NzID0gZ2V0RmlsdGVyZWREb2N1bWVudHMoKTtcclxuXHJcbiAgICAgIC8vIE1lcmdlIHByb2ZpbGUgZmlsdGVycyBXSVRIIFVSTCBmaWx0ZXJzXHJcbiAgICAgIGNvbnN0IHByb2ZpbGVJZHMgPSBuZXcgU2V0KHByb2ZpbGVEb2NzLm1hcChkb2MgPT4gZG9jLmlkKSk7XHJcbiAgICAgIGNvbnN0IG1lcmdlZERvY3MgPSBkb2NzLmZpbHRlcihkb2MgPT4gcHJvZmlsZUlkcy5oYXMoZG9jLmlkKSk7XHJcblxyXG4gICAgICBzZXREb2N1bWVudHNGaWx0ZXIobWVyZ2VkRG9jcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBcHBseSBpbml0aWFsIHByb2ZpbGUgZmlsdGVyXHJcbiAgICBjb25zdCBwcm9maWxlRG9jcyA9IGdldEZpbHRlcmVkRG9jdW1lbnRzKCk7XHJcbiAgICBjb25zdCBwcm9maWxlSWRzID0gbmV3IFNldChwcm9maWxlRG9jcy5tYXAoZG9jID0+IGRvYy5pZCkpO1xyXG4gICAgZG9jcyA9IGRvY3MuZmlsdGVyKGRvYyA9PiBwcm9maWxlSWRzLmhhcyhkb2MuaWQpKTtcclxuICB9XHJcblxyXG4gIC8vIDPvuI/ig6MgRmluYWwgc29ydCArIHJlbmRlclxyXG4gIGRvY3MgPSBzb3J0RG9jdW1lbnRzKGRvY3MsICduYW1lJyk7XHJcbiAgc2V0Q3VycmVudERvY3VtZW50cyhkb2NzKTtcclxuICBpbml0aWFsaXplTGlicmFyeSh1cmxGaWx0ZXJzLCBwcm9maWxlSW5mbyk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiQ0FDSEVfVkVSU0lPTiIsImNvbmZpZ0NhY2hlIiwiaW5zdGl0dXRpb25Db25maWdDYWNoZSIsImp1cmlzZGljdGlvbkNvbmZpZ0NhY2hlIiwic3F1aXJjbGVJY29uc0NvbmZpZ0NhY2hlIiwiY2FjaGVUaW1lc3RhbXBzIiwiZG9jdW1lbnRzIiwiaW5zdGl0dXRpb25zIiwianVyaXNkaWN0aW9ucyIsInNxdWlyY2xlSWNvbnMiLCJpc0NhY2hlVmFsaWQiLCJjYWNoZVR5cGUiLCJub3ciLCJEYXRlIiwidXBkYXRlQ2FjaGVUaW1lc3RhbXAiLCJhc3luYyIsImZldGNoV2l0aENhY2hlIiwidXJsIiwidXNlQ2FjaGVCdXN0aW5nIiwiY2FjaGVCdXN0ZXIiLCJmZXRjaCIsImNhY2hlIiwiaGVhZGVycyIsIkFjY2VwdCIsImxvYWREb2N1bWVudHNDb25maWciLCJyZXNwb25zZSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiY29uZmlnIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImxvYWRJbnN0aXR1dGlvbkNvbmZpZyIsImxvYWRKdXJpc2RpY3Rpb25Db25maWciLCJnZXRJbnN0aXR1dGlvbk1ldGFkYXRhIiwiaW5zdGl0dXRpb25OYW1lIiwiZ2V0RG9jdW1lbnRzIiwiZmlsdGVyIiwiZG9jIiwidmlzaWJsZSIsImxvYWRTcXVpcmNsZUljb25zQ29uZmlnIiwiaWNvbnMiLCJjbGVhckNvbmZpZ0NhY2hlIiwicGFyc2VRdWVyeVBhcmFtcyIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiaXRlbSIsImdldCIsImluc3RpdHV0aW9uIiwianVyaXNkaWN0aW9uIiwicGFyc2VIYXNoUGFyYW1zIiwiaGFzaCIsInNsaWNlIiwic29ydERvY3VtZW50cyIsInNvcnRCeSIsInNvcnRlZCIsInNvcnQiLCJhIiwiYiIsInRpdGxlIiwibG9jYWxlQ29tcGFyZSIsInZlcnNpb25EaWZmIiwidmVyc2lvbiIsImRhdGUiLCJmaWx0ZXJEb2N1bWVudHMiLCJmaWx0ZXJzIiwidG9Mb3dlckNhc2UiLCJlc2NhcGVIdG1sIiwidGV4dCIsImRpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiZ2V0Q2FjaGVWZXJzaW9uIiwic2V0Q2FjaGVWZXJzaW9uIiwicHJvZmlsZVN0YXRlIiwicHJvZmlsZVR5cGUiLCJwcm9maWxlTmFtZSIsImN1cnJlbnRGaWx0ZXIiLCJwcm9maWxlRGF0YSIsImF2YWlsYWJsZVR5cGVzIiwib25GaWx0ZXJDaGFuZ2VDYWxsYmFjayIsImV4dHJhY3RMYWJlbCIsIm5hbWUiLCJtYXRjaCIsInRyaW0iLCJsYWJlbCIsImRldGVjdFByb2ZpbGVNb2RlIiwidHlwZSIsImluaXRpYWxpemVQcm9maWxlVUkiLCJvbkZpbHRlckNoYW5nZSIsInByb2ZpbGVJbmZvIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJoaWRlUHJvZmlsZUNvbnRhaW5lciIsImFsbERvY3VtZW50cyIsIlNldCIsIm1hcCIsImp1cmlzZGljdGlvbk5hbWUiLCJnZXRKdXJpc2RpY3Rpb25NZXRhZGF0YSIsInJlbW92ZSIsInNob3dQcm9maWxlQ29udGFpbmVyIiwibWV0YWRhdGEiLCJjb3ZlclVybCIsImNvdmVyIiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwiYmlvIiwiY291bnRUZXh0IiwiY291bnQiLCJsZW5ndGgiLCJjb3VudEluc3RpdHV0aW9uRG9jdW1lbnRzIiwic2l6ZSIsImNvdW50SnVyaXNkaWN0aW9uQ29udHJpYnV0b3JzIiwiYnV0dG9uVGV4dCIsImFjdGlvbkJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVBY3Rpb25CdXR0b25DbGljayIsInJlbmRlclByb2ZpbGUiLCJ0eXBlcyIsImFsbCIsImJvb2siLCJndWlkZWxpbmUiLCJwb2xpY3kiLCJkZWNpc2lvbiIsInZlcmRpY3QiLCJub3RlIiwiZ2V0VHlwZUljb24iLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImpvaW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ0biIsInRvZ2dsZSIsImRhdGFzZXQiLCJzZXRGaWx0ZXIiLCJyZW5kZXJGaWx0ZXJQaWxscyIsImdldEZpbHRlcmVkRG9jdW1lbnRzIiwiY29udGFjdCIsIm1vZGFsT3ZlcmxheSIsIm1vZGFsVGl0bGUiLCJtb2RhbENvbnRlbnQiLCJlbWFpbCIsInBob25lIiwicmVwbGFjZSIsImFkZHJlc3MiLCJ3ZWJzaXRlIiwic2hvd0NvbnRhY3RDYXJkIiwiY29udHJpYnV0b3JzIiwiY29udHJpYnV0b3JNYXAiLCJNYXAiLCJzZXQiLCJBcnJheSIsImZyb20iLCJlbnRyaWVzIiwiZ2V0SnVyaXNkaWN0aW9uQ29udHJpYnV0b3JzIiwiY29udHJpYnV0b3JJdGVtcyIsIlByb21pc2UiLCJjb250cmlidXRvciIsImluc3ROYW1lIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2hvd0NvbnRyaWJ1dG9yTGlzdCIsImNsb3NlTW9kYWwiLCJtb2RhbENsb3NlIiwiZSIsInRhcmdldCIsImtleSIsImluaXRpYWxpemVNb2RhbExpc3RlbmVycyIsImN1cnJlbnRTb3J0IiwiY3VycmVudERvY3VtZW50cyIsImlzUHJvZmlsZU1vZGUiLCJyZW5kZXJMaWJyYXJ5VGFibGUiLCJ3YXJuIiwiaXNJbnN0aXR1dGlvblByb2ZpbGUiLCJoZWFkZXJIVE1MIiwiZ3JpZENsYXNzIiwicm93IiwiaXNKdXJpc2RpY3Rpb25Qcm9maWxlIiwiY2xhc3NOYW1lIiwidGl0bGVDZWxsIiwibGluayIsImhyZWYiLCJmaWxlbmFtZSIsImFwcGVuZENoaWxkIiwibWV0YWRhdGFDZWxsIiwianVyaXNkaWN0aW9uTGluayIsInZlcnNpb25DZWxsIiwiZGF0ZUNlbGwiLCJkYXRlRm9ybWF0dGVkIiwiaW5zdGl0dXRpb25MaW5rIiwiY3JlYXRlTGlicmFyeVJvdyIsInVwZGF0ZVNvcnRCdXR0b25zIiwic29ydFR5cGUiLCJpbml0aWFsaXplTGlicmFyeSIsInVybEZpbHRlcnMiLCJib2R5Iiwic29ydENvbnRyb2xzIiwicXVlcnlTZWxlY3RvciIsImNvbnRleHRFbGVtZW50IiwiY29udGV4dCIsInB1c2giLCJ1cGRhdGVDb250ZXh0IiwibWVzc2FnZSIsImVycm9yRGl2Iiwic3R5bGUiLCJjc3NUZXh0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInNldFRpbWVvdXQiLCJzaG93RXJyb3IiLCJEQVJLX01PREVfS0VZIiwiYWRtaW5TZWFsIiwic2F2ZWRNb2RlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInByZWZlcnNEYXJrIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJkb2N1bWVudEVsZW1lbnQiLCJpc0RhcmsiLCJjb250YWlucyIsInNldEl0ZW0iLCJpbml0RGFya01vZGUiLCJwcmVsb2FkQWxsQ29uZmlncyIsImRvY3MiLCJwcm9maWxlRG9jcyIsInByb2ZpbGVJZHMiLCJpZCIsIm1lcmdlZERvY3MiLCJoYXMiXSwibWFwcGluZ3MiOiJBQVFBLE1BQU1BLEVBQWdCLFFBRXRCLElBQUlDLEVBQWMsS0FDZEMsRUFBeUIsS0FDekJDLEVBQTBCLEtBQzFCQyxFQUEyQixLQUkvQixJQUFJQyxFQUFrQixDQUNwQkMsVUFBVyxFQUNYQyxhQUFjLEVBQ2RDLGNBQWUsRUFDZkMsY0FBZSxHQVFqQixTQUFTQyxFQUFhQyxHQUNwQixNQUFNQyxFQUFNQyxLQUFLRCxNQUNqQixPQUFPUCxFQUFnQk0sSUFBZUMsRUFBTVAsRUFBZ0JNLEdBZjVDLEdBZ0JsQixDQU1BLFNBQVNHLEVBQXFCSCxHQUM1Qk4sRUFBZ0JNLEdBQWFFLEtBQUtELEtBQ3BDLENBUUFHLGVBQWVDLEVBQWVDLEVBQUtDLEdBQWtCLEdBRW5ELE1BQU1DLEVBQWNELEVBQ2hCLE1BQU1sQixPQUFtQmEsS0FBS0QsUUFDOUIsTUFBTUMsS0FBS0QsUUFFZixPQUFPUSxNQUFNSCxFQUFNRSxFQUFhLENBQzlCRSxNQUFPLFdBQ1BDLFFBQVMsQ0FDUEMsT0FBVSxxQkFHaEIsQ0FNT1IsZUFBZVMsSUFDcEIsR0FBSXZCLEdBQWVTLEVBQWEsYUFDOUIsT0FBT1QsRUFHVCxJQUNFLE1BQU13QixRQUFpQlQsRUFBZSxnQ0FDdEMsSUFBS1MsRUFBU0MsR0FDWixNQUFNLElBQUlDLE1BQU0sMEJBQTBCRixFQUFTRyxVQUFVSCxFQUFTSSxjQUd4RSxNQUFNQyxRQUFlTCxFQUFTTSxPQUc5QixPQUZBOUIsRUFBYzZCLEVBQ2RoQixFQUFxQixhQUNkZ0IsQ0FDVCxDQUFFLE1BQU9FLEdBRVAsTUFEQUMsUUFBUUQsTUFBTSxrQ0FBbUNBLEdBQzNDQSxDQUNSLENBQ0YsQ0FNT2pCLGVBQWVtQixJQUNwQixHQUFJaEMsR0FBMEJRLEVBQWEsZ0JBQ3pDLE9BQU9SLEVBR1QsSUFDRSxNQUFNdUIsUUFBaUJULEVBQWUsa0NBQ3RDLElBQUtTLEVBQVNDLEdBQ1osTUFBTSxJQUFJQyxNQUFNLHNDQUFzQ0YsRUFBU0csVUFBVUgsRUFBU0ksY0FHcEYsTUFBTUMsUUFBZUwsRUFBU00sT0FHOUIsT0FGQTdCLEVBQXlCNEIsRUFDekJoQixFQUFxQixnQkFDZGdCLENBQ1QsQ0FBRSxNQUFPRSxHQUdQLE9BRkFDLFFBQVFELE1BQU0sb0NBQXFDQSxHQUU1QyxDQUFFekIsYUFBYyxDQUFBLEVBQ3pCLENBQ0YsQ0FNT1EsZUFBZW9CLElBQ3BCLEdBQUloQyxHQUEyQk8sRUFBYSxpQkFDMUMsT0FBT1AsRUFHVCxJQUNFLE1BQU1zQixRQUFpQlQsRUFBZSxtQ0FDdEMsSUFBS1MsRUFBU0MsR0FDWixNQUFNLElBQUlDLE1BQU0sdUNBQXVDRixFQUFTRyxVQUFVSCxFQUFTSSxjQUdyRixNQUFNQyxRQUFlTCxFQUFTTSxPQUk5QixPQUZBNUIsRUFBMEIyQixFQUMxQmhCLEVBQXFCLGlCQUNkZ0IsQ0FDVCxDQUFFLE1BQU9FLEdBR1AsT0FGQUMsUUFBUUQsTUFBTSxxQ0FBc0NBLEdBRTdDLENBQUV4QixjQUFlLENBQUEsRUFDMUIsQ0FDRixDQU9PTyxlQUFlcUIsRUFBdUJDLEdBQzNDLE1BQU1QLFFBQWVJLElBQ3JCLE9BQU9KLEVBQU92QixlQUFlOEIsSUFBb0IsSUFDbkQsQ0FnQk90QixlQUFldUIsSUFFcEIsYUFEcUJkLEtBQ1BsQixVQUFVaUMsT0FBT0MsSUFBdUIsSUFBaEJBLEVBQUlDLFFBQzVDLENBb0NPMUIsZUFBZTJCLElBQ3BCLEdBQUl0QyxHQUE0Qk0sRUFBYSxpQkFDM0MsT0FBT04sRUFHVCxJQUNFLE1BQU1xQixRQUFpQlQsRUFBZSxxQ0FDdEMsSUFBS1MsRUFBU0MsR0FDWixNQUFNLElBQUlDLE1BQU0seUNBQXlDRixFQUFTRyxVQUFVSCxFQUFTSSxjQUd2RixNQUFNQyxRQUFlTCxFQUFTTSxPQUc5QixPQUZBM0IsRUFBMkIwQixFQUMzQmhCLEVBQXFCLGlCQUNkZ0IsQ0FDVCxDQUFFLE1BQU9FLEdBR1AsT0FGQUMsUUFBUUQsTUFBTSx1Q0FBd0NBLEdBRS9DLENBQUVXLE1BQU8sQ0FBQSxFQUNsQixDQUNGLENBcURPLFNBQVNDLElBQ2QzQyxFQUFjLEtBQ2RDLEVBQXlCLEtBQ3pCQyxFQUEwQixLQUMxQkMsRUFBMkIsS0FDM0JDLEVBQWtCLENBQ2hCQyxVQUFXLEVBQ1hDLGFBQWMsRUFDZEMsY0FBZSxFQUNmQyxjQUFlLEVBRW5CLENDdFJPLFNBQVNvQyxJQUNkLE1BQU1DLEVBQVMsSUFBSUMsZ0JBQWdCQyxPQUFPQyxTQUFTQyxRQUNuRCxNQUFPLENBQ0xDLEtBQU1MLEVBQU9NLElBQUksUUFDakJDLFlBQWFQLEVBQU9NLElBQUksZUFDeEJFLGFBQWNSLEVBQU9NLElBQUksZ0JBRTdCLENBTU8sU0FBU0csSUFDZCxNQUFNQyxFQUFPUixPQUFPQyxTQUFTTyxLQUFLQyxNQUFNLEdBQ3hDLElBQUtELEVBQU0sTUFBTyxDQUFFTCxLQUFNLEtBQU1FLFlBQWEsS0FBTUMsYUFBYyxNQUVqRSxNQUFNUixFQUFTLElBQUlDLGdCQUFnQlMsR0FDbkMsTUFBTyxDQUNMTCxLQUFNTCxFQUFPTSxJQUFJLFFBQ2pCQyxZQUFhUCxFQUFPTSxJQUFJLGVBQ3hCRSxhQUFjUixFQUFPTSxJQUFJLGdCQUU3QixDQXNDTyxTQUFTTSxFQUFjcEQsRUFBV3FELEdBQ3ZDLE1BQU1DLEVBQVMsSUFBSXRELEdBRW5CLE9BQVFxRCxHQUNOLElBQUssT0FDSCxPQUFPQyxFQUFPQyxLQUFLLENBQUNDLEVBQUdDLElBQU1ELEVBQUVFLE1BQU1DLGNBQWNGLEVBQUVDLFFBRXZELElBQUssVUFDSCxPQUFPSixFQUFPQyxLQUFLLENBQUNDLEVBQUdDLEtBQ3JCLE1BQU1HLEVBQWNILEVBQUVJLFFBQVVMLEVBQUVLLFFBQ2xDLE9BQW9CLElBQWhCRCxFQUEwQkEsRUFDdkIsSUFBSXJELEtBQUtrRCxFQUFFSyxNQUFRLElBQUl2RCxLQUFLaUQsRUFBRU0sUUFHekMsSUFBSyxPQUNILE9BQU9SLEVBQU9DLEtBQUssQ0FBQ0MsRUFBR0MsSUFBTSxJQUFJbEQsS0FBS2tELEVBQUVLLE1BQVEsSUFBSXZELEtBQUtpRCxFQUFFTSxPQUU3RCxRQUNFLE9BQU9SLEVBRWIsQ0FRTyxTQUFTUyxFQUFnQi9ELEVBQVdnRSxHQUN6QyxPQUFPaEUsRUFBVWlDLE9BQU9DLEtBQ2xCOEIsRUFBUW5CLE1BQVFYLEVBQUlXLEtBQUtvQixnQkFBa0JELEVBQVFuQixLQUFLb0IsbUJBR3hERCxFQUFRakIsYUFBZWIsRUFBSWEsWUFBWWtCLGdCQUFrQkQsRUFBUWpCLFlBQVlrQixrQkFHN0VELEVBQVFoQixjQUFnQmQsRUFBSWMsYUFBYWlCLGdCQUFrQkQsRUFBUWhCLGFBQWFpQixnQkFLeEYsQ0FPTyxTQUFTQyxFQUFXQyxHQUN6QixNQUFNQyxFQUFNQyxTQUFTQyxjQUFjLE9BRW5DLE9BREFGLEVBQUlHLFlBQWNKLEVBQ1hDLEVBQUlJLFNBQ2IsQ0R3S3NCLG9CQUFYOUIsU0FDVEEsT0FBT0osaUJBQW1CQSxFQUMxQkksT0FBTytCLGdCQWhDRixXQUNMLE9BQU8vRSxDQUNULEVBK0JFZ0QsT0FBT2dDLGdCQXpCRixTQUF5QmIsR0FFOUJ2QixHQUNGLEdFalFBLE1BQU1xQyxFQUFlLENBQ25CQyxZQUFhLEtBQ2JDLFlBQWEsS0FDYkMsY0FBZSxNQUNmOUUsVUFBVyxHQUNYK0UsWUFBYSxLQUNiQyxlQUFnQixJQUlsQixJQUFJQyxFQUF5QixLQU83QixTQUFTQyxFQUFhQyxHQUNwQixNQUFNQyxFQUFRRCxFQUFLQyxNQUFNLDBCQUN6QixPQUFJQSxFQUNLLENBQ0xELEtBQU1DLEVBQU0sR0FBR0MsT0FDZkMsTUFBT0YsRUFBTSxHQUFHQyxRQUdiLENBQUVGLEtBQU1BLEVBQUtFLE9BQVFDLE1BQU8sR0FDckMsQ0F5Q08sU0FBU0MsSUFFZCxJQUFJL0MsRUFBU0QsSUFPYixPQUpLQyxFQUFPTyxhQUFnQlAsRUFBT1EsZUFDakNSLEVBQVNTLEtBR1BULEVBQU9PLFlBQ0YsQ0FDTHlDLEtBQU0sY0FDTkwsS0FBTTNDLEVBQU9PLGFBSWJQLEVBQU9RLGFBQ0YsQ0FDTHdDLEtBQU0sZUFDTkwsS0FBTTNDLEVBQU9RLGNBSVYsSUFDVCxDQU1PdkMsZUFBZWdGLEVBQW9CQyxHQUN4Q1QsRUFBeUJTLEVBRXpCLE1BQU1DLEVBQWNKLElBQ3BCLElBQUtJLEVBR0gsWUFxQ0osV0FDRSxNQUFNQyxFQUFZdkIsU0FBU3dCLGVBQWUscUJBQ3RDRCxHQUNGQSxFQUFVRSxVQUFVQyxJQUFJLFNBRTVCLENBM0NJQyxHQUlGckIsRUFBYUMsWUFBY2UsRUFBWUgsS0FDdkNiLEVBQWFFLFlBQWNjLEVBQVlSLEtBR3ZDLE1BQU1jLFFBQXFCakUsSUFyRDdCLElBQTBCaEMsRUFzRHhCMkUsRUFBYTNFLFVBQVlpRyxFQUFhaEUsT0FBUUMsR0FDWCxnQkFBN0J5QyxFQUFhQyxZQUNSMUMsRUFBSWEsY0FBZ0I0QixFQUFhRSxZQUVqQzNDLEVBQUljLGVBQWlCMkIsRUFBYUUsYUFJN0NGLEVBQWFLLGdCQTlEV2hGLEVBOER1QjJFLEVBQWEzRSxVQTVEckQsQ0FBQyxTQUFVLElBREosSUFBSWtHLElBQUlsRyxFQUFVbUcsSUFBS2pFLEdBQVFBLEVBQUlXLFFBQ3BCVSxLQUFLLENBQUNDLEVBQUdDLElBQU1ELEVBQUVHLGNBQWNGLE1BK0QzQixnQkFBN0JrQixFQUFhQyxZQUNmRCxFQUFhSSxrQkFBb0JqRCxFQUMvQjZDLEVBQWFFLGFBR2ZGLEVBQWFJLGtCRmFWdEUsZUFBdUMyRixHQUM1QyxNQUFNNUUsUUFBZUssSUFDckIsT0FBT0wsRUFBT3RCLGdCQUFnQmtHLElBQXFCLElBQ3JELENFaEJxQ0MsQ0FDL0IxQixFQUFhRSxhQWdDbkIsWUFWQSxXQUNFLE1BQU1lLEVBQVl2QixTQUFTd0IsZUFBZSxxQkFDdENELEdBQ0ZBLEVBQVVFLFVBQVVRLE9BQU8sU0FFL0IsQ0FNRUMsR0FFQSxNQUFNWCxFQUFZdkIsU0FBU3dCLGVBQWUsa0JBQzFDLElBQUtELEVBQVcsT0FFaEIsTUFBTVQsS0FBRUEsRUFBSUcsTUFBRUEsR0FBVUosRUFBYVAsRUFBYUUsYUFDNUMyQixFQUFXN0IsRUFBYUksYUFBZSxHQUd2QzBCLEVBQVdELEVBQVNFLE9BQVMsNkJBQzdCQyxFQUFZSCxFQUFTSSxRQUFVLCtCQUMvQkMsRUFBTUwsRUFBU0ssS0FBTyxHQUc1QixJQUFJQyxFQUFZLEdBQ2hCLEdBQWlDLGdCQUE3Qm5DLEVBQWFDLFlBQStCLENBQzlDLE1BQU1tQyxFQWhKVixTQUFtQy9HLEVBQVcrQixHQUM1QyxPQUFPL0IsRUFBVWlDLE9BQVFDLEdBQVFBLEVBQUlhLGNBQWdCaEIsR0FBaUJpRixNQUN4RSxDQThJa0JDLENBQ1p0QyxFQUFhM0UsVUFDYjJFLEVBQWFFLGFBRWZpQyxFQUFZLEdBQUdDLGlCQUNqQixLQUFPLENBQ0wsTUFBTUEsRUE1SVYsU0FBdUMvRyxFQUFXb0csR0FNaEQsT0FMcUIsSUFBSUYsSUFDdkJsRyxFQUNHaUMsT0FBUUMsR0FBUUEsRUFBSWMsZUFBaUJvRCxHQUNyQ0QsSUFBS2pFLEdBQVFBLEVBQUlhLGNBRUZtRSxJQUN0QixDQXFJa0JDLENBQ1p4QyxFQUFhM0UsVUFDYjJFLEVBQWFFLGFBRWZpQyxFQUFZLEdBQUdDLGdCQUNqQixDQUVBLE1BQU1LLEVBQTBDLGdCQUE3QnpDLEVBQWFDLFlBQWdDLFVBQVksZUFFNUVnQixFQUFVcEIsVUFBWSxzREFFTk4sRUFBV3VDLHFNQUtQdkMsRUFBV3lDLFlBQW9CekMsRUFBV2lCLHdLQUdHakIsRUFBV2tELDRIQUkzQ2xELEVBQVdpQixvQkFDcENHLEVBQVEsK0JBQStCcEIsRUFBV29CLFlBQWtCLDJDQUN4Q3BCLEVBQVc0QyxzQkFDdkNELEVBQU0sMEJBQTBCM0MsRUFBVzJDLFNBQWEsbUNBTWhFLE1BQU1RLEVBQVloRCxTQUFTd0IsZUFBZSxzQkFDdEN3QixHQUNGQSxFQUFVQyxpQkFBaUIsUUFBU0MsRUFFeEMsQ0F0RkVDLEdBMkZGLFdBQ0UsTUFBTTVCLEVBQVl2QixTQUFTd0IsZUFBZSxtQkFDMUMsSUFBS0QsRUFBVyxPQUVoQixNQUFNNkIsRUFBUTlDLEVBQWFLLGVBRTNCWSxFQUFVcEIsVUFBWSxxREFFaEJpRCxFQUNDdEIsSUFDRVgsSUFBUywwREFFV0EsSUFBU2IsRUFBYUcsY0FBZ0IsU0FBVyw4QkFDekRaLEVBQVdzQiwwRUEyQmxDLFNBQXFCQSxHQVVuQixNQVRjLENBQ1prQyxJQUFLLEtBQ0xDLEtBQU0sS0FDTkMsVUFBVyxLQUNYQyxPQUFRLEtBQ1JDLFNBQVUsS0FDVkMsUUFBUyxLQUNUQyxLQUFNLE1BRUt4QyxFQUFLdkIsZ0JBQWtCLElBQ3RDLENBbkNjZ0UsQ0FBWXpDLG9FQUVrQnRCLEdBd0NuQmdFLEVBeEM4QzFDLEVBeUM5RDBDLEVBQUlDLE9BQU8sR0FBR0MsY0FBZ0JGLEVBQUkvRSxNQUFNLHlDQURqRCxJQUF5QitFLElBcENoQkcsS0FBSyxzQkFLWnpDLEVBQVUwQyxpQkFBaUIsZ0JBQWdCQyxRQUFTQyxJQUNsREEsRUFBSWxCLGlCQUFpQixRQUFTLE1Bc0NsQyxTQUFtQjlCLEdBQ2pCYixFQUFhRyxjQUFnQlUsRUFHN0JuQixTQUFTaUUsaUJBQWlCLGdCQUFnQkMsUUFBU0MsSUFDakRBLEVBQUkxQyxVQUFVMkMsT0FBTyxTQUFVRCxFQUFJRSxRQUFRbEQsT0FBU0EsS0FJbERQLEdBQ0ZBLEVBQXVCTyxFQUUzQixDQWhETW1ELENBRGFILEVBQUlFLFFBQVFsRCxTQUkvQixDQTNIRW9ELEVBQ0YsQ0FxTE8sU0FBU0MsSUFDZCxNQUFtQyxRQUEvQmxFLEVBQWFHLGNBQ1JILEVBQWEzRSxVQUVmMkUsRUFBYTNFLFVBQVVpQyxPQUMzQkMsR0FDQ0EsRUFBSVcsS0FBS29CLGdCQUFrQlUsRUFBYUcsY0FBY2IsY0FFNUQsQ0FjQSxTQUFTc0QsSUFDMEIsZ0JBQTdCNUMsRUFBYUMsWUFVbkJuRSxpQkFDRSxNQUFNK0YsRUFBVzdCLEVBQWFJLGFBQWUsSUFDdkNJLEtBQUVBLEVBQUlHLE1BQUVBLEdBQVVKLEVBQWFQLEVBQWFFLGFBQzVDaUUsRUFBVXRDLEVBQVNzQyxTQUFXLEdBRTlCQyxFQUFlMUUsU0FBU3dCLGVBQWUseUJBQ3ZDbUQsRUFBYTNFLFNBQVN3QixlQUFlLGVBQ3JDb0QsRUFBZTVFLFNBQVN3QixlQUFlLGlCQUU3QyxJQUFLa0QsSUFBaUJDLElBQWVDLEVBRW5DLFlBREF0SCxRQUFRRCxNQUFNLDRCQUloQnNILEVBQVd6RSxZQUFjLHNCQUV6QixNQUFNb0MsRUFBWUgsRUFBU0ksUUFBVSwrQkFFckNxQyxFQUFhekUsVUFBWSxnR0FHUE4sRUFBV3lDLFlBQW9CekMsRUFBV2lCLCtIQUVuQmpCLEVBQVdpQix1QkFDMUNHLEVBQVEsbUNBQW1DcEIsRUFBV29CLFdBQWlCLDJDQUczRXdELEVBQVFJLE1BQVEseVBBTVFoRixFQUFXNEUsRUFBUUksV0FBV2hGLEVBQVc0RSxFQUFRSSwyRUFJdkUsYUFDRkosRUFBUUssTUFBUSxzUEFNS2pGLEVBQVc0RSxFQUFRSyxNQUFNQyxRQUFRLE1BQU8sU0FBU2xGLEVBQVc0RSxFQUFRSywyRUFJdkYsYUFDRkwsRUFBUU8sUUFBVSwyTkFLb0JuRixFQUFXNEUsRUFBUU8sMkRBR3ZELGFBQ0ZQLEVBQVFRLFFBQVUsb1BBTURwRixFQUFXNEUsRUFBUVEsdURBQXVEcEYsRUFBVzRFLEVBQVFRLDZFQUk1RyxhQUNEUixFQUFRSSxPQUFVSixFQUFRSyxPQUFVTCxFQUFRTyxTQUFZUCxFQUFRUSxRQUsvRCxHQUx5RSw2TkFTakZQLEVBQWFqRCxVQUFVQyxJQUFJLFNBQzdCLENBeEZJd0QsR0E2Rko5SSxpQkFDMEJ5RSxFQUFhUCxFQUFhRSxhQUVsRCxNQUFNa0UsRUFBZTFFLFNBQVN3QixlQUFlLHlCQUN2Q21ELEVBQWEzRSxTQUFTd0IsZUFBZSxlQUNyQ29ELEVBQWU1RSxTQUFTd0IsZUFBZSxpQkFFN0MsSUFBS2tELElBQWlCQyxJQUFlQyxFQUVuQyxZQURBdEgsUUFBUUQsTUFBTSw0QkFJaEJzSCxFQUFXekUsWUFBYyxlQUd6QixNQUFNaUYsRUE0Q1IsU0FBcUNwRCxHQUNuQyxNQUFNcUQsRUFBaUIsSUFBSUMsSUFTM0IsT0FQQS9FLEVBQWEzRSxVQUFVdUksUUFBU3JHLElBQzlCLEdBQUlBLEVBQUljLGVBQWlCb0QsRUFBa0IsQ0FDekMsTUFBTXJELEVBQWNiLEVBQUlhLFlBQ3hCMEcsRUFBZUUsSUFBSTVHLEdBQWMwRyxFQUFlM0csSUFBSUMsSUFBZ0IsR0FBSyxFQUMzRSxJQUdLNkcsTUFBTUMsS0FBS0osRUFBZUssV0FDOUIzRCxJQUFJLEVBQUVoQixFQUFNNEIsTUFBTSxDQUFRNUIsT0FBTTRCLFdBQ2hDeEQsS0FBSyxDQUFDQyxFQUFHQyxJQUFNQSxFQUFFc0QsTUFBUXZELEVBQUV1RCxNQUNoQyxDQXpEdUJnRCxDQUE0QnBGLEVBQWFFLGFBRTlELEdBQTRCLElBQXhCMkUsRUFBYXhDLE9BQ2ZpQyxFQUFhekUsVUFBWSwwTEFNcEIsQ0FDTCxNQUFNd0YsUUFBeUJDLFFBQVF2QyxJQUNyQzhCLEVBQWFyRCxJQUFJMUYsTUFBT3lKLElBQ3RCLE1BQU0xRCxRQUFpQjFFLEVBQXVCb0ksRUFBWS9FLE1BQ3BEd0IsRUFBWUgsR0FBVUksUUFBVSxnQ0FDOUJ6QixLQUFNZ0YsR0FBK0JqRixFQUFhZ0YsRUFBWS9FLE1BRXRFLE1BQU8scUVBRVNqQixFQUFXeUMsWUFBb0J6QyxFQUFXaUcsOEpBRXBCakcsRUFBV2lHLDBEQUNWRCxFQUFZbkQscUJBQTJDLElBQXRCbUQsRUFBWW5ELE1BQWMsSUFBTSxtRUFFNUVxRCxtQkFBbUJGLEVBQVkvRSwwRUFNL0Q4RCxFQUFhekUsVUFBWSxtREFFbkJ3RixFQUFpQjNCLEtBQUsseUJBRzlCLENBRUFVLEVBQWFqRCxVQUFVQyxJQUFJLFNBQzdCLENBL0lJc0UsRUFFSixDQXNLQSxTQUFTQyxJQUNQLE1BQU12QixFQUFlMUUsU0FBU3dCLGVBQWUseUJBQ3pDa0QsR0FDRkEsRUFBYWpELFVBQVVRLE9BQU8sU0FFbEMsRUFLQSxXQUNFLE1BQU15QyxFQUFlMUUsU0FBU3dCLGVBQWUseUJBQ3ZDMEUsRUFBYWxHLFNBQVN3QixlQUFlLGVBR3ZDMEUsR0FDRkEsRUFBV2pELGlCQUFpQixRQUFTZ0QsR0FJbkN2QixHQUNGQSxFQUFhekIsaUJBQWlCLFFBQVVrRCxJQUNsQ0EsRUFBRUMsU0FBVzFCLEdBQ2Z1QixNQU1OakcsU0FBU2lELGlCQUFpQixVQUFZa0QsSUFDdEIsV0FBVkEsRUFBRUUsS0FDSkosS0FHTixDQUdBSyxHQ2ppQkEsSUFBSUMsRUFBYyxPQUNkQyxFQUFtQixHQUNuQkMsR0FBZ0IsRUFvRnBCLFNBQVNDLEVBQW1CL0ssR0FDMUIsTUFBTTRGLEVBQVl2QixTQUFTd0IsZUFBZSxXQUMxQyxJQUFLRCxFQUVILFlBREFqRSxRQUFRcUosS0FBSywrQkFLZixNQUFNckYsRUFBY0osSUFDZDBGLEVBQTZDLGdCQUF0QnRGLEdBQWFILEtBRXBDc0YsRUFBZ0JHLEdBRDhCLGlCQUF0QnRGLEdBQWFILEtBSTNDSSxFQUFVcEIsVUFBWSxHQUd0QixJQUFJMEcsRUFBYSxHQUVqQixHQUFJSixFQUFlLENBQ2pCLE1BQU1LLEVBQVksdUJBR2hCRCxFQURFRCxFQUNXLDRDQUNzQkUsb09BS3RCLDRDQUNzQkEsbU9BS3ZDLEtBQU8sQ0FHTEQsRUFBYSw0Q0FESyxpVEFPcEIsQ0FFQXRGLEVBQVVwQixVQUFZMEcsRUFHdEJsTCxFQUFVdUksUUFBU3JHLElBQ2pCLE1BQU1rSixFQS9IVixTQUEwQmxKLEdBQ3hCLE1BQU15RCxFQUFjSixJQUNkMEYsRUFBNkMsZ0JBQXRCdEYsR0FBYUgsS0FDcEM2RixFQUE4QyxpQkFBdEIxRixHQUFhSCxLQUNyQ3NGLEVBQWdCRyxHQUF3QkksRUFFeENELEVBQU0vRyxTQUFTQyxjQUFjLE9BRzdCNkcsRUFBWUwsRUFDZCx1QkFDQSx1QkFFSk0sRUFBSUUsVUFBWSxlQUFlSCxvREFFL0JDLEVBQUkxQyxRQUFRdkQsS0FBT2pELEVBQUl3QixNQUN2QjBILEVBQUkxQyxRQUFRN0UsUUFBVTNCLEVBQUkyQixRQUMxQnVILEVBQUkxQyxRQUFRNUUsS0FBTzVCLEVBQUk0QixLQUN2QnNILEVBQUkxQyxRQUFRN0YsS0FBT1gsRUFBSVcsS0FDdkJ1SSxFQUFJMUMsUUFBUTNGLFlBQWNiLEVBQUlhLFlBQzlCcUksRUFBSTFDLFFBQVExRixhQUFlZCxFQUFJYyxhQUcvQixNQUFNdUksRUFBWWxILFNBQVNDLGNBQWMsUUFDekNpSCxFQUFVRCxVQUNSLDBEQUNGLE1BQU1FLEVBQU9uSCxTQUFTQyxjQUFjLEtBQ3BDa0gsRUFBS0MsS0FBT3ZKLEVBQUl3SixTQUNoQkYsRUFBS2pILFlBQWNyQyxFQUFJd0IsTUFDdkI4SCxFQUFLRixVQUFZLHdEQUNqQkMsRUFBVUksWUFBWUgsR0FHdEIsTUFBTUksRUFBZXZILFNBQVNDLGNBQWMsUUFFNUMsR0FBSTJHLEVBQXNCLENBRXhCVyxFQUFhTixVQUNYLCtGQUNGLE1BQU1sRixHQUFvQmxFLEVBQUljLGNBQWdCLElBQUlvRyxRQUFRLGlCQUFrQixJQUN0RXlDLEVBQW1CM0osRUFBSWMsYUFBZSxpQkFBaUJvSCxtQkFBbUJsSSxFQUFJYyxnQkFBa0IsSUFDdEc0SSxFQUFhcEgsVUFBWSxxREFBcUROLEVBQVcySCxvQ0FBbUQzSCxFQUFXa0MsUUFDekosS0FBTyxLQUFJaUYsRUFPSixDQUVMLE1BQU1TLEVBQWN6SCxTQUFTQyxjQUFjLFFBQzNDd0gsRUFBWVIsVUFBWSxxREFDeEJRLEVBQVl0SCxVQUFZLGtEQUFrRHRDLEVBQUkyQixVQUU5RSxNQUFNa0ksRUFBVzFILFNBQVNDLGNBQWMsUUFReEMsT0FQQXlILEVBQVNULFVBQVksNENBQ3JCUyxFQUFTeEgsWUFBY3JDLEVBQUk4SixjQUUzQlosRUFBSU8sWUFBWUosR0FDaEJILEVBQUlPLFlBQVlHLEdBQ2hCVixFQUFJTyxZQUFZSSxHQUVUWCxDQUNULENBdEJrQyxDQUVoQ1EsRUFBYU4sVUFDWCwrRkFDRixNQUFNdkosR0FBbUJHLEVBQUlhLGFBQWUsSUFBSXFHLFFBQVEsaUJBQWtCLElBQ3BFNkMsRUFBa0IvSixFQUFJYSxZQUFjLGdCQUFnQnFILG1CQUFtQmxJLEVBQUlhLGVBQWlCLElBQ2xHNkksRUFBYXBILFVBQVkscURBQXFETixFQUFXK0gsb0NBQWtEL0gsRUFBV25DLFFBQ3hKLENBZUEsQ0FNQSxPQUhBcUosRUFBSU8sWUFBWUosR0FDaEJILEVBQUlPLFlBQVlDLEdBRVRSLENBQ1QsQ0F3RGdCYyxDQUFpQmhLLEdBQzdCMEQsRUFBVStGLFlBQVlQLElBRTFCLENBMEJBLFNBQVNlLEVBQWtCQyxHQUN6Qi9ILFNBQVNpRSxpQkFBaUIseUJBQXlCQyxRQUFTQyxJQUMxREEsRUFBSTFDLFVBQVVRLE9BQU8sVUFDakJrQyxFQUFJRSxRQUFRbkYsT0FBUzZJLEdBQ3ZCNUQsRUFBSTFDLFVBQVVDLElBQUksV0FHeEIsQ0E4Qk90RixlQUFlNEwsRUFBa0JDLEVBQWEsR0FBSTNHLEVBQWMsTUFDckUsSUFFRW1GLElBQWtCbkYsS0FBaUJKLElBR1p1RixFQWpCdkJ6RyxTQUFTa0ksS0FBS3pHLFVBQVVDLElBQUksZUFFNUIxQixTQUFTa0ksS0FBS3pHLFVBQVVRLE9BQU8sZUFrQi9CLE1BQU1rRyxFQUFlbkksU0FBU29JLGNBQWMsMEJBQ3hDRCxJQUNFMUIsRUFDRjBCLEVBQWExRyxVQUFVQyxJQUFJLFVBRTNCeUcsRUFBYTFHLFVBQVVRLE9BQU8sV0FLbEMsTUFBTW9HLEVBQWlCckksU0FBU3dCLGVBQWUsbUJBVy9DLEdBVkk2RyxJQUNFNUIsRUFDRjRCLEVBQWU1RyxVQUFVQyxJQUFJLFVBRTdCMkcsRUFBZTVHLFVBQVVRLE9BQU8sV0FNSixJQUE1QnVFLEVBQWlCN0QsT0FBYyxDQUVqQyxNQUFNZixRQUFxQmpFLElBRzNCNkksRUFBbUI5RyxFQUFnQmtDLEVBQWNxRyxHQUdqRHpCLEVBQW1CekgsRUFBY3lILEVBQWtCRCxFQUNyRCxDQUdBRyxFQUFtQkYsR0FwR3ZCLFNBQXVCN0csR0FDckIsTUFBTTBJLEVBQWlCckksU0FBU3dCLGVBQWUsbUJBQy9DLElBQUs2RyxFQUFnQixPQUVyQixNQUFNQyxFQUFVLEdBRVozSSxFQUFRbkIsTUFBTThKLEVBQVFDLEtBQUs1SSxFQUFRbkIsTUFDbkNtQixFQUFRakIsYUFBYTRKLEVBQVFDLEtBQUs1SSxFQUFRakIsYUFDMUNpQixFQUFRaEIsY0FBYzJKLEVBQVFDLEtBQUs1SSxFQUFRaEIsY0FFeEIsSUFBbkIySixFQUFRM0YsUUFDVjJGLEVBQVFDLEtBQUssT0FHZkYsRUFBZW5JLFlBQWNvSSxFQUFRdEUsS0FBSyxNQUM1QyxDQXNGSXdFLENBQWNQLEdBQ2RILEVBQWtCdkIsR0FHYkUsR0FDSHpHLFNBQVNpRSxpQkFBaUIseUJBQXlCQyxRQUFTQyxJQUMxREEsRUFBSWxCLGlCQUFpQixRQUFTLEtBQzVCLE1BQU04RSxFQUFXNUQsRUFBSUUsUUFBUW5GLEtBMUVoQyxJQUFxQmlDLEVBMkVkNEcsSUExRVp4QixFQUQwQnBGLEVBNEVKNEcsRUExRXRCdkIsRUFBbUJ6SCxFQUFjeUgsRUFBa0JyRixHQUNuRHVGLEVBQW1CRixHQUNuQnNCLEVBQWtCM0csT0E2RWxCLENBQUUsTUFBTzlELEdBQ1BDLFFBQVFELE1BQU0sZ0NBQWlDQSxHRnJKNUMsU0FBbUJvTCxHQUN4Qm5MLFFBQVFELE1BQU1vTCxHQUdkLE1BQU1DLEVBQVcxSSxTQUFTQyxjQUFjLE9BQ3hDeUksRUFBU3pCLFVBQVksZ0JBQ3JCeUIsRUFBU0MsTUFBTUMsUUFBVSxzS0FTekJGLEVBQVN4SSxZQUFjdUksRUFHdkJ6SSxTQUFTa0ksS0FBS1csYUFBYUgsRUFBVTFJLFNBQVNrSSxLQUFLWSxZQUduREMsV0FBVyxLQUNUTCxFQUFTekcsVUFDUixJQUNMLENFOEhJK0csQ0FBVSwyREFDWixDQUNGLENDOVBBLE1BQU1DLEVBQWdCLFdBd0J0QmpKLFNBQVNpRCxpQkFBaUIsbUJBQW9CN0csV0F0QjlDLFdBQ0UsTUFBTThNLEVBQVlsSixTQUFTb0ksY0FBYyxlQUN6QyxJQUFLYyxFQUFXLE9BR2hCLE1BQU1DLEVBQVlDLGFBQWFDLFFBQVFKLEdBQ2pDSyxFQUFjakwsT0FBT2tMLFdBQVcsZ0NBQWdDQyxTQUdwRCxTQUFkTCxJQUEwQkEsR0FBYUcsSUFDekN0SixTQUFTeUosZ0JBQWdCaEksVUFBVUMsSUFBSSxRQUl6Q3dILEVBQVVqRyxpQkFBaUIsUUFBUyxLQUNsQ2pELFNBQVN5SixnQkFBZ0JoSSxVQUFVMkMsT0FBTyxRQUMxQyxNQUFNc0YsRUFBUzFKLFNBQVN5SixnQkFBZ0JoSSxVQUFVa0ksU0FBUyxRQUMzRFAsYUFBYVEsUUFBUVgsRUFBZVMsSUFFeEMsQ0FLRUcsU0o0TEt6TixpQkFDTCxNQUFPVCxFQUFXQyxFQUFjQyxFQUFlQyxTQUF1QjhKLFFBQVF2QyxJQUFJLENBQ2hGeEcsSUFDQVUsSUFDQUMsSUFDQU8sTUFHRixNQUFPLENBQ0xwQyxZQUNBQyxlQUNBQyxnQkFDQUMsZ0JBRUosQ0l4TVFnTyxHQUdOLE1BQU1sSSxRQUFxQmpFLElBRzNCLElBQUlzSyxFQUFhL0osSUFDWitKLEVBQVd2SixhQUFnQnVKLEVBQVd0SixjQUFpQnNKLEVBQVd6SixPQUNyRXlKLEVBQWFySixLQUlmLE1BQU0wQyxFQUFjSixJQUVwQixJQUFJNkksRUFBT25JLEVBS1gsR0FGQW1JLEVBQU9ySyxFQUFnQnFLLEVBQU05QixHQUV6QjNHLEVBQWEsT0FFVEYsRUFBb0IsS0FDeEIsTUFBTTRJLEVBQWN4RixJQUdkeUYsRUFBYSxJQUFJcEksSUFBSW1JLEVBQVlsSSxJQUFJakUsR0FBT0EsRUFBSXFNLEtBQ2hEQyxFQUFhSixFQUFLbk0sT0FBT0MsR0FBT29NLEVBQVdHLElBQUl2TSxFQUFJcU0sS0QrTTdEMUQsRUFBbUJ6SCxFQzdNSW9MLEVENk1xQjVELEdBQzVDRyxFQUFtQkYsR0FDbkJzQixFQUFrQnZCLEtDM01oQixNQUFNeUQsRUFBY3hGLElBQ2R5RixFQUFhLElBQUlwSSxJQUFJbUksRUFBWWxJLElBQUlqRSxHQUFPQSxFQUFJcU0sS0FDdERILEVBQU9BLEVBQUtuTSxPQUFPQyxHQUFPb00sRUFBV0csSUFBSXZNLEVBQUlxTSxJQUMvQyxDQUdBSCxFQUFPaEwsRUFBY2dMLEVBQU0sUURxTjNCdkQsRUNwTm9CdUQsRUFDcEIvQixFQUFrQkMsRUFBWTNHIn0=
